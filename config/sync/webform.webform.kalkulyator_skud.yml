uuid: 8c95857f-8fcf-43fe-8853-27f5100e7282
langcode: ru
status: closed
dependencies:
  module:
    - webform_entity_print
third_party_settings:
  webform_entity_print:
    template:
      header: ''
      footer: ''
      css: ''
    export_types:
      pdf:
        enabled: true
        link_text: ''
        link_attributes: {  }
weight: 0
open: null
close: null
uid: 1
template: false
archive: false
id: kalkulyator_skud
title: 'Калькулятор СКУД для дверей'
description: ''
categories: {  }
elements: |-
  cards_type_volume:
    '#type': fieldset
    '#title': 'Тип и количество карт доступа'
    '#attributes':
      class:
        - flex-width-auto
    '#format': details-closed
    flexbox_cards:
      '#type': webform_flexbox
      '#states':
        invisible-slide:
          ':input[name="face_vol"]':
            value:
              greater: '0'
      '#align_items': flex-end
      kolichestvo_kart:
        '#type': number
        '#title': 'Количество карт пользователей'
        '#help_title': '<none>'
        '#help': '&nbsp;Количество людей в системе, включая гостевые карты.'
        '#description_display': tooltip
        '#help_display': title_after
        '#size': '7'
        '#prepopulate': true
        '#flex': 0
        '#default_value': '0'
        '#wrapper_attributes':
          class:
            - long-label
        '#min': 0
        '#max': 25000
        '#step': 1
      tip_kart:
        '#type': select
        '#title': 'Тип карт'
        '#help_title': '<none>'
        '#help': |
          <p><strong>Em-Marine</strong> &mdash; самые бюджетные карты. В них применяется амплитудная модуляция, что позволяет максимально удешевить как сами карты, так и считыватели. Однако они обладают низкой защитой от копирования.</p>
          <p><strong>HID</strong> &mdash; самые дорогие карты, для которых требуются более дорогостоящие считыватели. В них используется частотная модуляция, что обеспечивает высокую помехозащищенность и дальность идентификации до одного метра. Отличаются высокой защитой от копирования.</p>
          <p><strong>Mifare</strong> &mdash; объединяет несколько типов микросхем, часть которых применяется в системах государственной и банковской идентификации. Карты Mifare характеризуются невысокой дальностью считывания, однако их почти невозможно подделать.</p>
          
        '#help_display': title_after
        '#prepopulate': true
        '#options':
          Em-Marine: Em-Marine
          HID: HID
          Mifare: Mifare
        '#flex': 0
        '#wrapper_attributes':
          class:
            - long-label
      card_type:
        '#type': processed_text
        '#flex': 0
        '#wrapper_attributes':
          class:
            - preview
        '#text': '<img alt="Односторонняя дверь" src="/themes/custom/skud_mb/images/calc/card_type.jpg" height="75" />'
        '#format': full_html
  face_recog_check:
    '#type': checkbox
    '#title': 'Требуется биометрический доступ'
    '#help_display': title_after
    '#return_value': checked
  readers_design:
    '#type': fieldset
    '#title': 'Дизайн считывателей'
    '#states':
      invisible-slide:
        ':input[name="face_recog_check"]':
          checked: true
        ':input[name="tip_kart"]':
          filled: true
    flexbox_readers:
      '#type': webform_flexbox
      '#states':
        invisible-slide:
          ':input[name="tip_kart"]':
            value: HID
      readers_style:
        '#type': select
        '#title': 'Вид считывателей'
        '#help': 'Вы можете оставить в расчете считыватели&nbsp;стандартного вида&nbsp; или выбрать один из вариантов уникальных дизайнерских <a href="https://readers.agrg.ru">считывателей Eywa</a>&nbsp;премиум-класса, выполненных из натурального дерева по HiTech-технологии.'
        '#help_display': title_after
        '#options':
          ordinary: Обычный
          eywa_classics: 'Eywa Classics'
          eywa_art: 'Eywa Art'
        '#default_value': ordinary
      reader_ordinary:
        '#type': processed_text
        '#flex': 0
        '#states':
          visible:
            ':input[name="readers_style"]':
              value: ordinary
        '#wrapper_attributes':
          class:
            - preview
        '#text': '<img alt="Обычный считыватель карт доступа" src="/themes/custom/skud_mb/images/calc/reader_ordinary.jpg" height="75" />'
        '#format': full_html
      reader_eywa_classics:
        '#type': processed_text
        '#flex': 0
        '#states':
          visible:
            ':input[name="readers_style"]':
              value: eywa_classics
        '#wrapper_attributes':
          class:
            - preview
        '#text': '<img alt="Дизайнерский считыватель Eywa Classics" src="/themes/custom/skud_mb/images/calc/reader_eywa_classics.jpg" height="75" />'
        '#format': full_html
      reader_eywa_art:
        '#type': processed_text
        '#flex': 0
        '#states':
          visible:
            ':input[name="readers_style"]':
              value: eywa_art
        '#wrapper_attributes':
          class:
            - preview
        '#text': '<img alt="Дизайнерский считыватель Eywa Art" src="/themes/custom/skud_mb/images/calc/reader_eywa_art.jpg" height="75" />'
        '#format': full_html
  biometriya:
    '#type': fieldset
    '#title': Биометрия
    '#title_display': invisible
    '#states':
      visible-slide:
        ':input[name="face_recog_check"]':
          checked: true
    '#attributes':
      class:
        - flex-width-auto
    flexbox_bio:
      '#type': webform_flexbox
      finger_vol:
        '#type': number
        '#title': 'По отпечаткам пальцев (количество)'
        '#help_title': '<none>'
        '#help': 'Количество людей в системе с доступом по отпечаткам пальцев.'
        '#description_display': tooltip
        '#help_display': title_after
        '#size': '7'
        '#flex': 0
        '#states':
          invisible-slide:
            ':input[name="face_vol"]':
              value:
                greater: '0'
        '#default_value': '0'
        '#wrapper_attributes':
          class:
            - long-label
        '#min': 0
        '#max': 25000
        '#step': 1
      face_vol:
        '#type': number
        '#title': 'По лицам (количество)'
        '#help_title': '<none>'
        '#help': 'Количество людей в системе с доступом по идентификации лиц. При выборе данного способа идентификации проход по картам и отпечаткам пальцев становится недоступным.'
        '#description_display': tooltip
        '#help_display': title_after
        '#size': '7'
        '#flex': 0
        '#states':
          disabled:
            ':input[name="face_recog_check"]':
              unchecked: true
        '#default_value': '0'
        '#wrapper_attributes':
          class:
            - long-label
        '#min': 0
        '#max': 25000
        '#step': 1
  doors_type_volume:
    '#type': fieldset
    '#title': 'Точки прохода (двери)'
    flexbox_door:
      '#type': webform_flexbox
      oneside_door_volume:
        '#type': number
        '#title': 'Количество дверей со считывателем снаружи и кнопкой выхода изнутри (односторонние двери)'
        '#help_title': '<none>'
        '#help': 'Односторонняя дверь &mdash; дверь, оборудованная считывателем только&nbsp;снаружи. Внутри она открывается кнопкой выхода.'
        '#description_display': tooltip
        '#help_display': title_after
        '#flex': 0
        '#default_value': '0'
        '#wrapper_attributes':
          class:
            - long-label
        '#min': 0
        '#max': 10000
        '#step': 1
      processed_text:
        '#type': processed_text
        '#flex': 0
        '#wrapper_attributes':
          class:
            - preview
        '#text': '<img alt="Односторонняя дверь" src="/themes/custom/skud_mb/images/calc/1side-door.jpg" />'
        '#format': full_html
    flexbox_door_1:
      '#type': webform_flexbox
      twoside_door_volume:
        '#type': number
        '#title': 'Количество дверей с двумя считывателями — по одному снаружи и внутри (двухсторонние двери)'
        '#help_title': '<none>'
        '#help': 'Двухсторонняя дверь &mdash; дверь, оборудованная считывателями снаружи и внутри помещения.'
        '#description_display': tooltip
        '#help_display': title_after
        '#flex': 0
        '#default_value': '0'
        '#wrapper_attributes':
          class:
            - long-label
        '#attributes':
          class:
            - long-label
        '#min': 0
        '#max': 10000
        '#step': 1
      processed_text_01:
        '#type': processed_text
        '#flex': 0
        '#wrapper_attributes':
          class:
            - preview
        '#text': |
          <p><img alt="Односторонняя дверь" src="/themes/custom/skud_mb/images/calc/2side-door.jpg" /></p>
          
        '#format': full_html
    flexbox_distance:
      '#type': webform_flexbox
      door_distance:
        '#type': select
        '#title': 'Расстояние между дверьми'
        '#options':
          30less: 'меньше 30 м'
          30more: 'больше 30 м'
      distance_30_less:
        '#type': processed_text
        '#states':
          visible-slide:
            ':input[name="door_distance"]':
              value: 30less
        '#wrapper_attributes':
          class:
            - preview
        '#text': |
          <p><img alt="Односторонняя дверь" src="/themes/custom/skud_mb/images/calc/door-distance-30-less.jpg" /></p>
          
        '#format': full_html
      distance_30_more:
        '#type': processed_text
        '#states':
          visible-slide:
            ':input[name="door_distance"]':
              value: 30more
        '#wrapper_attributes':
          class:
            - preview
        '#text': |
          <p><img alt="Односторонняя дверь" src="/themes/custom/skud_mb/images/calc/door-distance-30-more.jpg" /></p>
          
        '#format': full_html
    flexbox_lock_type:
      '#type': webform_flexbox
      lock_type:
        '#type': select
        '#title': 'Тип замков для дверей'
        '#help_title': '<none>'
        '#help': |
          <strong>Электромеханическая защелка</strong> &mdash; продвинутый вариант наиболее распространенного запирающего механизма, характерного для обычных дверей. При подаче электрического импульса защелка разблокируется и остается открытой до тех пор, пока дверь вновь не будет закрыта.<br />
          <br />
          <strong>Электромагнитный замок</strong> &mdash; замок, состоящий из электромагнита и притягивающейся планки двери. Монтируется в верхней части дверного проема.&nbsp;<br />
          <br />
          <strong>Разные</strong> &mdash; данный вариант позволяет отдельно указать требуемое количество защелок и замков.
          
        '#help_display': title_after
        '#options':
          mechanical: Электромеханический
          magnet: Электромагнитный
          mixed: Разные
      mechanical_lock_img_01:
        '#type': processed_text
        '#states':
          visible-slide:
            ':input[name="lock_type"]':
              value: mechanical
        '#wrapper_attributes':
          class:
            - preview
        '#text': |
          <p><img alt="Односторонняя дверь" src="/themes/custom/skud_mb/images/calc/mechanical_lock.jpg" /></p>
          
        '#format': full_html
      magnet_lock_img_01:
        '#type': processed_text
        '#states':
          visible-slide:
            ':input[name="lock_type"]':
              value: magnet
        '#wrapper_attributes':
          class:
            - preview
        '#text': |
          <p><img alt="Односторонняя дверь" src="/themes/custom/skud_mb/images/calc/magnet_lock.jpg" /></p>
          
        '#format': full_html
      raznye_zamki:
        '#type': fieldset
        '#title': 'Разные замки'
        '#title_display': invisible
        '#states':
          visible-slide:
            ':input[name="lock_type"]':
              value: mixed
        flexbox_mechanical_lock:
          '#type': webform_flexbox
          '#states':
            visible-slide:
              ':input[name="lock_type"]':
                value: mixed
          mechanical_lock_volume:
            '#type': number
            '#title': 'Количество электромеханических защелок'
            '#help_title': '<none>'
            '#help': 'Укажите количество электромеханических защелок.'
            '#description_display': tooltip
            '#help_display': title_before
            '#flex': 0
            '#default_value': '0'
            '#wrapper_attributes':
              class:
                - long-label
            '#attributes':
              class:
                - long-label
            '#min': 0
            '#max': 10000
            '#step': 1
          mechanical_lock_img:
            '#type': processed_text
            '#flex': 0
            '#wrapper_attributes':
              class:
                - preview
            '#text': |
              <p><img alt="Односторонняя дверь" src="/themes/custom/skud_mb/images/calc/mechanical_lock.jpg" /></p>
              
            '#format': full_html
        flexbox_magnet_lock:
          '#type': webform_flexbox
          '#states':
            visible-slide:
              ':input[name="lock_type"]':
                value: mixed
          magnet_lock_volume:
            '#type': number
            '#title': 'Количество электромагнитных замков'
            '#help_title': '<none>'
            '#help': 'Укажите количество электромагнитных замков.'
            '#description_display': tooltip
            '#help_display': title_before
            '#flex': 0
            '#default_value': '0'
            '#wrapper_attributes':
              class:
                - long-label
            '#min': 0
            '#max': 10000
            '#step': 1
          magnet_lock_img:
            '#type': processed_text
            '#flex': 0
            '#wrapper_attributes':
              class:
                - preview
            '#text': |
              <p><img alt="Электромагнитный замок" src="/themes/custom/skud_mb/images/calc/magnet_lock_1.jpg" /></p>
              
            '#format': full_html
  turnstile_check:
    '#type': checkbox
    '#title': 'Добавить турникет'
  turnstiles:
    '#type': fieldset
    '#title': 'Точки прохода (турникеты)'
    '#states':
      visible-slide:
        ':input[name="turnstile_check"]':
          checked: true
    '#attributes':
      class:
        - flex-width-auto
    flexbox_turnstiles:
      '#type': webform_flexbox
      '#align_items': flex-end
      turnstile_volume:
        '#type': number
        '#title': 'Количество турникетов'
        '#description_display': tooltip
        '#help_display': title_before
        '#flex': 0
        '#default_value': '1'
        '#wrapper_attributes':
          class:
            - long-label
        '#min': 0
        '#max': 10000
        '#step': 1
      turnstile_type:
        '#type': select
        '#title': 'Тип турникета'
        '#options':
          tripod: Трипод
          gate: Калитка
        '#flex': 0
      turnstile_tripod_img:
        '#type': processed_text
        '#flex': 0
        '#states':
          visible:
            ':input[name="turnstile_type"]':
              value: tripod
        '#wrapper_attributes':
          class:
            - preview
        '#text': |
          <p><img alt="Турникет-трипод Perco" src="/themes/custom/skud_mb/images/calc/perco-tripod.jpg" height="80" /></p>
          
        '#format': full_html
      turnstile_gate_img:
        '#type': processed_text
        '#flex': 0
        '#states':
          visible:
            ':input[name="turnstile_type"]':
              value: gate
        '#wrapper_attributes':
          class:
            - preview
        '#text': |
          <p><img alt="Турникет-трипод Perco" src="/themes/custom/skud_mb/images/calc/perco-gate.jpg" height="80" /></p>
          
        '#format': full_html
    cardcapture_check:
      '#type': checkbox
      '#title': 'С картоприемником'
      '#states':
        invisible:
          ':input[name="face_vol"]':
            value:
              greater: '0'
  dopolnitelnoe_oborudovanie:
    '#type': fieldset
    '#title': 'Сервер для СКУД'
    '#attributes':
      class:
        - flex-width-auto
    server_skud:
      '#type': checkbox
      '#title': 'Сервер СКУД'
      '#description': 'У меня нет надежного, производительного и постоянно работающего компьютера, имеющего достаточный объем свободного места и стабильное подключение к локальной сети. Хочу включить в расчет отдельный сервер СКУД.'
      '#more_title': Подробнее...
      '#more': '<p><img alt="Сервер СКУД" class="more" src="/themes/custom/skud_mb/images/calc/servers.jpg" /></p>'
      '#title_display': invisible
      '#description_display': after
      '#help_display': title_after
      '#states':
        invisible-slide:
          ':input[name="face_vol"]':
            value:
              greater: '0'
    urm_skud_check:
      '#type': checkbox
      '#title': 'УРМ СКУД (флажок)'
      '#description': 'Необходим дополнительный(-ые) компьютер(-ы) для удаленного рабочего места оператора СКУД.'
      '#title_display': invisible
      '#description_display': after
    flexbox_urm_skud:
      '#type': webform_flexbox
      '#states':
        visible-slide:
          ':input[name="urm_skud_check"]':
            checked: true
      '#attributes':
        class:
          - flex-column
      urm_skud_type:
        '#type': select
        '#title': 'Тип АРМ оператора СКУД'
        '#help_title': '<none>'
        '#help': |
          <strong>MiniTower, Windows 10</strong> &mdash; базовая платформа АРМ оператора СКУД в корпусе Mini Tower с установленной ОС Windows 10 IoT LTSB. Компактное отдельностоящее исполнение.<br />
          <br />
          <strong>VESA, Windows 10</strong> &mdash; базовая платформа АРМ оператора СКУД в компактном корпусе с креплением VESA&nbsp;с установленной ОС Windows 10 IoT LTSB. Эстетичная модель&nbsp;для установки на монитор с аналогичным типом крепления.<br />
          <br />
          <strong>MiniTower, Linux</strong> &mdash; базовая платформа АРМ оператора СКУД с ОС Линукс. Ультракомпактное отдельностоящее исполнение, минимальное энергопотребление, отказоустойчивость, высокая скорость загрузки и выгодная цена.
          
        '#help_display': title_after
        '#options':
          mt_win: 'MiniTower, Windows 10'
          vesa_win: 'VESA, Windows 10'
          mt_linux: 'MiniTower, Linux'
        '#flex': 0
        '#states':
          visible:
            ':input[name="urm_skud_check"]':
              checked: true
      urm_skud:
        '#type': number
        '#title': 'Количество АРМ СКУД'
        '#title_display': before
        '#description_display': before
        '#help_display': title_before
        '#flex': 0
        '#states':
          visible:
            ':input[name="urm_skud_check"]':
              checked: true
        '#default_value': '1'
        '#wrapper_attributes':
          class:
            - long-label
        '#min': 0
        '#max': 10000
        '#step': 1
  dopolnitelnye_moduli_po_castle:
    '#type': fieldset
    '#title': 'Дополнительные модули ПО Castle'
    '#attributes':
      class:
        - flex-width-auto
    module_po_castle_time_track:
      '#type': checkbox
      '#title': 'Модуль «Учет рабочего времени»'
      '#help_title': '<none>'
      '#help': |
        Функции модуля:
        <ul>
          <li>Создание рабочих графиков для сотрудников</li>
          <li>Получение отчетов за любой исторический период</li>
          <li>Полный журнал отклонений от рабочего графика</li>
          <li>Журнал неявок, опозданий и других временных нарушений рабочей дисциплины</li>
        </ul>
        
      '#help_display': title_after
      '#return_value': checked
    module_po_castle_pass_print:
      '#type': checkbox
      '#title': 'Модуль «Создание и печать пропусков»'
      '#help_title': '<none>'
      '#help': |
        Функции модуля:
        <ul>
          <li>Создание и редактирование шаблонов графического оформления пропусков</li>
          <li>Назначение шаблонов пропусков для сотрудников</li>
          <li>Печать пропусков на основании шаблонов и персональных данных сотрудников</li>
        </ul>
        
      '#help_display': title_after
      '#return_value': checked
    module_po_castle_event_monitor:
      '#type': checkbox
      '#title': 'Модуль «Мониторинг событий (фотоидентификация)»'
      '#help_title': '<none>'
      '#help': |
        Функции модуля:
        <ul>
          <li>Наблюдение в режиме реального времени за событиями, происходящими в системе. При запросе прохода сотрудником отображается его учетная карточка из базы, включающая фотографию.</li>
        </ul>
        
      '#help_display': title_after
      '#return_value': checked
    module_po_castle_1c_integration:
      '#type': checkbox
      '#title': 'Модуль «Интеграция с 1С»'
      '#help_title': '<none>'
      '#help': |
        Функции модуля:
        <ul>
          <li>Дополняет функции модуля &laquo;Учет рабочего времени&raquo;</li>
          <li>Автоматическая передача табеля (форма Т-13) в &laquo;1C: Предприятие&raquo;</li>
        </ul>
        
      '#help_display': title_after
    module_po_castle_pass_ext:
      '#type': checkbox
      '#title': 'Модуль «Расширенная поддержка пропусков посетителей»'
      '#help_title': '<none>'
      '#help': |
        Функции модуля:
        <ul>
          <li>Интерфейс для выдачи/сбора карт (АРМ &laquo;Бюро пропусков&raquo;), при выдаче происходит привязка карты к паспорту или другому документу посетителя</li>
          <li>Хранение истории выдачи карт</li>
          <li>Задание списка карт посетителей</li>
        </ul>
        
      '#help_display': title_after
      '#required_error': 'Модуль «Расширенная поддержка пропусков посетителей» обязателен, если выбран картоприемник'
      '#states':
        checked:
          ':input[name="cardcapture_check"]':
            checked: true
        required:
          ':input[name="cardcapture_check"]':
            checked: true
    module_po_castle_event_response:
      '#type': checkbox
      '#title': 'Модуль «Реакция на события»'
      '#help_title': '<none>'
      '#help': |
        Функции модуля:
        <ul>
          <li>Задание списка действий, которые будут выполняться системой автоматически при наступлении каких-либо событий. Например, возможна отправка SMS-сообщения на указанный телефонный номер.</li>
        </ul>
        
      '#help_display': title_after
    module_po_castle_data_sync:
      '#type': checkbox
      '#title': 'Модуль «Синхронизация данных»'
      '#help_title': '<none>'
      '#help': |
        Функции модуля:
        <ul>
          <li>Автоматическая синхронизация списка сотрудников в СКУД по внешней базе данных существующей корпоративной системы.</li>
        </ul>
        
      '#help_display': title_after
    module_po_castle_doc_ocr:
      '#type': checkbox
      '#title': 'Модуль «Распознавание документов»'
      '#help_title': '<none>'
      '#help': |
        Функции модуля:
        <ul>
          <li>Автоматическое сканирование и распознавание документов при выдаче временного пропуска посетителю.</li>
        </ul>
        
      '#help_display': title_after
  ceny:
    '#type': fieldset
    '#title': Цены
    '#title_display': invisible
    '#states':
      disabled:
        ':input[name="itogo"]':
          '': ''
    cards_cost:
      '#type': fieldset
      '#title': cards_cost
      '#title_display': invisible
      '#states':
        disabled:
          ':input[name="itogo"]':
            '': ''
      '#states_clear': false
      cena_karty_em_marine:
        '#type': number
        '#title': 'Карта EM-Marine, бесконтактный идентификатор (толстая), TS '
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '25'
      cena_karty_hid:
        '#type': number
        '#title': 'Карта HID, бесконтактный идентификатор iC2002'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '459'
      cena_karty_mifare:
        '#type': number
        '#title': 'Карта Mifare, бесконтактный идентификатор Smart-карта TS толстая (13,56МГц 1K)'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '30'
    users_cost:
      '#type': fieldset
      '#title': users_cost
      '#title_display': invisible
      '#states':
        disabled:
          ':input[name="itogo"]':
            '': ''
      '#states_clear': false
      cena_po_castle_50:
        '#type': number
        '#title': 'Цена ПО Castle 50'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '5200'
      cena_po_castle_1000:
        '#type': number
        '#title': 'Цена ПО Castle 1000'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '20898'
      cena_po_castle_10000:
        '#type': number
        '#title': 'Цена ПО Castle 10000'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '27637'
      cena_po_castle_25000:
        '#type': number
        '#title': 'Цена ПО Castle 25000'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '51174'
    readers_cost:
      '#type': fieldset
      '#title': readers_cost
      '#title_display': invisible
      '#states':
        disabled:
          '':
            '': ''
      cena_reader_em_marine_ordinary:
        '#type': number
        '#title': 'Считыватель TS-RDR-E White EM-Marine'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '1544'
      cena_reader_hid_ordinary:
        '#type': number
        '#title': 'Считыватель TS-RDR-EHMF Metal'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '4624'
      cena_reader_mifare_ordinary:
        '#type': number
        '#title': 'Считыватель TS-RDR-MF Metal Mifare'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '3712'
      cena_bio_reader_em_marine:
        '#type': number
        '#title': 'Биометрический контроллер-считыватель Biosmart 5M-O-EM'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '38000'
      cena_bio_reader_hid:
        '#type': number
        '#title': 'Биометрический контроллер-считыватель BioSmart 4-O-HD-N-L'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '71060'
      cena_bio_reader_mifare:
        '#type': number
        '#title': 'Биометрический контроллер-считыватель Biosmart 5M-O-MF'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '41500'
      cena_reader_em_marine_premium:
        '#type': number
        '#title': 'Цена считывателя Em-Marine (премиум)'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '3000'
      cena_reader_hid_premium:
        '#type': number
        '#title': 'Цена считывателя HID (премиум)'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '11000'
      cena_reader_mifare_premium:
        '#type': number
        '#title': 'Цена считывателя Mifare (премиум)'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '8000'
      cena_reader_eywa_classics:
        '#type': number
        '#title': 'Считыватель AGRG-CLS-B-ABL1-MF/EM-NONE-NO-LOGO'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '18740'
      cena_reader_eywa_art:
        '#type': number
        '#title': 'Считыватель AGRG-ART-C-R-ABL1-MF/EM-BLU-NO-LOGO'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '29850'
    controllers_cost:
      '#type': fieldset
      '#title': controllers_cost
      '#title_display': invisible
      cena_ep:
        '#type': number
        '#title': 'Цена EP'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '20500'
      cena_ep2:
        '#type': number
        '#title': 'Цена EP2'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '13400'
      cena_ep4:
        '#type': number
        '#title': 'Цена EP4'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '22500'
    locks_cost:
      '#type': fieldset
      '#title': locks_cost
      '#title_display': invisible
      cena_mechanical_lock:
        '#type': number
        '#title': 'Защелка электромеханическая Viro 7755.70 с ответной планкой'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '2100'
      cena_magnetlock:
        '#type': number
        '#title': 'Электромагнитный замок TS-ML300'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '2608'
      cena_bbp_20:
        '#type': number
        '#title': 'Источник вторичного электропитания ББП-20 TS'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '1085'
      cena_bbp_50:
        '#type': number
        '#title': 'Источник вторичного электропитания ББП-50 TS'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '2265'
      cena_ivepr:
        '#type': number
        '#title': 'Блок питания ИВЭПР 24/5 2x12-Р БР'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '6327'
    extras_cost:
      '#type': fieldset
      '#title': extras_cost
      '#title_display': invisible
      '#states':
        invisible:
          ':input[name="itogo"]':
            '': ''
      cena_battery_dt1207:
        '#type': number
        '#title': 'Аккумулятор 12В 7 А•ч (DT 1207)'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '1044'
      cena_battery_dt1212:
        '#type': number
        '#title': 'Аккумулятор 12В 12 А∙ч (DT 1212)'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '2134'
      cena_button_ordinary:
        '#type': number
        '#title': 'Сенсорная кнопка выхода TS-MAGIC чёрный'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '1088'
      cena_montage_corner:
        '#type': number
        '#title': 'Монтажный L-образный уголок для крепления электромагнитного замка, TS-LM300'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '632'
      cena_closer_tantos_ts_dc085:
        '#type': number
        '#title': 'TANTOS TS-DC085 Freeze серебро - доводчик дверной с усилием EN4 для дверей весом до 100 кг'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '2560'
      cena_detector_door:
        '#type': number
        '#title': 'Извещатель охранный магнитоконтактный ИО 102-20 Б2П'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '135'
      cena_detector_controller:
        '#type': number
        '#title': 'Устройство разблокировки двери TS-ERButton'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '1104'
      cena_reader_master_em_marine:
        '#type': number
        '#title': 'Контрольный считыватель карт форматов EM-Marine и HID настольный «Castle-Reader» с интерфейсом USB'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '5200'
      cena_reader_master_mifare:
        '#type': number
        '#title': 'Контрольный считыватель «ACR1252U USB NFC Reader III» Mifare'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '10500'
      cena_bio_reader_master:
        '#type': number
        '#title': 'USB-считыватель настольный BioSmart FS-80'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '11200'
      cena_camera:
        '#type': number
        '#title': 'Видеокамера сетевая (IP) TSi-Pe25VP'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '12560'
    servers_cost:
      '#type': fieldset
      '#title': servers_cost
      '#title_display': invisible
      '#states':
        disabled:
          '':
            '': ''
      cena_server_skud:
        '#type': number
        '#title': 'Сервер СКУД "AGRG VideoСервер vS SKUD.Castle.1Tb.m0.R1":'
        '#description': |
          Базовая платформа сервера СКУД для установки в стойку. Устанавливается в стойку (Rackmount 19&quot;, 1U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция). Максимально доступное решение:
          <ul>
          	<li>Процессор: INTEL Core i3</li>
          	<li>Оперативная память: 4 Гб</li>
          	<li>ОС: Windows 10 IoT LTSB</li>
          	<li>СХД базы данных: HDD 1Tb NAS</li>
          	<li>Тип монтажа: Rackmount 19&quot;, 1U</li>
          	<li>Размеры (ШхГхВ): 430x250x44 мм</li>
          	<li>Питание: 220V, &gt;300W</li>
          </ul>
          
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '130160'
      cena_server_face_10:
        '#type': number
        '#title': 'Сервер "AGRG VideoСервер vs 10 2988-134 2MPx.25fps.16TbR5"'
        '#description': |
          Сервер СКУД для организации доступа при помощи идентификации лиц, включая ПО:
          <ul>
          	<li>Программное обеспечение &quot;Интеллект&quot; - Подключение видеоканала (лицензия на 10 каналов)</li>
          	<li>Программное обеспечение - Система защиты Guardant</li>
          	<li>Программное обеспечение &quot;Интеллект&quot; - Ядро системы</li>
          	<li>Программное обеспечение &quot;Интеллект&quot; - Интеграция СКУД Castle</li>
          </ul>
          
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '1638384'
      cena_server_skud_50_rack:
        '#type': number
        '#title': 'Сервер СКУД "AGRG VideoСервер vS SKUD.Castle.1TbR1.m0.R1.5"'
        '#description': |
          Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1). Устанавливается в стойку (Rackmount 19&quot;, 1.5U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):
          <ul>
          	<li>Процессор: INTEL Core i3</li>
          	<li>Оперативная память: 4 Гб</li>
          	<li>ОС: Windows 10 IoT LTSB</li>
          	<li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>
          	<li>Тип монтажа: Rackmount 19&quot;, 1.5U</li>
          	<li>Размеры (ШхГхВ): 430x280x67 мм</li>
          	<li>Питание: 220V, &gt;300W</li>
          </ul>
          
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '142160'
      cena_server_skud_100_rack:
        '#type': number
        '#title': 'Сервер СКУД "AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4"'
        '#description': |
          Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):
          <ul>
          	<li>Процессор: INTEL Core i7</li>
          	<li>Оперативная память: 8 Гб</li>
          	<li>ОС: Windows 10 IoT LTSB</li>
          	<li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>
          	<li>Тип монтажа: Rackmount 19&quot;, 4U</li>
          	<li>Размеры (ШхГхВ): 430x280x67 мм</li>
          	<li>Питание: Redundant 1+1, 220V, &gt;300W</li>
          </ul>
          
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '263120'
      cena_server_skud_50_mt:
        '#type': number
        '#title': 'Сервер СКУД "AGRG VideoСервер iS SKUD.Castle.1T2.m1.MT"'
        '#description': |
          Базовая платформа сервера СКУД в корпусе MiniTower (компактное отдельностоящее исполнение). Поставляется с расширенной системой хранения архива событий базы данных. Оптимальное решение для объектов, на которых не используются серверные стойки для сетевого и серверного оборудования:
          <ul>
          	<li>Процессор: INTEL Core i3</li>
          	<li>Оперативная память: 4 Гб</li>
          	<li>ОС: Windows 10 IoT LTSB</li>
          	<li>СХД базы данных: HDD 2Tb Enterprise</li>
          	<li>Тип монтажа: отдельностоящий настольный</li>
          	<li>Размеры (ШхГхВ): 430x280x67 мм</li>
          	<li>Питание: 220V, &gt;300W</li>
          </ul>
          
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '130160'
      cena_urm_skud:
        '#type': number
        '#title': 'Рабочая станция СКУД "AGRG VideoСервер vS URM.SCUD.Castle.m1.MT"'
        '#description': |
          Базовая платформа АРМ оператора СКУД в корпусе MiniTower (компактное отдельностоящее исполнение):
          <ul>
          	<li>Процессор: INTEL Core i3</li>
          	<li>Оперативная память: 4 Гб</li>
          	<li>ОС: Windows 10 IoT LTSB</li>
          	<li>Тип монтажа: настольный</li>
          	<li>Размеры (ШхГхВ): 230x264x112 мм</li>
          	<li>Питание: 220V, &gt;160W</li>
          </ul>
          
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '91760'
      cena_urm_skud_vesa:
        '#type': number
        '#title': 'Рабочая станция СКУД "AGRG VideoСервер vS URM.SCUD.Castle.m1.NUC"'
        '#description': |
          Базовая платформа АРМ оператора СКУД в компактном корпусе с креплением VESA (для установки на монитор с аналогичным типом крепления). Компактная и эстетичная модель:
          <ul>
          	<li>Процессор: INTEL Core i3</li>
          	<li>Оперативная память: 4 Гб</li>
          	<li>ОС: Windows 10 IoT LTSB</li>
          	<li>Тип монтажа: VESA 100</li>
          	<li>Размеры (ШхГхВ): 115х111х48 мм</li>
          	<li>Питание: 220V, &gt;65W</li>
          </ul>
          
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '97040'
      cena_urm_skud_rspb:
        '#type': number
        '#title': 'Рабочая станция СКУД "AGRG VideoСервер vS URM.SCUD.Castle.m1.RSPB"'
        '#description': |
          Базовая платформа АРМ оператора СКУД на базе ОС Линукс (ультракомпактное отдельностоящее исполнение). Минимальное энергопотребление, отказоустойчивость ОС Линукс, высокая скорость загрузки и выгодная цена для заказчика:
          <ul>
          	<li>Процессор: ARM</li>
          	<li>Оперативная память: 1 Гб</li>
          	<li>ОС: Ubuntu</li>
          	<li>Тип монтажа: настольный</li>
          	<li>Размеры (ШхГхВ): 100х70х40 мм</li>
          	<li>Питание: 220V</li>
          </ul>
          
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '24000'
    turnstiles_cost:
      '#type': fieldset
      '#title': turnstiles_cost
      '#title_display': invisible
      '#states':
        invisible:
          '':
            '': ''
      cena_turnstile_tripod:
        '#type': number
        '#title': 'Турникет-трипод PERCo-TTR-07.1G'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '106729'
      cena_turnstile_gate:
        '#type': number
        '#title': 'Турникет с раздвижными створками PERCo-ST-02.900'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '1058032'
      cena_cardcapture:
        '#type': number
        '#title': 'Картоприемник PERCo-IC05'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '88490'
    modules_cost:
      '#type': fieldset
      '#title': modules_cost
      '#title_display': invisible
      '#states':
        invisible:
          '':
            '': ''
      cena_module_time_track:
        '#type': number
        '#title': 'Цена модуля «Учет рабочего времени»'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '16288'
      cena_module_pass_print:
        '#type': number
        '#title': 'Цена модуля «Создание и печать пропусков»'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '16288'
      cena_module_event_monitor:
        '#type': number
        '#title': 'Цена модуля «Мониторинг событий (фотоидентификация)»'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '4493'
      cena_module_1c_integration:
        '#type': number
        '#title': 'Цена модуля «Интеграция с 1С» (дополняет функции модуля "Учет рабочего времени"»'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '16288'
      cena_module_pass_ext:
        '#type': number
        '#title': 'Цена модуля «Расширенная поддержка пропусков посетителей»'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '16288'
      cena_module_event_response:
        '#type': number
        '#title': 'Цена модуля «Реакция на события»'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '16288'
      cena_module_data_sync:
        '#type': number
        '#title': 'Цена модуля «Синхронизация данных»'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '31512'
      cena_module_doc_ocr:
        '#type': number
        '#title': 'Цена модуля «Распознавание документов»'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '16288'
      cena_module_face_recog:
        '#type': number
        '#title': 'Цена модуля «Распознавание лиц»'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '64800'
      cena_module_face_ident_10:
        '#type': number
        '#title': 'Модуль «Идентификация лица» (лицензия на базу до 10 лиц)'
        '#help_title': '<none>'
        '#help': 'Обязательный модуль при выборе опции распознавания лиц.'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '92160'
      cena_module_face_ident_50:
        '#type': number
        '#title': 'Модуль «Идентификация лица» (лицензия на базу до 50 лиц)'
        '#help_title': '<none>'
        '#help': 'Обязательный модуль при выборе опции распознавания лиц.'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '129280'
      cena_module_face_ident_100:
        '#type': number
        '#title': 'Модуль «Идентификация лица» (лицензия на базу до 100 лиц)'
        '#help_title': '<none>'
        '#help': 'Обязательный модуль при выборе опции распознавания лиц.'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '166400'
      cena_module_face_ident_1000:
        '#type': number
        '#title': 'Распознавание лиц Tevian (лицензия на базу до 1000 лиц)'
        '#help_title': '<none>'
        '#help': 'Обязательный модуль при выборе опции распознавания лиц.'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '314000'
      cena_module_face_ident_camera:
        '#type': number
        '#title': 'Модуль «Идентификация лица» (лицензия на одну камеру)'
        '#help_title': '<none>'
        '#help': 'Обязательный модуль при выборе опции распознавания лиц.'
        '#field_suffix': ' руб.'
        '#disabled': true
        '#states':
          invisible:
            ':input[name="itogo"]':
              '': ''
        '#states_clear': false
        '#default_value': '8960'
  horizontal_rule:
    '#type': webform_horizontal_rule
  random:
    '#type': webform_computed_twig
    '#title': random
    '#description': '<img alt="" class="hidden" id="funny-pic" src="/themes/custom/skud_mb/images/calc/funny-btn.png" width="100" />'
    '#title_display': none
    '#description_display': before
    '#wrapper_attributes':
      class:
        - funny-btn-wrapper
    '#display_on': form
    '#mode': html
    '#template': |
      <button class="funny-btn" onClick="window.location.search = '&kolichestvo_kart={{random(1, 500)}}&tip_kart={{ random(['Em-marine', 'HID', 'Mifare'])}}&oneside_door_volume={{random(1, 10)}}&twoside_door_volume={{random(1, 10)}}&module_po_castle_time_track={{random(['checked', 'unchecked'])}}&module_po_castle_pass_print={{random(['checked', 'unchecked'])}}&module_po_castle_event_monitor={{random(['checked', 'unchecked'])}}&fake={{ 'checked'}}';">Рассчитать<br/>как-нибудь&nbsp;:)</button>
      
    '#whitespace': spaceless
  fake:
    '#type': checkbox
    '#title': fake
    '#title_display': invisible
    '#description_display': invisible
    '#states':
      invisible:
        ':input[name="itogo"]':
          filled: true
    '#states_clear': false
    '#return_value': checked
  trebuetsya_pomosch_specialista:
    '#type': checkbox
    '#title': 'Требуется помощь специалиста'
  phone:
    '#type': tel
    '#title': Телефон
    '#description': 'Введите номер телефона, и наш специалист перезвонит Вам, чтобы помочь точно рассчитать стоимость СКУД для Вашего объекта.'
    '#title_display': invisible
    '#minlength': 1
    '#maxlength': 30
    '#size': 30
    '#placeholder': '+7 (999) 999-99-99'
    '#states':
      visible-slide:
        ':input[name="trebuetsya_pomosch_specialista"]':
          checked: true
  email:
    '#type': email
    '#title': Email
    '#description': 'Укажите свой email, и на него автоматически поступит коммерческое предложение, составленное на основе Ваших расчетов. Если письмо не пришло, проверьте папку нежелательных сообщений.'
    '#title_display': invisible
    '#size': 30
    '#placeholder': Email
    '#required': true
    '#required_error': 'Для получения расчета на почту поле Email обязательно для заполнения'
  imya:
    '#type': textfield
    '#title': Имя
    '#title_display': invisible
    '#minlength': 1
    '#maxlength': 40
    '#size': 40
    '#placeholder': Имя
    '#required': true
  familiya:
    '#type': textfield
    '#title': Фамилия
    '#title_display': invisible
    '#minlength': 1
    '#maxlength': 40
    '#size': 40
    '#placeholder': Фамилия
    '#required': true
  itogo:
    '#type': webform_computed_twig
    '#title': Итого
    '#template': |
      {% set doors_total = (data.oneside_door_volume + data.twoside_door_volume) %}
      {% set r_oneside = data.oneside_door_volume %}
      {% set r_twoside = (data.twoside_door_volume * 2) %}
      {% set users_total = (data.kolichestvo_kart + data.finger_vol + data.face_vol) %}
      
      {# Card / Reader calculation #}
      {% if data.tip_kart == 'Em-Marine' -%}
        {% set card_name = 'Карта EM-Marine, бесконтактный идентификатор (толстая), TS' %}
        {% set card_price = data.cena_karty_em_marine %}
      
        {% if data.finger_vol > 0 %}
          {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-EM' %}
          {% set reader_price = data.cena_bio_reader_em_marine %}
        {% else %}
          {% set reader_name = 'Считыватель TS-RDR-E White EM-Marine' %}
          {% set reader_price = data.cena_reader_em_marine_ordinary %}
        {% endif %}
      
      {% elseif data.tip_kart == 'HID' %}
        {% set card_name = 'Карта HID, бесконтактный идентификатор iC2002' %}
        {% set card_price = data.cena_karty_hid %}
      
        {% if data.finger_vol > 0 %}
          {% set reader_name = 'Биометрический контроллер-считыватель BioSmart 4-O-HD-N-L' %}
          {% set reader_price = data.cena_bio_reader_hid %}
        {% else %}
          {% set reader_name = 'Считыватель TS-RDR-EHV-2 Metal HID' %}
          {% set reader_price = data.cena_reader_hid_ordinary %}
        {% endif %}
      
      {% elseif data.tip_kart == 'Mifare' %}
        {% set card_name = 'Карта Mifare, бесконтактный идентификатор Smart-карта TS толстая (13,56МГц 1K)' %}
        {% set card_price = data.cena_karty_mifare %}
      
        {% if data.finger_vol > 0 %}
          {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-MF' %}
          {% set reader_price = data.cena_bio_reader_mifare %}
        {% else %} 
          {% set reader_name = 'Считыватель TS-RDR-MF Metal Mifare' %}
          {% set reader_price = data.cena_reader_mifare_ordinary %}
        {% endif %}
      {%- endif %}
      
        {# Reader style calculation #}
        {% if data.readers_style == 'ordinary' or data.readers_style is empty -%}
        {% elseif data.readers_style == 'eywa_classics' %}
          {% set reader_name = 'Считыватель AGRG-CLS-B-ABL1-MF/EM-NONE-NO-LOGO' %}
          {% set reader_price = data.cena_reader_eywa_classics %}
        {% elseif data.readers_style == 'eywa_art' %}
          {% set reader_name = 'AGRG-ART-C-R-ABL1-MF/EM-BLU-NO-LOGO' %}
          {% set reader_price = data.cena_reader_eywa_art %}
        {%- endif %}  
      
      {% set card_vol = data.kolichestvo_kart %}
      {% set card_cost = (card_price * card_vol) %}
      
      {% set reader_vol = (r_oneside + r_twoside) %}
      {% set reader_cost = (reader_price * reader_vol) %}
      
      {# BBP / Lock calculation #}
      {% if data.lock_type == 'mechanical' -%}
        {% set bbp_mech_vol = (doors_total / 3)|round(0, 'ceil') %}
        {% set lock_mech_vol = doors_total %}
      
      {% elseif data.lock_type == 'magnet' %}
        {% set bbp_mag_vol = (doors_total / 2)|round(0, 'ceil') %}
        {% set lock_mag_vol = doors_total %}
        {% set corner_vol = doors_total %}
        
      {% elseif data.lock_type == 'mixed' %}
        {% set bbp_mech_vol = (data.mechanical_lock_volume / 3)|round(0, 'ceil') %}
        {% set bbp_mag_vol = (data.magnet_lock_volume / 2)|round(0, 'ceil') %}
        {% set lock_mech_vol = data.mechanical_lock_volume %}
        {% set lock_mag_vol = data.magnet_lock_volume %}
        {% set corner_vol = data.magnet_lock_volume %}
      {%- endif %}
      
      {% set bbp_mech_name = 'Источник вторичного электропитания ББП-50 TS' %}
      {% set bbp_mech_price = data.cena_bbp_50 %}
      {% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}
      
      {% set bbp_mag_name = 'Источник вторичного электропитания ББП-20 TS' %}
      {% set bbp_mag_price = data.cena_bbp_20 %}
      {% set bbp_mag_cost = (bbp_mag_price * bbp_mag_vol) %}
      
      {% set lock_mech_name = 'Защелка электромеханическая Viro 7755.70 с ответной планкой' %}
      {% set lock_mech_price = data.cena_mechanical_lock %}
      {% set lock_mech_cost = (lock_mech_price * lock_mech_vol) %}
      
      {% set lock_mag_name = 'Электромагнитный замок TS-ML300' %}
      {% set lock_mag_price = data.cena_magnetlock %}
      {% set lock_mag_cost = (lock_mag_price * lock_mag_vol) %}
      
      {% set corner_name = 'Монтажный L-образный уголок для крепления электромагнитного замка, TS-LM300' %}
      {% set corner_price = data.cena_montage_corner %}
      {% set corner_cost = (corner_price * corner_vol) %}
      
      {# Button calculation #}
      {% set button_name = 'Сенсорная кнопка выхода TS-MAGIC чёрный' %}
      {% set button_vol = data.oneside_door_volume %}
      {% set button_price = data.cena_button_ordinary %}
      {% set button_cost = (button_price * button_vol) %}
      
      {# Closer calculation #}
      {% set closer_name = 'TANTOS TS-DC085 Freeze серебро - доводчик дверной с усилием EN4 для дверей весом до 100 кг' %}
      {% set closer_vol = doors_total %}
      {% set closer_price = data.cena_closer_tantos_ts_dc085 %}
      {% set closer_cost = (closer_price * closer_vol) %}
      
      {# Battery calculation #}
      {% set battery_name = 'Аккумулятор 12В 7 А•ч (DT 1207)' %}
      {% set battery_vol = (bbp_mech_vol + bbp_mag_vol) %}
      {% set battery_price = data.cena_battery_dt1207 %}
      {% set battery_cost = (battery_price * battery_vol) %}
      
      {# Door Detector calculation #}
      {% set detector_door_name = 'Извещатель охранный магнитоконтактный ИО 102-26 исп.00 «Аякс»' %}
      {% set detector_door_vol = doors_total %}
      {% set detector_door_price = data.cena_detector_door %}
      {% set detector_door_cost = (detector_door_price * detector_door_vol) %}
      
      {# Controller Detector calculation #}
      {% set detector_controller_name = 'Извещатель ИОПР 513/101-3 «Аварийный выход» с крышкой' %}
      {% set detector_controller_vol = (ep_vol + ep_two_vol + ep_four_vol) %}
      {% set detector_controller_price = data.cena_detector_controller %}
      {% set detector_controller_cost = (detector_controller_price * detector_controller_vol) %}
      
      {# Turnstile calculation #}
      {% if data.turnstile_check %}
        {% set turnstile_vol = data.turnstile_volume %}
        {% if data.turnstile_type == 'tripod' %}
          {% set turnstile_name = 'Турникет-трипод PERCo-TTR-07.1G' %}
          {% set turnstile_price = data.cena_turnstile_tripod %}
          
          {% set bbp_mech_vol = (bbp_mech_vol + turnstile_vol) %}
          {% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}
          
          {% set battery_vol = (battery_vol + turnstile_vol) %}
          {% set battery_cost = (battery_price * battery_vol) %}
          
          {% set reader_vol = (reader_vol + turnstile_vol * 2) %}
          {% set reader_cost = (reader_price * reader_vol) %}
        {% elseif data.turnstile_type == 'gate' %}
          {% set turnstile_name = 'Турникет с раздвижными створками PERCo-ST-02.900' %}
          {% set turnstile_price = data.cena_turnstile_gate %}
          
          {% set bbp_gate_name = 'Аккумулятор 12В 12 А∙ч (DT 1212)' %}
          {% set bbp_gate_price = data.cena_battery_dt1212 %}
          {% set bbp_gate_vol = (turnstile_vol * 2) %}
          {% set bbp_gate_cost = (bbp_gate_price * bbp_gate_vol) %}
      
          {% set battery_gate_name = 'Блок питания ИВЭПР 24/5 2x12-Р БР' %}
          {% set battery_gate_price = data.cena_ivepr %}
          {% set battery_gate_vol = turnstile_vol %}
          {% set battery_gate_cost = (battery_gate_price * battery_gate_vol) %}
          
          {% set reader_vol = (reader_vol + turnstile_vol * 2) %}
          {% set reader_cost = (reader_price * reader_vol) %}
        {% endif %}
        {% set turnstile_cost = (turnstile_price * turnstile_vol) %}
      {% endif %}
      
      {% if data.cardcapture_check %}
        {% set cardcapture_name = 'Картоприемник PERCo-IC05' %}
        {% set cardcapture_price = data.cena_cardcapture %}
        {% set cardcapture_vol = turnstile_vol %}
        {% set cardcapture_cost = (cardcapture_price * cardcapture_vol) %}
      {% endif %}
      
      {# Controller calculation #}
      {% if data.door_distance == '30less' -%}
        {% if data.oneside_door_volume > 1 and data.oneside_door_volume <= 4 -%}
          {% set ep_four_vol = 1 %}
        {% elseif data.oneside_door_volume == 1 %}
          {% set ep_two_vol = 1 %}
        {% else %}
          {% set ep_four_vol = (data.oneside_door_volume / 4)|round(0, 'ceil') %}
        {%- endif %}
      
        {% if data.twoside_door_volume == 1 %}
          {% set ep_two_vol = 1 %}
        {% else %}
          {% set ep_vol = (data.twoside_door_volume / 2)|round(0, 'ceil') %}  
        {% endif %}
      
      {% elseif data.door_distance == '30more' %}
        {% set ep_two_vol = doors_total %}
      {%- endif %}
      
      {% set ep_vol = (ep_vol + turnstile_vol) %}
      
      {% set ep_name = 'Сетевой контроллер Castle EP' %}
      {% set ep_price = data.cena_ep %}
      {% set ep_cost = (ep_price * ep_vol) %}
      
      {% set ep_two_name = 'Сетевой контроллер Castle EP2' %}
      {% set ep_two_price = data.cena_ep2 %}
      {% set ep_two_cost = (ep_two_price * ep_two_vol) %}
      
      {% set ep_four_name = 'Сетевой контроллер Castle EP4' %}
      {% set ep_four_price = data.cena_ep4 %}
      {% set ep_four_cost = (ep_four_price * ep_four_vol) %}
      
      {% set controllers_vol = (ep_vol + ep_two_vol + ep_four_vol) %}
      
      {# Master Controller calculation #}
      {% if data.finger_vol > 0 %}
        {% set master_controller_name = 'USB-считыватель настольный BioSmart FS-80' %}
        {% set master_controller_price = data.cena_bio_reader_master %}
      {% else %}
        {% if data.tip_kart == 'Em-Marine' or data.tip_kart == 'HID'%}
          {% set master_controller_name = 'Контрольный считыватель карт форматов EM-Marine и HID настольный «Castle-Reader» с интерфейсом USB' %}
          {% set master_controller_price = data.cena_reader_master_em_marine %}
        {% elseif data.tip_kart == 'Mifare' %}
          {% set master_controller_name = 'Контрольный считыватель «ACR1252U USB NFC Reader III» Mifare' %}
          {% set master_controller_price = data.cena_reader_master_mifare %}
        {% endif %}
      {% endif %}
      
      {% set master_controller_vol = 1 %}
      {% set master_controller_cost = (master_controller_price * master_controller_vol) %}
      
      {# Camera calculation #}
      {% if data.face_vol > 0 %}
        {% set camera_name = 'Видеокамера сетевая (IP) TSi-Pe25VP' %}
        {% set camera_price = data.cena_camera %}
        {% set camera_vol = (r_oneside + r_twoside + turnstile_vol * 2) %}
        {% set camera_cost = (camera_price * camera_vol) %}
      {% endif %}
      
      {# Server Face Ident calculation #}
      {% if camera_vol > 0 %}
        {% if camera_vol <= 4 %}
          {% set server_name = 'Сервер СКУД "AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4"' %}
          {% set server_desc %} 
          <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>
          <ul>
            <li>Процессор: INTEL Core i7</li>
            <li>Оперативная память: 8 Гб</li>
            <li>ОС: Windows 10 IoT LTSB</li>
            <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>
            <li>Тип монтажа: Rackmount 19&quot;, 4U</li>
            <li>Размеры (ШхГхВ): 430x280x67 мм</li>
            <li>Питание: Redundant 1+1, 220V, &gt;300W</li>
          </ul>
          {% endset %}
          {% set server_price = data.cena_server_skud_100_rack %}
          {% else %}
          {% set server_name = 'Сервер "AGRG VideoСервер vS 10 2988-134 2MPx.25fps.16TbR5"' %}
          {% set server_desc %} 
            <p>Сервер СКУД для организации доступа при помощи идентификации лиц, включая ПО:</p>
            <ul>
              <li>Программное обеспечение &quot;Интеллект&quot; - Подключение видеоканала (лицензия на 10 каналов)</li>
              <li>Программное обеспечение - Система защиты Guardant</li>
              <li>Программное обеспечение &quot;Интеллект&quot; - Ядро системы</li>
              <li>Программное обеспечение &quot;Интеллект&quot; - Интеграция СКУД Castle</li>
            </ul>
          {% endset %}
          {% set server_price = data.cena_server_face_10 %}
        {% endif %}
        {% set server_vol = (camera_vol / 10)|round(0, 'ceil') %}
        {% set server_cost = (server_price * server_vol) %}
      {% endif %}
      
      {# Server calculation #}
      {% if data.server_skud %}
        {% if controllers_vol > 0 and controllers_vol <= 20 %}
          {% set server_name = 'Сервер СКУД "AGRG VideoСервер vS SKUD.Castle.1Tb.m0.R1":' %}
          {% set server_desc %} 
          <p>Базовая платформа сервера СКУД для установки в стойку. Устанавливается в стойку (Rackmount 19&quot;, 1U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция). Максимально доступное решение:</p>
          <ul>
            <li>Процессор: INTEL Core i3</li>
            <li>Оперативная память: 4 Гб</li>
            <li>ОС: Windows 10 IoT LTSB</li>
            <li>СХД базы данных: HDD 1Tb NAS</li>
            <li>Тип монтажа: Rackmount 19&quot;, 1U</li>
            <li>Размеры (ШхГхВ): 430x250x44 мм</li>
            <li>Питание: 220V, &gt;300W</li>
          </ul>
          {% endset %}
          {% set server_price = data.cena_server_skud %}
        {% elseif controllers_vol > 20 and controllers_vol <= 50 %}
          {% set server_name = 'Сервер СКУД "AGRG VideoСервер iS SKUD.Castle.1T2.m1.MT"' %}
          {% set server_desc %} 
          <p>Базовая платформа сервера СКУД в корпусе MiniTower (компактное отдельностоящее исполнение). Поставляется с расширенной системой хранения архива событий базы данных. Оптимальное решение для объектов, на которых не используются серверные стойки для сетевого и серверного оборудования:</p>
          <ul>
            <li>Процессор: INTEL Core i3</li>
            <li>Оперативная память: 4 Гб</li>
            <li>ОС: Windows 10 IoT LTSB</li>
            <li>СХД базы данных: HDD 2Tb Enterprise</li>
            <li>Тип монтажа: отдельностоящий настольный</li>
            <li>Размеры (ШхГхВ): 430x280x67 мм</li>
            <li>Питание: 220V, &gt;300W</li>
          </ul>
          {% endset %}
          {% set server_price = data.cena_server_skud_50_mt %}
        {% elseif controllers_vol > 50 %}
          {% set server_name = 'Сервер СКУД "AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4"' %}
          {% set server_desc %} 
          <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>
          <ul>
            <li>Процессор: INTEL Core i7</li>
            <li>Оперативная память: 8 Гб</li>
            <li>ОС: Windows 10 IoT LTSB</li>
            <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>
            <li>Тип монтажа: Rackmount 19&quot;, 4U</li>
            <li>Размеры (ШхГхВ): 430x280x67 мм</li>
            <li>Питание: Redundant 1+1, 220V, &gt;300W</li>
          </ul>
          {% endset %}
          {% set server_price = data.cena_server_skud_100_rack %}
        {% endif %}
        
        {% set server_vol = 1 %}
        {% set server_cost = (server_price * server_vol) %}
      {% endif %}
      
      {# URM calculation #}
      {% if data.urm_skud_check %}
        {% if data.urm_skud_type == 'mt_win' %}
          {% set urm_name = 'Рабочая станция СКУД "AGRG VideoСервер vS URM.SCUD.Castle.m1.MT"' %}
          {% set urm_desc %} 
          <p>Базовая платформа АРМ оператора СКУД в корпусе MiniTower (компактное отдельностоящее исполнение):</p>
          <ul>
            <li>Процессор: INTEL Core i3</li>
            <li>Оперативная память: 4 Гб</li>
            <li>ОС: Windows 10 IoT LTSB</li>
            <li>Тип монтажа: настольный</li>
            <li>Размеры (ШхГхВ): 230x264x112 мм</li>
            <li>Питание: 220V, &gt;160W</li>
          </ul>
          {% endset %}
          {% set urm_price = data.cena_urm_skud %}
        {% elseif data.urm_skud_type == 'vesa_win' %}
          {% set urm_name = 'Рабочая станция СКУД "AGRG VideoСервер vS URM.SCUD.Castle.m1.NUC"' %}
          {% set urm_desc %} 
          <p>Базовая платформа АРМ оператора СКУД в компактном корпусе с креплением VESA (для установки на монитор с аналогичным типом крепления). Компактная и эстетичная модель:</p>
          <ul>
            <li>Процессор: INTEL Core i3</li>
            <li>Оперативная память: 4 Гб</li>
            <li>ОС: Windows 10 IoT LTSB</li>
            <li>Тип монтажа: VESA 100</li>
            <li>Размеры (ШхГхВ): 115х111х48 мм</li>
            <li>Питание: 220V, &gt;65W</li>
          </ul>
          {% endset %}    
          {% set urm_price = data.cena_urm_skud_vesa %}
        {% elseif data.urm_skud_type == 'mt_linux' %}
          {% set urm_name = 'Рабочая станция СКУД "AGRG VideoСервер vS URM.SCUD.Castle.m1.RSPB"' %}
          {% set urm_desc %} 
          <p>Базовая платформа АРМ оператора СКУД на базе ОС Линукс (ультракомпактное отдельностоящее исполнение). Минимальное энергопотребление, отказоустойчивость ОС Линукс, высокая скорость загрузки и выгодная цена для заказчика:</p>
          <ul>
            <li>Процессор: ARM</li>
            <li>Оперативная память: 1 Гб</li>
            <li>ОС: Ubuntu</li>
            <li>Тип монтажа: настольный</li>
            <li>Размеры (ШхГхВ): 100х70х40 мм</li>
            <li>Питание: 220V</li>
          </ul>
          {% endset %}    
          {% set urm_price = data.cena_urm_skud_rspb %}
        {% endif %}
      
      {% set urm_vol = data.urm_skud %}
      {% set urm_cost = (urm_price * urm_vol) %}
      {% endif %}
      
      {# Hardware subtotal #}
      
      {% set total_hard_cost = (card_cost + reader_cost + bbp_mech_cost + bbp_mag_cost + lock_mech_cost + lock_mag_cost + corner_cost + turnstile_cost + cardcapture_cost + camera_cost + ep_cost + ep_two_cost + ep_four_cost + button_cost + closer_cost + battery_cost + detector_door_cost + detector_controller_cost + master_controller_cost + server_cost + urm_cost) %}
      {% set hard_nds = (total_hard_cost * 20 / 120) %}
      {% set total_hard_no_nds = (total_hard_cost - hard_nds) %}
      
      {# Users cost calculation #}
      {% if users_total <= '50' %}
        {% set user_name = 'Базовый модуль ПО Castle, ограничение до 50 карт доступа' %}
        {% set user_vol = 1 %}
        {% set user_price = data.cena_po_castle_50 %}
        {% set user_cost = (user_price * user_vol) %}
        
        {% elseif users_total > '50' and users_total <= '1000' %}
        {% set user_name = 'Базовый модуль ПО Castle, ограничение до 1000 карт доступа' %}
        {% set user_vol = 1 %}
        {% set user_price = data.cena_po_castle_1000 %} 
        {% set user_cost = (user_price * user_vol) %}
      
        {% elseif users_total > '1000' and users_total <= '10000' %}
        {% set user_name = 'Базовый модуль ПО Castle, ограничение до 10 000 карт доступа' %}
        {% set user_vol = 1 %}
        {% set user_price = data.cena_po_castle_10000 %} 
        {% set user_cost = (user_price * user_vol) %}
      
        {% elseif users_total > '10000' and users_total <= '25000' %}
        {% set user_name = 'Базовый модуль ПО Castle, ограничение до 25 000 карт доступа' %}
        {% set user_vol = 1 %}
        {% set user_price = data.cena_po_castle_25000 %} 
        {% set user_cost = (user_price * user_vol) %}
      {% endif %}
      
      {# Extra Modules calculation #}
      {% if data.module_po_castle_time_track %}
      {% set time_track_name = 'Дополнительный модуль ПО Castle «Учет рабочего времени»' %}
      {% set time_track_desc %} 
      <ul>
        <li>Создание рабочих графиков для сотрудников</li>
        <li>Получение отчетов за любой исторический период</li>
        <li>Полный журнал отклонений от рабочего графика</li>
        <li>Журнал неявок, опозданий и других временных нарушений рабочей дисциплины</li>
      </ul>
      {% endset %}
      {% set time_track_vol = 1 %}
      {% set time_track_price = data.cena_module_time_track %}
      {% set time_track_cost = (time_track_price * time_track_vol) %}
      {% endif %}
      
      {% if data.module_po_castle_pass_print %}
      {% set pass_print_name = 'Дополнительный модуль ПО Castle «Создание и печать пропусков»' %}
      {% set pass_print_desc %} 
      <ul>
        <li>Создание и редактирование шаблонов графического оформления пропусков</li>
        <li>Назначение шаблонов пропусков для сотрудников</li>
        <li>Печать пропусков на основании шаблонов и персональных данных сотрудников</li>
      </ul>
      {% endset %}
      {% set pass_print_vol = 1 %}
      {% set pass_print_price = data.cena_module_pass_print %}
      {% set pass_print_cost = (pass_print_price * pass_print_vol) %}
      {% endif %}
      
      {% if data.module_po_castle_event_monitor %}
      {% set event_monitor_name = 'Дополнительный модуль «Мониторинг событий (фотоидентификация)»' %}
      {% set event_monitor_desc %} 
      <ul>
        <li>Наблюдение в режиме реального времени за событиями, происходящими в системе. При запросе прохода сотрудником отображается его учетная карточка из базы, включающая фотографию.</li>
      </ul>
      {% endset %}
      {% set event_monitor_vol = 1 %}
      {% set event_monitor_price = data.cena_module_event_monitor %}
      {% set event_monitor_cost = (event_monitor_price * event_monitor_vol) %}
      {% endif %}
      
      {% if data.module_po_castle_1c_integration %}
      {% set onec_integration_name = 'Дополнительный модуль «Интеграция с 1С»' %}
      {% set onec_integration_desc %} 
      <ul>
        <li>Дополняет функции модуля &laquo;Учет рабочего времени&raquo;</li>
        <li>Автоматическая передача табеля (форма Т-13) в &laquo;1C: Предприятие&raquo;</li>
      </ul>
      {% endset %}
      {% set onec_integration_vol = 1 %}
      {% set onec_integration_price = data.cena_module_1c_integration %}
      {% set onec_integration_cost = (onec_integration_price * onec_integration_vol) %}
      {% endif %}
      
      {% if data.module_po_castle_pass_ext or data.cardcapture_check %}
      {% set pass_ext_name = 'Дополнительный модуль «Расширенная поддержка пропусков посетителей»' %}
      {% set pass_ext_desc %} 
      <ul>
        <li>Интерфейс для выдачи/сбора карт (АРМ &laquo;Бюро пропусков&raquo;), при выдаче происходит привязка карты к паспорту или другому документу посетителя</li>
        <li>Хранение истории выдачи карт</li>
        <li>Задание списка карт посетителей</li>
      </ul>
      {% endset %}
      {% set pass_ext_vol = 1 %}
      {% set pass_ext_price = data.cena_module_pass_ext %}
      {% set pass_ext_cost = (pass_ext_price * pass_ext_vol) %}
      {% endif %}
      
      {% if data.module_po_castle_event_response %}
      {% set event_response_name = 'Дополнительный модуль «Реакция на события»' %}
      {% set event_response_desc %} 
      <ul>
        <li>Задание списка действий, которые будут выполняться системой автоматически при наступлении каких-либо событий. Например, возможна отправка SMS-сообщения на указанный телефонный номер.</li>
      </ul>
      {% endset %}
      {% set event_response_vol = 1 %}
      {% set event_response_price = data.cena_module_event_response %}
      {% set event_response_cost = (event_response_price * event_response_vol) %}
      {% endif %}
      
      {% if data.module_po_castle_data_sync %}
      {% set data_sync_name = 'Дополнительный модуль «Синхронизация данных»' %}
      {% set data_sync_desc %} 
      <ul>
        <li>Автоматическая синхронизация списка сотрудников в СКУД по внешней базе данных существующей корпоративной системы.</li>
      </ul>
      {% endset %}
      {% set data_sync_vol = 1 %}
      {% set data_sync_price = data.cena_module_data_sync %}
      {% set data_sync_cost = (data_sync_price * data_sync_vol) %}
      {% endif %}
      
      {% if data.module_po_castle_doc_ocr %}
      {% set doc_ocr_name = 'Дополнительный модуль «Распознавание документов»' %}
      {% set doc_ocr_desc %} 
      <ul>
        <li>Автоматическое сканирование и распознавание документов при выдаче временного пропуска посетителю.</li>
      </ul>
      {% endset %}
      {% set doc_ocr_vol = 1 %}
      {% set doc_ocr_price = data.cena_module_doc_ocr %}
      {% set doc_ocr_cost = (doc_ocr_price * doc_ocr_vol) %}
      {% endif %}
      
      {# Face Ident per camera calculation #}
      {% if camera_vol > 0 %}
      {% set face_ident_camera_name = 'Модуль «Идентификация лица» (лицензия на одну камеру)' %}
      {% set face_ident_camera_price = data.cena_module_face_ident_camera %}
      {% set face_ident_camera_vol = camera_vol %}
      {% set face_ident_camera_cost = (face_ident_camera_price * face_ident_camera_vol) %}
      {% endif %}
      
      {# Face ident calculation #}
      {% if data.face_vol > 0 and data.face_vol <= 10 %}
      {% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 10 лиц)' %}
      {% set face_ident_price = data.cena_module_face_ident_10 %}
      
      {% elseif data.face_vol > 10 and data.face_vol <= 50 %}
      {% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 50 лиц)' %}
      {% set face_ident_price = data.cena_module_face_ident_50 %}
      
      {% elseif data.face_vol > 50 and data.face_vol <= 100 %}
      {% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 100 лиц)' %}
      {% set face_ident_price = data.cena_module_face_ident_100 %}
      
      {% elseif data.face_vol > 100 and data.face_vol <= 1000 %}
      {% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 1000 лиц)' %}
      {% set face_ident_price = data.cena_module_face_ident_1000 %}
      {% endif %}
      
      {% set face_ident_desc %}
      <ul>
        <li>Обязательный модуль, если выбрана опция идентификации лиц.</li>
      </ul>
      {% endset %}
      {% set face_ident_vol = 1 %}
      {% set face_ident_cost = (face_ident_price * face_ident_vol) %}
      
      {# Soft Subtotal #}
      {% set total_soft_cost = (user_cost + time_track_cost + pass_print_cost + event_monitor_cost + onec_integration_cost + pass_ext_cost + event_response_cost + data_sync_cost + doc_ocr_cost + face_ident_camera_cost + face_ident_cost) %}
      
      {# Grand Total #}
      {% set total = (total_hard_cost + total_soft_cost) %}
      
      {# Total cost calculation #}
      {% if doors_total == 0 and users_total == 0 and turnstile_vol == 0 %}
        0 ₽
      {% else %}
        {{total|number_format(0, '.', ' ')}} ₽
      {% endif %}
      
      {# Debug
      <br/>
      <p style="font-size:10px; line-height: 10px">
      card_cost {{card_cost}} <br/> reader_cost {{reader_cost}} <br/> bbp_gate_cost {{bbp_gate_cost}} <br/> battery_gate_cost {{battery_gate_cost}} <br/> bbp_mech_cost {{bbp_mech_cost}} <br/> bbp_mag_cost {{bbp_mag_cost}} <br/> lock_mech_cost {{lock_mech_cost}} <br/> lock_mag_cost {{lock_mag_cost}} <br/> corner_cost {{corner_cost}} <br/> turnstile_cost {{turnstile_cost}} <br/> cardcapture_cost {{cardcapture_cost}} <br/> camera_cost {{camera_cost}} <br/> ep_cost {{ep_cost}} <br/> ep_two_cost {{ep_two_cost}} <br/> ep_four_cost {{ep_four_cost}} <br/> button_cost {{button_cost}} <br/> closer_cost {{closer_cost}} <br/> battery_cost {{battery_cost}} <br/> detector_door_cost {{detector_door_cost}} <br/> detector_controller_cost {{detector_controller_cost}} <br/> master_controller_cost {{master_controller_cost}} <br/> server_cost {{server_cost}} <br/> server_vol {{server_vol}} <br/> urm_cost {{urm_cost}}
      <p>
        #}
      
    '#whitespace': spaceless
    '#ajax': true
  pdf:
    '#type': 'webform_entity_print_attachment:pdf'
    '#title': PDF
    '#title_display': invisible
    '#filename': agrg_kp.pdf
    '#view_mode': table
  actions:
    '#type': webform_actions
    '#title': 'Submit button(s)'
    '#submit__label': 'Получить предложение'
css: ''
javascript: ''
settings:
  ajax: true
  ajax_scroll_top: ''
  ajax_progress_type: throbber
  ajax_effect: fade
  ajax_speed: 200
  page: false
  page_submit_path: ''
  page_confirm_path: ''
  page_theme_name: ''
  form_title: source_entity_webform
  form_submit_once: false
  form_open_message: ''
  form_close_message: ''
  form_exception_message: ''
  form_previous_submissions: true
  form_confidential: false
  form_confidential_message: ''
  form_disable_remote_addr: false
  form_convert_anonymous: false
  form_prepopulate: true
  form_prepopulate_source_entity: false
  form_prepopulate_source_entity_required: false
  form_prepopulate_source_entity_type: ''
  form_unsaved: false
  form_disable_back: false
  form_submit_back: false
  form_disable_autocomplete: false
  form_novalidate: false
  form_disable_inline_errors: false
  form_required: false
  form_autofocus: false
  form_details_toggle: false
  form_reset: false
  form_access_denied: default
  form_access_denied_title: ''
  form_access_denied_message: ''
  form_access_denied_attributes: {  }
  form_file_limit: ''
  form_attributes: {  }
  form_method: ''
  form_action: ''
  share: false
  share_node: false
  share_theme_name: ''
  share_title: true
  share_page_body_attributes: {  }
  submission_label: 'Коммерческое предложение №[webform_submission:serial] от [webform_submission:completed:custom:d F Y]'
  submission_exception_message: ''
  submission_locked_message: ''
  submission_log: false
  submission_excluded_elements:
    cena_karty_em_marine: cena_karty_em_marine
    cena_karty_hid: cena_karty_hid
    cena_karty_mifare: cena_karty_mifare
    cena_po_castle_50: cena_po_castle_50
    cena_po_castle_1000: cena_po_castle_1000
    cena_po_castle_10000: cena_po_castle_10000
    cena_po_castle_25000: cena_po_castle_25000
    cena_reader_em_marine_ordinary: cena_reader_em_marine_ordinary
    cena_reader_hid_ordinary: cena_reader_hid_ordinary
    cena_reader_mifare_ordinary: cena_reader_mifare_ordinary
    cena_bio_reader_em_marine: cena_bio_reader_em_marine
    cena_bio_reader_hid: cena_bio_reader_hid
    cena_bio_reader_mifare: cena_bio_reader_mifare
    cena_reader_em_marine_premium: cena_reader_em_marine_premium
    cena_reader_hid_premium: cena_reader_hid_premium
    cena_reader_mifare_premium: cena_reader_mifare_premium
    cena_reader_eywa_classics: cena_reader_eywa_classics
    cena_reader_eywa_art: cena_reader_eywa_art
    cena_ep: cena_ep
    cena_ep2: cena_ep2
    cena_ep4: cena_ep4
    cena_mechanical_lock: cena_mechanical_lock
    cena_magnetlock: cena_magnetlock
    cena_bbp_20: cena_bbp_20
    cena_bbp_50: cena_bbp_50
    cena_ivepr: cena_ivepr
    cena_battery_dt1207: cena_battery_dt1207
    cena_battery_dt1212: cena_battery_dt1212
    cena_button_ordinary: cena_button_ordinary
    cena_montage_corner: cena_montage_corner
    cena_closer_tantos_ts_dc085: cena_closer_tantos_ts_dc085
    cena_detector_door: cena_detector_door
    cena_detector_controller: cena_detector_controller
    cena_reader_master_em_marine: cena_reader_master_em_marine
    cena_reader_master_mifare: cena_reader_master_mifare
    cena_bio_reader_master: cena_bio_reader_master
    cena_camera: cena_camera
    cena_server_skud: cena_server_skud
    cena_server_face_10: cena_server_face_10
    cena_server_skud_50_rack: cena_server_skud_50_rack
    cena_server_skud_100_rack: cena_server_skud_100_rack
    cena_server_skud_50_mt: cena_server_skud_50_mt
    cena_urm_skud: cena_urm_skud
    cena_urm_skud_vesa: cena_urm_skud_vesa
    cena_urm_skud_rspb: cena_urm_skud_rspb
    cena_turnstile_tripod: cena_turnstile_tripod
    cena_turnstile_gate: cena_turnstile_gate
    cena_cardcapture: cena_cardcapture
    cena_module_time_track: cena_module_time_track
    cena_module_pass_print: cena_module_pass_print
    cena_module_event_monitor: cena_module_event_monitor
    cena_module_1c_integration: cena_module_1c_integration
    cena_module_pass_ext: cena_module_pass_ext
    cena_module_event_response: cena_module_event_response
    cena_module_data_sync: cena_module_data_sync
    cena_module_doc_ocr: cena_module_doc_ocr
    cena_module_face_recog: cena_module_face_recog
    cena_module_face_ident_10: cena_module_face_ident_10
    cena_module_face_ident_50: cena_module_face_ident_50
    cena_module_face_ident_100: cena_module_face_ident_100
    cena_module_face_ident_1000: cena_module_face_ident_1000
    cena_module_face_ident_camera: cena_module_face_ident_camera
    random: random
  submission_exclude_empty: true
  submission_exclude_empty_checkbox: true
  submission_views: {  }
  submission_views_replace: {  }
  submission_user_columns: {  }
  submission_user_duplicate: false
  submission_access_denied: default
  submission_access_denied_title: ''
  submission_access_denied_message: ''
  submission_access_denied_attributes: {  }
  previous_submission_message: ''
  previous_submissions_message: ''
  autofill: false
  autofill_message: ''
  autofill_excluded_elements: {  }
  wizard_progress_bar: true
  wizard_progress_pages: false
  wizard_progress_percentage: false
  wizard_progress_link: false
  wizard_progress_states: false
  wizard_start_label: ''
  wizard_preview_link: false
  wizard_confirmation: true
  wizard_confirmation_label: ''
  wizard_auto_forward: true
  wizard_auto_forward_hide_next_button: false
  wizard_keyboard: true
  wizard_track: ''
  wizard_prev_button_label: ''
  wizard_next_button_label: ''
  wizard_toggle: true
  wizard_toggle_show_label: ''
  wizard_toggle_hide_label: ''
  wizard_page_type: container
  wizard_page_title_tag: h2
  preview: 0
  preview_label: ''
  preview_title: ''
  preview_message: ''
  preview_attributes: {  }
  preview_excluded_elements: {  }
  preview_exclude_empty: true
  preview_exclude_empty_checkbox: false
  draft: none
  draft_multiple: false
  draft_auto_save: false
  draft_saved_message: ''
  draft_loaded_message: ''
  draft_pending_single_message: ''
  draft_pending_multiple_message: ''
  confirmation_type: page
  confirmation_url: confirm
  confirmation_title: 'Ваше сообщение отправлено!'
  confirmation_message: '<p>На указанный Вами email-адрес отправлено коммерческое предложение.&nbsp;Если у Вас возникли вопросы, изложите их в ответном письме.&nbsp;Если письмо не пришло, проверьте папку нежелательных сообщений.</p>'
  confirmation_attributes: {  }
  confirmation_back: true
  confirmation_back_label: 'Вернуться к форме'
  confirmation_back_attributes:
    class:
      - btn
    style: 'background: #4ace92;color: #fff;'
  confirmation_exclude_query: false
  confirmation_exclude_token: false
  confirmation_update: false
  limit_total: null
  limit_total_interval: null
  limit_total_message: ''
  limit_total_unique: false
  limit_user: null
  limit_user_interval: null
  limit_user_message: ''
  limit_user_unique: false
  entity_limit_total: null
  entity_limit_total_interval: null
  entity_limit_user: null
  entity_limit_user_interval: null
  purge: none
  purge_days: null
  results_disabled: false
  results_disabled_ignore: false
  results_customize: false
  token_view: false
  token_update: false
  token_delete: false
  serial_disabled: false
access:
  create:
    roles:
      - anonymous
      - authenticated
    users: {  }
    permissions: {  }
  view_any:
    roles: {  }
    users: {  }
    permissions: {  }
  update_any:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_any:
    roles: {  }
    users: {  }
    permissions: {  }
  purge_any:
    roles: {  }
    users: {  }
    permissions: {  }
  view_own:
    roles: {  }
    users: {  }
    permissions: {  }
  update_own:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_own:
    roles: {  }
    users: {  }
    permissions: {  }
  administer:
    roles: {  }
    users: {  }
    permissions: {  }
  test:
    roles: {  }
    users: {  }
    permissions: {  }
  configuration:
    roles: {  }
    users: {  }
    permissions: {  }
handlers:
  email:
    id: email
    handler_id: email
    label: 'Подтверждение по email'
    notes: ''
    status: true
    conditions: {  }
    weight: 0
    settings:
      states:
        - completed
      to_mail: '[webform_submission:values:email:raw]'
      to_options: {  }
      bcc_mail: ''
      bcc_options: {  }
      cc_mail: ''
      cc_options: {  }
      from_mail: _default
      from_options: {  }
      from_name: _default
      reply_to: ''
      return_path: ''
      sender_mail: ''
      sender_name: ''
      subject: 'Ваш расчет на калькуляторе СКУД. Коммерческое предложение №[webform_submission:serial] от [webform_submission:completed:custom:d F Y]'
      body: "{% set doors_total = (data.oneside_door_volume + data.twoside_door_volume) %}\r\n{% set r_oneside = data.oneside_door_volume %}\r\n{% set r_twoside = (data.twoside_door_volume * 2) %}\r\n{% set users_total = (data.kolichestvo_kart + data.finger_vol + data.face_vol) %}\r\n\r\n{# Card / Reader calculation #}\r\n{% if data.tip_kart == 'Em-Marine' -%}\r\n  {% set card_name = 'Карта EM-Marine, бесконтактный идентификатор (толстая), TS' %}\r\n  {% set card_price = data.cena_karty_em_marine %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-EM' %}\r\n    {% set reader_price = data.cena_bio_reader_em_marine %}\r\n  {% else %}\r\n    {% set reader_name = 'Считыватель TS-RDR-E White EM-Marine' %}\r\n    {% set reader_price = data.cena_reader_em_marine_ordinary %}\r\n  {% endif %}\r\n\r\n{% elseif data.tip_kart == 'HID' %}\r\n  {% set card_name = 'Карта HID, бесконтактный идентификатор iC2002' %}\r\n  {% set card_price = data.cena_karty_hid %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель BioSmart 4-O-HD-N-L' %}\r\n    {% set reader_price = data.cena_bio_reader_hid %}\r\n  {% else %}\r\n    {% set reader_name = 'Считыватель TS-RDR-EHV-2 Metal HID' %}\r\n    {% set reader_price = data.cena_reader_hid_ordinary %}\r\n  {% endif %}\r\n\r\n{% elseif data.tip_kart == 'Mifare' %}\r\n  {% set card_name = 'Карта Mifare, бесконтактный идентификатор Smart-карта TS толстая (13,56МГц 1K)' %}\r\n  {% set card_price = data.cena_karty_mifare %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-MF' %}\r\n    {% set reader_price = data.cena_bio_reader_mifare %}\r\n  {% else %} \r\n    {% set reader_name = 'Считыватель TS-RDR-MF Metal Mifare' %}\r\n    {% set reader_price = data.cena_reader_mifare_ordinary %}\r\n  {% endif %}\r\n{%- endif %}\r\n\r\n  {# Reader style calculation #}\r\n  {% if data.readers_style == 'ordinary' or data.readers_style is empty -%}\r\n  {% elseif data.readers_style == 'eywa_classics' %}\r\n    {% set reader_name = 'Считыватель AGRG-CLS-B-ABL1-MF/EM-NONE-NO-LOGO' %}\r\n    {% set reader_price = data.cena_reader_eywa_classics %}\r\n  {% elseif data.readers_style == 'eywa_art' %}\r\n    {% set reader_name = 'Считыватель AGRG-ART-C-R-ABL1-MF/EM-BLU-NO-LOGO' %}\r\n    {% set reader_price = data.cena_reader_eywa_art %}\r\n  {%- endif %}  \r\n\r\n{% set card_vol = data.kolichestvo_kart %}\r\n{% set card_cost = (card_price * card_vol) %}\r\n\r\n{% set reader_vol = (r_oneside + r_twoside) %}\r\n{% set reader_cost = (reader_price * reader_vol) %}\r\n\r\n{# BBP / Lock calculation #}\r\n{% if data.lock_type == 'mechanical' -%}\r\n  {% set bbp_mech_vol = (doors_total / 3)|round(0, 'ceil') %}\r\n  {% set lock_mech_vol = doors_total %}\r\n\r\n{% elseif data.lock_type == 'magnet' %}\r\n  {% set bbp_mag_vol = (doors_total / 2)|round(0, 'ceil') %}\r\n  {% set lock_mag_vol = doors_total %}\r\n  {% set corner_vol = doors_total %}\r\n  \r\n{% elseif data.lock_type == 'mixed' %}\r\n  {% set bbp_mech_vol = (data.mechanical_lock_volume / 3)|round(0, 'ceil') %}\r\n  {% set bbp_mag_vol = (data.magnet_lock_volume / 2)|round(0, 'ceil') %}\r\n  {% set lock_mech_vol = data.mechanical_lock_volume %}\r\n  {% set lock_mag_vol = data.magnet_lock_volume %}\r\n  {% set corner_vol = data.magnet_lock_volume %}\r\n{%- endif %}\r\n\r\n{% set bbp_mech_name = 'Источник вторичного электропитания ББП-50 TS' %}\r\n{% set bbp_mech_price = data.cena_bbp_50 %}\r\n{% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\r\n\r\n{% set bbp_mag_name = 'Источник вторичного электропитания ББП-20 TS' %}\r\n{% set bbp_mag_price = data.cena_bbp_20 %}\r\n{% set bbp_mag_cost = (bbp_mag_price * bbp_mag_vol) %}\r\n\r\n{% set lock_mech_name = 'Защелка электромеханическая Viro 7755.70' %}\r\n{% set lock_mech_price = data.cena_mechanical_lock %}\r\n{% set lock_mech_cost = (lock_mech_price * lock_mech_vol) %}\r\n\r\n{% set lock_mag_name = 'Электромагнитный замок TS-ML300' %}\r\n{% set lock_mag_price = data.cena_magnetlock %}\r\n{% set lock_mag_cost = (lock_mag_price * lock_mag_vol) %}\r\n\r\n{% set corner_name = 'Монтажный L-образный уголок для крепления электромагнитного замка, TS-LM300' %}\r\n{% set corner_price = data.cena_montage_corner %}\r\n{% set corner_cost = (corner_price * corner_vol) %}\r\n\r\n{# Button calculation #}\r\n{% set button_name = 'Сенсорная кнопка выхода TS-MAGIC чёрный' %}\r\n{% set button_vol = data.oneside_door_volume %}\r\n{% set button_price = data.cena_button_ordinary %}\r\n{% set button_cost = (button_price * button_vol) %}\r\n\r\n{# Closer calculation #}\r\n{% set closer_name = 'TANTOS TS-DC085 Freeze серебро - доводчик дверной с усилием EN4 для дверей весом до 100 кг' %}\r\n{% set closer_vol = doors_total %}\r\n{% set closer_price = data.cena_closer_tantos_ts_dc085 %}\r\n{% set closer_cost = (closer_price * closer_vol) %}\r\n\r\n{# Battery calculation #}\r\n{% set battery_name = 'Аккумулятор 12В 7 А•ч (DT 1207)' %}\r\n{% set battery_vol = (bbp_mech_vol + bbp_mag_vol) %}\r\n{% set battery_price = data.cena_battery_dt1207 %}\r\n{% set battery_cost = (battery_price * battery_vol) %}\r\n\r\n{# Door Detector calculation #}\r\n{% set detector_door_name = 'Извещатель охранный магнитоконтактный ИО 102-26 исп.00 «Аякс»' %}\r\n{% set detector_door_vol = doors_total %}\r\n{% set detector_door_price = data.cena_detector_door %}\r\n{% set detector_door_cost = (detector_door_price * detector_door_vol) %}\r\n\r\n{# Controller Detector calculation #}\r\n{% set detector_controller_name = 'Извещатель ИОПР 513/101-3 «Аварийный выход» с крышкой' %}\r\n{% set detector_controller_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\r\n{% set detector_controller_price = data.cena_detector_controller %}\r\n{% set detector_controller_cost = (detector_controller_price * detector_controller_vol) %}\r\n\r\n{# Turnstile calculation #}\r\n{% if data.turnstile_check %}\r\n  {% set turnstile_vol = data.turnstile_volume %}\r\n  {% if data.turnstile_type == 'tripod' %}\r\n    {% set turnstile_name = 'Турникет-трипод PERCo-TTR-07.1G' %}\r\n    {% set turnstile_price = data.cena_turnstile_tripod %}\r\n    \r\n    {% set bbp_mech_vol = (bbp_mech_vol + turnstile_vol) %}\r\n    {% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\r\n    \r\n    {% set battery_vol = (battery_vol + turnstile_vol) %}\r\n    {% set battery_cost = (battery_price * battery_vol) %}\r\n    \r\n    {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\r\n    {% set reader_cost = (reader_price * reader_vol) %}\r\n  {% elseif data.turnstile_type == 'gate' %}\r\n    {% set turnstile_name = 'Турникет с раздвижными створками PERCo-ST-02.900' %}\r\n    {% set turnstile_price = data.cena_turnstile_gate %}\r\n    \r\n    {% set bbp_gate_name = 'Аккумулятор 12В 12 А∙ч (DT 1212)' %}\r\n    {% set bbp_gate_price = data.cena_battery_dt1212 %}\r\n    {% set bbp_gate_vol = (turnstile_vol * 2) %}\r\n    {% set bbp_gate_cost = (bbp_gate_price * bbp_gate_vol) %}\r\n\r\n    {% set battery_gate_name = 'Блок питания ИВЭПР 24/5 2x12-Р БР' %}\r\n    {% set battery_gate_price = data.cena_ivepr %}\r\n    {% set battery_gate_vol = turnstile_vol %}\r\n    {% set battery_gate_cost = (battery_gate_price * battery_gate_vol) %}\r\n    \r\n    {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\r\n    {% set reader_cost = (reader_price * reader_vol) %}\r\n  {% endif %}\r\n  {% set turnstile_cost = (turnstile_price * turnstile_vol) %}\r\n{% endif %}\r\n\r\n{% if data.cardcapture_check %}\r\n  {% set cardcapture_name = 'Картоприемник PERCo-IC05' %}\r\n  {% set cardcapture_price = data.cena_cardcapture %}\r\n  {% set cardcapture_vol = turnstile_vol %}\r\n  {% set cardcapture_cost = (cardcapture_price * cardcapture_vol) %}\r\n{% endif %}\r\n\r\n{# Controller calculation #}\r\n{% if data.door_distance == '30less' -%}\r\n  {% if data.oneside_door_volume > 1 and data.oneside_door_volume <= 4 -%}\r\n    {% set ep_four_vol = 1 %}\r\n  {% elseif data.oneside_door_volume == 1 %}\r\n    {% set ep_two_vol = 1 %}\r\n  {% else %}\r\n    {% set ep_four_vol = (data.oneside_door_volume / 4)|round(0, 'ceil') %}\r\n  {%- endif %}\r\n\r\n  {% if data.twoside_door_volume == 1 %}\r\n    {% set ep_two_vol = 1 %}\r\n  {% else %}\r\n    {% set ep_vol = (data.twoside_door_volume / 2)|round(0, 'ceil') %}  \r\n  {% endif %}\r\n\r\n{% elseif data.door_distance == '30more' %}\r\n  {% set ep_two_vol = doors_total %}\r\n{%- endif %}\r\n\r\n{% set ep_vol = (ep_vol + turnstile_vol) %}\r\n\r\n{% set ep_name = 'Сетевой контроллер Castle EP' %}\r\n{% set ep_price = data.cena_ep %}\r\n{% set ep_cost = (ep_price * ep_vol) %}\r\n\r\n{% set ep_two_name = 'Сетевой контроллер Castle EP2' %}\r\n{% set ep_two_price = data.cena_ep2 %}\r\n{% set ep_two_cost = (ep_two_price * ep_two_vol) %}\r\n\r\n{% set ep_four_name = 'Сетевой контроллер Castle EP4' %}\r\n{% set ep_four_price = data.cena_ep4 %}\r\n{% set ep_four_cost = (ep_four_price * ep_four_vol) %}\r\n\r\n{% set controllers_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\r\n\r\n{# Master Controller calculation #}\r\n{% if data.finger_vol > 0 %}\r\n  {% set master_controller_name = 'USB-считыватель настольный BioSmart FS-80' %}\r\n  {% set master_controller_price = data.cena_bio_reader_master %}\r\n{% else %}\r\n  {% if data.tip_kart == 'Em-Marine' or data.tip_kart == 'HID'%}\r\n    {% set master_controller_name = 'Контрольный считыватель карт форматов EM-Marine и HID настольный «Castle-Reader» с интерфейсом USB' %}\r\n    {% set master_controller_price = data.cena_reader_master_em_marine %}\r\n  {% elseif data.tip_kart == 'Mifare' %}\r\n    {% set master_controller_name = 'Контрольный считыватель «ACR1252U USB NFC Reader III» Mifare' %}\r\n    {% set master_controller_price = data.cena_reader_master_mifare %}\r\n  {% endif %}\r\n{% endif %}\r\n\r\n{% set master_controller_vol = 1 %}\r\n{% set master_controller_cost = (master_controller_price * master_controller_vol) %}\r\n\r\n{# Camera calculation #}\r\n{% if data.face_vol > 0 %}\r\n  {% set camera_name = 'Видеокамера сетевая (IP) TSi-Pe25VP' %}\r\n  {% set camera_price = data.cena_camera %}\r\n  {% set camera_vol = (r_oneside + r_twoside + turnstile_vol * 2) %}\r\n  {% set camera_cost = (camera_price * camera_vol) %}\r\n{% endif %}\r\n\r\n{# Server Face Ident calculation #}\r\n{% if camera_vol > 0 %}\r\n  {% if camera_vol <= 4 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\r\n    {% set server_desc %} \r\n    <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i7</li>\r\n      <li>Оперативная память: 8 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_100_rack %}\r\n    {% else %}\r\n    {% set server_name = 'Сервер \"AGRG VideoСервер vS 10 2988-134 2MPx.25fps.16TbR5\"' %}\r\n    {% set server_desc %} \r\n      <p>Сервер СКУД для организации доступа при помощи идентификации лиц, включая ПО:</p>\r\n      <ul>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Подключение видеоканала (лицензия на 10 каналов)</li>\r\n        <li>Программное обеспечение - Система защиты Guardant</li>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Ядро системы</li>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Интеграция СКУД Castle</li>\r\n      </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_face_10 %}\r\n  {% endif %}\r\n  {% set server_vol = (camera_vol / 10)|round(0, 'ceil') %}\r\n  {% set server_cost = (server_price * server_vol) %}\r\n{% endif %}\r\n\r\n{# Server calculation #}\r\n{% if data.server_skud %}\r\n  {% if controllers_vol > 0 and controllers_vol <= 20 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер vS SKUD.Castle.1Tb.m0.R1\":' %}\r\n    {% set server_desc %} \r\n    <p>Базовая платформа сервера СКУД для установки в стойку. Устанавливается в стойку (Rackmount 19&quot;, 1U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция). Максимально доступное решение:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: HDD 1Tb NAS</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 1U</li>\r\n      <li>Размеры (ШхГхВ): 430x250x44 мм</li>\r\n      <li>Питание: 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud %}\r\n  {% elseif controllers_vol > 20 and controllers_vol <= 50 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1T2.m1.MT\"' %}\r\n    {% set server_desc %} \r\n    <p>Базовая платформа сервера СКУД в корпусе MiniTower (компактное отдельностоящее исполнение). Поставляется с расширенной системой хранения архива событий базы данных. Оптимальное решение для объектов, на которых не используются серверные стойки для сетевого и серверного оборудования:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: HDD 2Tb Enterprise</li>\r\n      <li>Тип монтажа: отдельностоящий настольный</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_50_mt %}\r\n  {% elseif controllers_vol > 50 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\r\n    {% set server_desc %} \r\n    <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i7</li>\r\n      <li>Оперативная память: 8 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_100_rack %}\r\n  {% endif %}\r\n  \r\n  {% set server_vol = 1 %}\r\n  {% set server_cost = (server_price * server_vol) %}\r\n{% endif %}\r\n\r\n{# URM calculation #}\r\n{% if data.urm_skud_check %}\r\n  {% if data.urm_skud_type == 'mt_win' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.MT\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД в корпусе MiniTower (компактное отдельностоящее исполнение):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>Тип монтажа: настольный</li>\r\n      <li>Размеры (ШхГхВ): 230x264x112 мм</li>\r\n      <li>Питание: 220V, &gt;160W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set urm_price = data.cena_urm_skud %}\r\n  {% elseif data.urm_skud_type == 'vesa_win' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.NUC\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД в компактном корпусе с креплением VESA (для установки на монитор с аналогичным типом крепления). Компактная и эстетичная модель:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>Тип монтажа: VESA 100</li>\r\n      <li>Размеры (ШхГхВ): 115х111х48 мм</li>\r\n      <li>Питание: 220V, &gt;65W</li>\r\n    </ul>\r\n    {% endset %}    \r\n    {% set urm_price = data.cena_urm_skud_vesa %}\r\n  {% elseif data.urm_skud_type == 'mt_linux' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.RSPB\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД на базе ОС Линукс (ультракомпактное отдельностоящее исполнение). Минимальное энергопотребление, отказоустойчивость ОС Линукс, высокая скорость загрузки и выгодная цена для заказчика:</p>\r\n    <ul>\r\n      <li>Процессор: ARM</li>\r\n      <li>Оперативная память: 1 Гб</li>\r\n      <li>ОС: Ubuntu</li>\r\n      <li>Тип монтажа: настольный</li>\r\n      <li>Размеры (ШхГхВ): 100х70х40 мм</li>\r\n      <li>Питание: 220V</li>\r\n    </ul>\r\n    {% endset %}    \r\n    {% set urm_price = data.cena_urm_skud_rspb %}\r\n  {% endif %}\r\n\r\n{% set urm_vol = data.urm_skud %}\r\n{% set urm_cost = (urm_price * urm_vol) %}\r\n{% endif %}\r\n\r\n{# Hardware subtotal #}\r\n\r\n{% set total_hard_cost = (card_cost + reader_cost + bbp_mech_cost + bbp_mag_cost + lock_mech_cost + lock_mag_cost + corner_cost + turnstile_cost + cardcapture_cost + camera_cost + ep_cost + ep_two_cost + ep_four_cost + button_cost + closer_cost + battery_cost + detector_door_cost + detector_controller_cost + master_controller_cost + server_cost + urm_cost) %}\r\n{% set hard_nds = (total_hard_cost * 20 / 120) %}\r\n{% set total_hard_no_nds = (total_hard_cost - hard_nds) %}\r\n\r\n{# Users cost calculation #}\r\n{% if users_total <= '50' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 50 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_50 %}\r\n  {% set user_cost = (user_price * user_vol) %}\r\n  \r\n  {% elseif users_total > '50' and users_total <= '1000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 1000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_1000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n\r\n  {% elseif users_total > '1000' and users_total <= '10000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 10 000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_10000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n\r\n  {% elseif users_total > '10000' and users_total <= '25000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 25 000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_25000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n{% endif %}\r\n\r\n{# Extra Modules calculation #}\r\n{% if data.module_po_castle_time_track %}\r\n{% set time_track_name = 'Дополнительный модуль ПО Castle «Учет рабочего времени»' %}\r\n{% set time_track_desc %} \r\n<ul>\r\n  <li>Создание рабочих графиков для сотрудников</li>\r\n  <li>Получение отчетов за любой исторический период</li>\r\n  <li>Полный журнал отклонений от рабочего графика</li>\r\n  <li>Журнал неявок, опозданий и других временных нарушений рабочей дисциплины</li>\r\n</ul>\r\n{% endset %}\r\n{% set time_track_vol = 1 %}\r\n{% set time_track_price = data.cena_module_time_track %}\r\n{% set time_track_cost = (time_track_price * time_track_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_pass_print %}\r\n{% set pass_print_name = 'Дополнительный модуль ПО Castle «Создание и печать пропусков»' %}\r\n{% set pass_print_desc %} \r\n<ul>\r\n  <li>Создание и редактирование шаблонов графического оформления пропусков</li>\r\n  <li>Назначение шаблонов пропусков для сотрудников</li>\r\n  <li>Печать пропусков на основании шаблонов и персональных данных сотрудников</li>\r\n</ul>\r\n{% endset %}\r\n{% set pass_print_vol = 1 %}\r\n{% set pass_print_price = data.cena_module_pass_print %}\r\n{% set pass_print_cost = (pass_print_price * pass_print_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_event_monitor %}\r\n{% set event_monitor_name = 'Дополнительный модуль «Мониторинг событий (фотоидентификация)»' %}\r\n{% set event_monitor_desc %} \r\n<ul>\r\n  <li>Наблюдение в режиме реального времени за событиями, происходящими в системе. При запросе прохода сотрудником отображается его учетная карточка из базы, включающая фотографию.</li>\r\n</ul>\r\n{% endset %}\r\n{% set event_monitor_vol = 1 %}\r\n{% set event_monitor_price = data.cena_module_event_monitor %}\r\n{% set event_monitor_cost = (event_monitor_price * event_monitor_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_1c_integration %}\r\n{% set onec_integration_name = 'Дополнительный модуль «Интеграция с 1С»' %}\r\n{% set onec_integration_desc %} \r\n<ul>\r\n  <li>Дополняет функции модуля &laquo;Учет рабочего времени&raquo;</li>\r\n  <li>Автоматическая передача табеля (форма Т-13) в &laquo;1C: Предприятие&raquo;</li>\r\n</ul>\r\n{% endset %}\r\n{% set onec_integration_vol = 1 %}\r\n{% set onec_integration_price = data.cena_module_1c_integration %}\r\n{% set onec_integration_cost = (onec_integration_price * onec_integration_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_pass_ext or data.cardcapture_check %}\r\n{% set pass_ext_name = 'Дополнительный модуль «Расширенная поддержка пропусков посетителей»' %}\r\n{% set pass_ext_desc %} \r\n<ul>\r\n  <li>Интерфейс для выдачи/сбора карт (АРМ &laquo;Бюро пропусков&raquo;), при выдаче происходит привязка карты к паспорту или другому документу посетителя</li>\r\n  <li>Хранение истории выдачи карт</li>\r\n  <li>Задание списка карт посетителей</li>\r\n</ul>\r\n{% endset %}\r\n{% set pass_ext_vol = 1 %}\r\n{% set pass_ext_price = data.cena_module_pass_ext %}\r\n{% set pass_ext_cost = (pass_ext_price * pass_ext_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_event_response %}\r\n{% set event_response_name = 'Дополнительный модуль «Реакция на события»' %}\r\n{% set event_response_desc %} \r\n<ul>\r\n  <li>Задание списка действий, которые будут выполняться системой автоматически при наступлении каких-либо событий. Например, возможна отправка SMS-сообщения на указанный телефонный номер.</li>\r\n</ul>\r\n{% endset %}\r\n{% set event_response_vol = 1 %}\r\n{% set event_response_price = data.cena_module_event_response %}\r\n{% set event_response_cost = (event_response_price * event_response_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_data_sync %}\r\n{% set data_sync_name = 'Дополнительный модуль «Синхронизация данных»' %}\r\n{% set data_sync_desc %} \r\n<ul>\r\n  <li>Автоматическая синхронизация списка сотрудников в СКУД по внешней базе данных существующей корпоративной системы.</li>\r\n</ul>\r\n{% endset %}\r\n{% set data_sync_vol = 1 %}\r\n{% set data_sync_price = data.cena_module_data_sync %}\r\n{% set data_sync_cost = (data_sync_price * data_sync_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_doc_ocr %}\r\n{% set doc_ocr_name = 'Дополнительный модуль «Распознавание документов»' %}\r\n{% set doc_ocr_desc %} \r\n<ul>\r\n  <li>Автоматическое сканирование и распознавание документов при выдаче временного пропуска посетителю.</li>\r\n</ul>\r\n{% endset %}\r\n{% set doc_ocr_vol = 1 %}\r\n{% set doc_ocr_price = data.cena_module_doc_ocr %}\r\n{% set doc_ocr_cost = (doc_ocr_price * doc_ocr_vol) %}\r\n{% endif %}\r\n\r\n{# Face Ident per camera calculation #}\r\n{% if camera_vol > 0 %}\r\n{% set face_ident_camera_name = 'Модуль «Идентификация лица» (лицензия на одну камеру)' %}\r\n{% set face_ident_camera_price = data.cena_module_face_ident_camera %}\r\n{% set face_ident_camera_vol = camera_vol %}\r\n{% set face_ident_camera_cost = (face_ident_camera_price * face_ident_camera_vol) %}\r\n{% endif %}\r\n\r\n{# Face ident calculation #}\r\n{% if data.face_vol > 0 and data.face_vol <= 10 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 10 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_10 %}\r\n\r\n{% elseif data.face_vol > 10 and data.face_vol <= 50 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 50 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_50 %}\r\n\r\n{% elseif data.face_vol > 50 and data.face_vol <= 100 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 100 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_100 %}\r\n\r\n{% elseif data.face_vol > 100 and data.face_vol <= 1000 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 1000 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_1000 %}\r\n{% endif %}\r\n\r\n{% set face_ident_desc %}\r\n<ul>\r\n  <li>Обязательный модуль, если выбрана опция идентификации лиц.</li>\r\n</ul>\r\n{% endset %}\r\n{% set face_ident_vol = 1 %}\r\n{% set face_ident_cost = (face_ident_price * face_ident_vol) %}\r\n\r\n{# Soft Subtotal #}\r\n{% set total_soft_cost = (user_cost + time_track_cost + pass_print_cost + event_monitor_cost + onec_integration_cost + pass_ext_cost + event_response_cost + data_sync_cost + doc_ocr_cost + face_ident_camera_cost + face_ident_cost) %}\r\n\r\n{# Grand Total #}\r\n{% set total = (total_hard_cost + total_soft_cost) %}\r\n\r\n{# Message Body #}\r\n\r\n<table width=\"100%\" style=\"font-size:14px;line-height:18px\" cellpadding=\"10\">\r\n  <colgroup width=\"50%\"></colgroup>\r\n  <colgroup width=\"10%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <thead>\r\n    <tr style=\"background: #505050; color:#fff\">\r\n      <td>Товары (работы, услуги)</td>\r\n      <td>Кол-во</td>\r\n      <td>Цена (с НДС)</td>\r\n      <td>Сумма (с НДС)</td>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {# Card #}\r\n    {% if card_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ card_name }}</td>  \r\n      <td>{{ card_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ card_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ card_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# Reader #}\r\n    {% if reader_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ reader_name }}</td>\r\n      <td>{{ reader_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ reader_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ reader_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# BBP #}\r\n    {% if bbp_mech_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_mech_name }}</td>\r\n      <td>{{ bbp_mech_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_mech_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_mech_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if bbp_mag_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_mag_name }}</td>\r\n      <td>{{ bbp_mag_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_mag_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_mag_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# BBP Gate #}\r\n    {% if bbp_gate_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_gate_name }}</td>\r\n      <td>{{ bbp_gate_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_gate_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_gate_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# Lock #}\r\n    {% if lock_mech_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ lock_mech_name }}</td>\r\n      <td>{{ lock_mech_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ lock_mech_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ lock_mech_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if lock_mag_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ lock_mag_name }}</td>\r\n      <td>{{ lock_mag_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ lock_mag_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ lock_mag_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Corner #}\r\n    {% if corner_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ corner_name }}</td>\r\n      <td>{{ corner_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ corner_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ corner_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Turnstile #}\r\n    {% if turnstile_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ turnstile_name }}</td>\r\n      <td>{{ turnstile_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ turnstile_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ turnstile_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {% if cardcapture_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ cardcapture_name }}</td>\r\n      <td>{{ cardcapture_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ cardcapture_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ cardcapture_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Controller #}\r\n    {% if ep_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_name }}</td>\r\n      <td>{{ ep_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if ep_two_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_two_name }}</td>\r\n      <td>{{ ep_two_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_two_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_two_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if ep_four_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_four_name }}</td>\r\n      <td>{{ ep_four_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_four_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_four_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Button #}\r\n    {% if button_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ button_name }}</td>\r\n      <td>{{ button_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ button_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ button_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Closer #}\r\n    {% if closer_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ closer_name }}</td>\r\n      <td>{{ closer_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ closer_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ closer_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Battery #}\r\n    {% if battery_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ battery_name }}</td>\r\n      <td>{{ battery_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ battery_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ battery_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Battery Gate #}\r\n    {% if battery_gate_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ battery_gate_name }}</td>\r\n      <td>{{ battery_gate_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ battery_gate_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ battery_gate_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Door Detector #}\r\n    {% if detector_door_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ detector_door_name }}</td>\r\n      <td>{{ detector_door_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ detector_door_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ detector_door_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Controller Detector #}\r\n    {% if detector_controller_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ detector_controller_name }}</td>\r\n      <td>{{ detector_controller_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ detector_controller_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ detector_controller_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Master Controller #}\r\n    {% if master_controller_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ master_controller_name }}</td>\r\n      <td>{{ master_controller_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ master_controller_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ master_controller_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Camera #}\r\n    {% if camera_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ camera_name }}</td>\r\n      <td>{{ camera_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ camera_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ camera_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Server #}\r\n    {% if data.server_skud or camera_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ server_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ server_desc}}</p></td>\r\n      <td>{{ server_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ server_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ server_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# URM #}\r\n    {% if data.urm_skud_check %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ urm_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ urm_desc}}</p></td>\r\n      <td>{{ urm_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ urm_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ urm_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n  </tbody>\r\n</table>\r\n\r\n{# hardware subtotal #}\r\n<table width=\"100%\" style=\"font-size: 14px;line-height: 18px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>  \r\n  <tr>\r\n    <td style=\"text-align:right\">Итого (товары, услуги) без НДС: </td>\r\n    <td style=\"text-align:left\">{{ total_hard_no_nds|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n  <tr>\r\n    <td style=\"text-align:right\">Сумма НДС (20%): </td>\r\n    <td style=\"text-align:left\">{{ hard_nds|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n  <tr>\r\n    <td style=\"text-align:right\">Всего оборудование: </td>\r\n    <td style=\"text-align:left\">{{ total_hard_cost|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n</table>\r\n\r\n<table width=\"100%\" style=\"font-size:14px;line-height:18px\" cellpadding=\"10\">\r\n  <colgroup width=\"50%\"></colgroup>\r\n  <colgroup width=\"10%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <thead>\r\n    <tr style=\"background: #505050; color:#fff\">\r\n      <td>Товары (программное обеспечение)</td>\r\n      <td>Кол-во</td>\r\n      <td>Цена (с НДС)</td>\r\n      <td>Сумма (с НДС)</td>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {# User #}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ user_name }}</td>\r\n      <td>{{ user_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ user_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ user_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    \r\n    {# Time Track #}\r\n    {% if data.module_po_castle_time_track %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ time_track_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ time_track_desc}}</p></td>\r\n      <td>{{ time_track_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ time_track_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ time_track_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# pass_print #}\r\n    {% if data.module_po_castle_pass_print %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ pass_print_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ pass_print_desc}}</p></td>\r\n      <td>{{ pass_print_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ pass_print_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ pass_print_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# event_monitor #}\r\n    {% if data.module_po_castle_event_monitor %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ event_monitor_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ event_monitor_desc}}</p></td>\r\n      <td>{{ event_monitor_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ event_monitor_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ event_monitor_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# 1c_integration #}\r\n    {% if data.module_po_castle_1c_integration %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ onec_integration_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ onec_integration_desc}}</p></td>\r\n      <td>{{ onec_integration_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ onec_integration_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ onec_integration_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# pass_ext #}\r\n    {% if data.module_po_castle_pass_ext %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ pass_ext_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ pass_ext_desc}}</p></td>\r\n      <td>{{ pass_ext_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ pass_ext_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ pass_ext_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# event_response #}\r\n    {% if data.module_po_castle_event_response %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ event_response_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ event_response_desc}}</p></td>\r\n      <td>{{ event_response_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ event_response_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ event_response_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# data_sync #}\r\n    {% if data.module_po_castle_data_sync %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ data_sync_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ data_sync_desc}}</p></td>\r\n      <td>{{ data_sync_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ data_sync_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ data_sync_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# doc_ocr #}\r\n    {% if data.module_po_castle_doc_ocr %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ doc_ocr_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ doc_ocr_desc}}</p></td>\r\n      <td>{{ doc_ocr_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ doc_ocr_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ doc_ocr_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# face_ident_camera #}\r\n    {% if camera_vol > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ face_ident_camera_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ face_ident_camera_desc}}</p></td>\r\n      <td>{{ face_ident_camera_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ face_ident_camera_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ face_ident_camera_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# face_ident #}\r\n    {% if data.face_vol > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ face_ident_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ face_ident_desc}}</p></td>\r\n      <td>{{ face_ident_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ face_ident_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ face_ident_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n  </tbody>\r\n</table>\r\n\r\n{# software subtotal #}\r\n<table width=\"100%\" style=\"font-size: 14px;line-height: 18px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n    <tr>\r\n      <td style=\"text-align:right\">Итого (программное обеспечение): </td>\r\n      <td style=\"text-align:left\">{{ total_soft_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:right\">Сумма НДС (20%): </td>\r\n      <td style=\"text-align:left\">—</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:right\">Всего ПО: </td>\r\n      <td style=\"text-align:left\">{{ total_soft_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n</table>\r\n\r\n<p>НДС не облагается согласно подпункту 26 пункта 2 статьи 149 НК РФ.</p>\r\n<table width=\"100%\" style=\"font-size: 18px;line-height: 24px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <tr>\r\n    <td style=\"text-align:left\">Общая сумма КП (оборудование + программное обеспечение):</td>\r\n    <td style=\"text-align:left\">{{ total|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n</table>"
      excluded_elements:
        tip_kart: tip_kart
        cena_karty_hid: cena_karty_hid
        cena_karty_mifare: cena_karty_mifare
        cena_po_castle_50: cena_po_castle_50
        cena_po_castle_1000: cena_po_castle_1000
        cena_po_castle_10000: cena_po_castle_10000
        cena_po_castle_25000: cena_po_castle_25000
        cena_reader_em_marine_ordinary: cena_reader_em_marine_ordinary
        cena_reader_hid_ordinary: cena_reader_hid_ordinary
        cena_reader_mifare_ordinary: cena_reader_mifare_ordinary
        cena_reader_em_marine_premium: cena_reader_em_marine_premium
        cena_reader_hid_premium: cena_reader_hid_premium
        cena_reader_mifare_premium: cena_reader_mifare_premium
        cena_ep: cena_ep
        cena_ep2: cena_ep2
        cena_ep4: cena_ep4
        cena_module_time_track: cena_module_time_track
        cena_module_pass_print: cena_module_pass_print
        cena_module_event_monitor: cena_module_event_monitor
        cena_module_1c_integration: cena_module_1c_integration
        cena_module_pass_ext: cena_module_pass_ext
        cena_module_event_response: cena_module_event_response
        cena_module_data_sync: cena_module_data_sync
        cena_module_doc_ocr: cena_module_doc_ocr
        random: random
        fake: fake
      ignore_access: false
      exclude_empty: true
      exclude_empty_checkbox: true
      exclude_attachments: false
      html: true
      attachments: false
      twig: true
      theme_name: ''
      parameters: {  }
      debug: false
  email_planfix:
    id: email
    handler_id: email_planfix
    label: 'Уведомление в ПланФикс'
    notes: ''
    status: true
    conditions: {  }
    weight: 1
    settings:
      states:
        - completed
      to_mail: project+660@agrg.planfix.ru
      to_options: {  }
      bcc_mail: ep@agrg.ru
      bcc_options: {  }
      cc_mail: ''
      cc_options: {  }
      from_mail: _default
      from_options: {  }
      from_name: _default
      reply_to: ''
      return_path: ''
      sender_mail: ''
      sender_name: ''
      subject: 'Расчет на калькуляторе СКУД'
      body: "{% set doors_total = (data.oneside_door_volume + data.twoside_door_volume) %}\r\n{% set r_oneside = data.oneside_door_volume %}\r\n{% set r_twoside = (data.twoside_door_volume * 2) %}\r\n{% set users_total = (data.kolichestvo_kart + data.finger_vol + data.face_vol) %}\r\n\r\n{# Card / Reader calculation #}\r\n{% if data.tip_kart == 'Em-Marine' -%}\r\n  {% set card_name = 'Карта EM-Marine, бесконтактный идентификатор (толстая), TS' %}\r\n  {% set card_price = data.cena_karty_em_marine %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-EM' %}\r\n    {% set reader_price = data.cena_bio_reader_em_marine %}\r\n  {% else %}\r\n    {% set reader_name = 'Считыватель TS-RDR-E White EM-Marine' %}\r\n    {% set reader_price = data.cena_reader_em_marine_ordinary %}\r\n  {% endif %}\r\n\r\n{% elseif data.tip_kart == 'HID' %}\r\n  {% set card_name = 'Карта HID, бесконтактный идентификатор iC2002' %}\r\n  {% set card_price = data.cena_karty_hid %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель BioSmart 4-O-HD-N-L' %}\r\n    {% set reader_price = data.cena_bio_reader_hid %}\r\n  {% else %}\r\n    {% set reader_name = 'Считыватель TS-RDR-EHV-2 Metal HID' %}\r\n    {% set reader_price = data.cena_reader_hid_ordinary %}\r\n  {% endif %}\r\n\r\n{% elseif data.tip_kart == 'Mifare' %}\r\n  {% set card_name = 'Карта Mifare, бесконтактный идентификатор Smart-карта TS толстая (13,56МГц 1K)' %}\r\n  {% set card_price = data.cena_karty_mifare %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-MF' %}\r\n    {% set reader_price = data.cena_bio_reader_mifare %}\r\n  {% else %} \r\n    {% set reader_name = 'Считыватель TS-RDR-MF Metal Mifare' %}\r\n    {% set reader_price = data.cena_reader_mifare_ordinary %}\r\n  {% endif %}\r\n{%- endif %}\r\n\r\n  {# Reader style calculation #}\r\n  {% if data.readers_style == 'ordinary' or data.readers_style is empty -%}\r\n  {% elseif data.readers_style == 'eywa_classics' %}\r\n    {% set reader_name = 'Считыватель AGRG-CLS-B-ABL1-MF/EM-NONE-NO-LOGO' %}\r\n    {% set reader_price = data.cena_reader_eywa_classics %}\r\n  {% elseif data.readers_style == 'eywa_art' %}\r\n    {% set reader_name = 'Считыватель AGRG-ART-C-R-ABL1-MF/EM-BLU-NO-LOGO' %}\r\n    {% set reader_price = data.cena_reader_eywa_art %}\r\n  {%- endif %}  \r\n\r\n{% set card_vol = data.kolichestvo_kart %}\r\n{% set card_cost = (card_price * card_vol) %}\r\n\r\n{% set reader_vol = (r_oneside + r_twoside) %}\r\n{% set reader_cost = (reader_price * reader_vol) %}\r\n\r\n{# BBP / Lock calculation #}\r\n{% if data.lock_type == 'mechanical' -%}\r\n  {% set bbp_mech_vol = (doors_total / 3)|round(0, 'ceil') %}\r\n  {% set lock_mech_vol = doors_total %}\r\n\r\n{% elseif data.lock_type == 'magnet' %}\r\n  {% set bbp_mag_vol = (doors_total / 2)|round(0, 'ceil') %}\r\n  {% set lock_mag_vol = doors_total %}\r\n  {% set corner_vol = doors_total %}\r\n  \r\n{% elseif data.lock_type == 'mixed' %}\r\n  {% set bbp_mech_vol = (data.mechanical_lock_volume / 3)|round(0, 'ceil') %}\r\n  {% set bbp_mag_vol = (data.magnet_lock_volume / 2)|round(0, 'ceil') %}\r\n  {% set lock_mech_vol = data.mechanical_lock_volume %}\r\n  {% set lock_mag_vol = data.magnet_lock_volume %}\r\n  {% set corner_vol = data.magnet_lock_volume %}\r\n{%- endif %}\r\n\r\n{% set bbp_mech_name = 'Источник вторичного электропитания ББП-50 TS' %}\r\n{% set bbp_mech_price = data.cena_bbp_50 %}\r\n{% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\r\n\r\n{% set bbp_mag_name = 'Источник вторичного электропитания ББП-20 TS' %}\r\n{% set bbp_mag_price = data.cena_bbp_20 %}\r\n{% set bbp_mag_cost = (bbp_mag_price * bbp_mag_vol) %}\r\n\r\n{% set lock_mech_name = 'Защелка электромеханическая Viro 7755.70' %}\r\n{% set lock_mech_price = data.cena_mechanical_lock %}\r\n{% set lock_mech_cost = (lock_mech_price * lock_mech_vol) %}\r\n\r\n{% set lock_mag_name = 'Электромагнитный замок TS-ML300' %}\r\n{% set lock_mag_price = data.cena_magnetlock %}\r\n{% set lock_mag_cost = (lock_mag_price * lock_mag_vol) %}\r\n\r\n{% set corner_name = 'Монтажный L-образный уголок для крепления электромагнитного замка, TS-LM300' %}\r\n{% set corner_price = data.cena_montage_corner %}\r\n{% set corner_cost = (corner_price * corner_vol) %}\r\n\r\n{# Button calculation #}\r\n{% set button_name = 'Сенсорная кнопка выхода TS-MAGIC чёрный' %}\r\n{% set button_vol = data.oneside_door_volume %}\r\n{% set button_price = data.cena_button_ordinary %}\r\n{% set button_cost = (button_price * button_vol) %}\r\n\r\n{# Closer calculation #}\r\n{% set closer_name = 'TANTOS TS-DC085 Freeze серебро - доводчик дверной с усилием EN4 для дверей весом до 100 кг' %}\r\n{% set closer_vol = doors_total %}\r\n{% set closer_price = data.cena_closer_tantos_ts_dc085 %}\r\n{% set closer_cost = (closer_price * closer_vol) %}\r\n\r\n{# Battery calculation #}\r\n{% set battery_name = 'Аккумулятор 12В 7 А•ч (DT 1207)' %}\r\n{% set battery_vol = (bbp_mech_vol + bbp_mag_vol) %}\r\n{% set battery_price = data.cena_battery_dt1207 %}\r\n{% set battery_cost = (battery_price * battery_vol) %}\r\n\r\n{# Door Detector calculation #}\r\n{% set detector_door_name = 'Извещатель охранный магнитоконтактный ИО 102-26 исп.00 «Аякс»' %}\r\n{% set detector_door_vol = doors_total %}\r\n{% set detector_door_price = data.cena_detector_door %}\r\n{% set detector_door_cost = (detector_door_price * detector_door_vol) %}\r\n\r\n{# Controller Detector calculation #}\r\n{% set detector_controller_name = 'Извещатель ИОПР 513/101-3 «Аварийный выход» с крышкой' %}\r\n{% set detector_controller_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\r\n{% set detector_controller_price = data.cena_detector_controller %}\r\n{% set detector_controller_cost = (detector_controller_price * detector_controller_vol) %}\r\n\r\n{# Turnstile calculation #}\r\n{% if data.turnstile_check %}\r\n  {% set turnstile_vol = data.turnstile_volume %}\r\n  {% if data.turnstile_type == 'tripod' %}\r\n    {% set turnstile_name = 'Турникет-трипод PERCo-TTR-07.1G' %}\r\n    {% set turnstile_price = data.cena_turnstile_tripod %}\r\n    \r\n    {% set bbp_mech_vol = (bbp_mech_vol + turnstile_vol) %}\r\n    {% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\r\n    \r\n    {% set battery_vol = (battery_vol + turnstile_vol) %}\r\n    {% set battery_cost = (battery_price * battery_vol) %}\r\n    \r\n    {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\r\n    {% set reader_cost = (reader_price * reader_vol) %}\r\n  {% elseif data.turnstile_type == 'gate' %}\r\n    {% set turnstile_name = 'Турникет с раздвижными створками PERCo-ST-02.900' %}\r\n    {% set turnstile_price = data.cena_turnstile_gate %}\r\n    \r\n    {% set bbp_gate_name = 'Аккумулятор 12В 12 А∙ч (DT 1212)' %}\r\n    {% set bbp_gate_price = data.cena_battery_dt1212 %}\r\n    {% set bbp_gate_vol = (turnstile_vol * 2) %}\r\n    {% set bbp_gate_cost = (bbp_gate_price * bbp_gate_vol) %}\r\n\r\n    {% set battery_gate_name = 'Блок питания ИВЭПР 24/5 2x12-Р БР' %}\r\n    {% set battery_gate_price = data.cena_ivepr %}\r\n    {% set battery_gate_vol = turnstile_vol %}\r\n    {% set battery_gate_cost = (battery_gate_price * battery_gate_vol) %}\r\n    \r\n    {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\r\n    {% set reader_cost = (reader_price * reader_vol) %}\r\n  {% endif %}\r\n  {% set turnstile_cost = (turnstile_price * turnstile_vol) %}\r\n{% endif %}\r\n\r\n{% if data.cardcapture_check %}\r\n  {% set cardcapture_name = 'Картоприемник PERCo-IC05' %}\r\n  {% set cardcapture_price = data.cena_cardcapture %}\r\n  {% set cardcapture_vol = turnstile_vol %}\r\n  {% set cardcapture_cost = (cardcapture_price * cardcapture_vol) %}\r\n{% endif %}\r\n\r\n{# Controller calculation #}\r\n{% if data.door_distance == '30less' -%}\r\n  {% if data.oneside_door_volume > 1 and data.oneside_door_volume <= 4 -%}\r\n    {% set ep_four_vol = 1 %}\r\n  {% elseif data.oneside_door_volume == 1 %}\r\n    {% set ep_two_vol = 1 %}\r\n  {% else %}\r\n    {% set ep_four_vol = (data.oneside_door_volume / 4)|round(0, 'ceil') %}\r\n  {%- endif %}\r\n\r\n  {% if data.twoside_door_volume == 1 %}\r\n    {% set ep_two_vol = 1 %}\r\n  {% else %}\r\n    {% set ep_vol = (data.twoside_door_volume / 2)|round(0, 'ceil') %}  \r\n  {% endif %}\r\n\r\n{% elseif data.door_distance == '30more' %}\r\n  {% set ep_two_vol = doors_total %}\r\n{%- endif %}\r\n\r\n{% set ep_vol = (ep_vol + turnstile_vol) %}\r\n\r\n{% set ep_name = 'Сетевой контроллер Castle EP' %}\r\n{% set ep_price = data.cena_ep %}\r\n{% set ep_cost = (ep_price * ep_vol) %}\r\n\r\n{% set ep_two_name = 'Сетевой контроллер Castle EP2' %}\r\n{% set ep_two_price = data.cena_ep2 %}\r\n{% set ep_two_cost = (ep_two_price * ep_two_vol) %}\r\n\r\n{% set ep_four_name = 'Сетевой контроллер Castle EP4' %}\r\n{% set ep_four_price = data.cena_ep4 %}\r\n{% set ep_four_cost = (ep_four_price * ep_four_vol) %}\r\n\r\n{% set controllers_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\r\n\r\n{# Master Controller calculation #}\r\n{% if data.finger_vol > 0 %}\r\n  {% set master_controller_name = 'USB-считыватель настольный BioSmart FS-80' %}\r\n  {% set master_controller_price = data.cena_bio_reader_master %}\r\n{% else %}\r\n  {% if data.tip_kart == 'Em-Marine' or data.tip_kart == 'HID'%}\r\n    {% set master_controller_name = 'Контрольный считыватель карт форматов EM-Marine и HID настольный «Castle-Reader» с интерфейсом USB' %}\r\n    {% set master_controller_price = data.cena_reader_master_em_marine %}\r\n  {% elseif data.tip_kart == 'Mifare' %}\r\n    {% set master_controller_name = 'Контрольный считыватель «ACR1252U USB NFC Reader III» Mifare' %}\r\n    {% set master_controller_price = data.cena_reader_master_mifare %}\r\n  {% endif %}\r\n{% endif %}\r\n\r\n{% set master_controller_vol = 1 %}\r\n{% set master_controller_cost = (master_controller_price * master_controller_vol) %}\r\n\r\n{# Camera calculation #}\r\n{% if data.face_vol > 0 %}\r\n  {% set camera_name = 'Видеокамера сетевая (IP) TSi-Pe25VP' %}\r\n  {% set camera_price = data.cena_camera %}\r\n  {% set camera_vol = (r_oneside + r_twoside + turnstile_vol * 2) %}\r\n  {% set camera_cost = (camera_price * camera_vol) %}\r\n{% endif %}\r\n\r\n{# Server Face Ident calculation #}\r\n{% if camera_vol > 0 %}\r\n  {% if camera_vol <= 4 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\r\n    {% set server_desc %} \r\n    <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i7</li>\r\n      <li>Оперативная память: 8 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_100_rack %}\r\n    {% else %}\r\n    {% set server_name = 'Сервер \"AGRG VideoСервер vS 10 2988-134 2MPx.25fps.16TbR5\"' %}\r\n    {% set server_desc %} \r\n      <p>Сервер СКУД для организации доступа при помощи идентификации лиц, включая ПО:</p>\r\n      <ul>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Подключение видеоканала (лицензия на 10 каналов)</li>\r\n        <li>Программное обеспечение - Система защиты Guardant</li>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Ядро системы</li>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Интеграция СКУД Castle</li>\r\n      </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_face_10 %}\r\n  {% endif %}\r\n  {% set server_vol = (camera_vol / 10)|round(0, 'ceil') %}\r\n  {% set server_cost = (server_price * server_vol) %}\r\n{% endif %}\r\n\r\n{# Server calculation #}\r\n{% if data.server_skud %}\r\n  {% if controllers_vol > 0 and controllers_vol <= 20 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер vS SKUD.Castle.1Tb.m0.R1\":' %}\r\n    {% set server_desc %} \r\n    <p>Базовая платформа сервера СКУД для установки в стойку. Устанавливается в стойку (Rackmount 19&quot;, 1U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция). Максимально доступное решение:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: HDD 1Tb NAS</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 1U</li>\r\n      <li>Размеры (ШхГхВ): 430x250x44 мм</li>\r\n      <li>Питание: 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud %}\r\n  {% elseif controllers_vol > 20 and controllers_vol <= 50 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1T2.m1.MT\"' %}\r\n    {% set server_desc %} \r\n    <p>Базовая платформа сервера СКУД в корпусе MiniTower (компактное отдельностоящее исполнение). Поставляется с расширенной системой хранения архива событий базы данных. Оптимальное решение для объектов, на которых не используются серверные стойки для сетевого и серверного оборудования:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: HDD 2Tb Enterprise</li>\r\n      <li>Тип монтажа: отдельностоящий настольный</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_50_mt %}\r\n  {% elseif controllers_vol > 50 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\r\n    {% set server_desc %} \r\n    <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i7</li>\r\n      <li>Оперативная память: 8 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_100_rack %}\r\n  {% endif %}\r\n  \r\n  {% set server_vol = 1 %}\r\n  {% set server_cost = (server_price * server_vol) %}\r\n{% endif %}\r\n\r\n{# URM calculation #}\r\n{% if data.urm_skud_check %}\r\n  {% if data.urm_skud_type == 'mt_win' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.MT\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД в корпусе MiniTower (компактное отдельностоящее исполнение):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>Тип монтажа: настольный</li>\r\n      <li>Размеры (ШхГхВ): 230x264x112 мм</li>\r\n      <li>Питание: 220V, &gt;160W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set urm_price = data.cena_urm_skud %}\r\n  {% elseif data.urm_skud_type == 'vesa_win' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.NUC\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД в компактном корпусе с креплением VESA (для установки на монитор с аналогичным типом крепления). Компактная и эстетичная модель:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>Тип монтажа: VESA 100</li>\r\n      <li>Размеры (ШхГхВ): 115х111х48 мм</li>\r\n      <li>Питание: 220V, &gt;65W</li>\r\n    </ul>\r\n    {% endset %}    \r\n    {% set urm_price = data.cena_urm_skud_vesa %}\r\n  {% elseif data.urm_skud_type == 'mt_linux' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.RSPB\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД на базе ОС Линукс (ультракомпактное отдельностоящее исполнение). Минимальное энергопотребление, отказоустойчивость ОС Линукс, высокая скорость загрузки и выгодная цена для заказчика:</p>\r\n    <ul>\r\n      <li>Процессор: ARM</li>\r\n      <li>Оперативная память: 1 Гб</li>\r\n      <li>ОС: Ubuntu</li>\r\n      <li>Тип монтажа: настольный</li>\r\n      <li>Размеры (ШхГхВ): 100х70х40 мм</li>\r\n      <li>Питание: 220V</li>\r\n    </ul>\r\n    {% endset %}    \r\n    {% set urm_price = data.cena_urm_skud_rspb %}\r\n  {% endif %}\r\n\r\n{% set urm_vol = data.urm_skud %}\r\n{% set urm_cost = (urm_price * urm_vol) %}\r\n{% endif %}\r\n\r\n{# Hardware subtotal #}\r\n\r\n{% set total_hard_cost = (card_cost + reader_cost + bbp_mech_cost + bbp_mag_cost + lock_mech_cost + lock_mag_cost + corner_cost + turnstile_cost + cardcapture_cost + camera_cost + ep_cost + ep_two_cost + ep_four_cost + button_cost + closer_cost + battery_cost + detector_door_cost + detector_controller_cost + master_controller_cost + server_cost + urm_cost) %}\r\n{% set hard_nds = (total_hard_cost * 20 / 120) %}\r\n{% set total_hard_no_nds = (total_hard_cost - hard_nds) %}\r\n\r\n{# Users cost calculation #}\r\n{% if users_total <= '50' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 50 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_50 %}\r\n  {% set user_cost = (user_price * user_vol) %}\r\n  \r\n  {% elseif users_total > '50' and users_total <= '1000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 1000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_1000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n\r\n  {% elseif users_total > '1000' and users_total <= '10000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 10 000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_10000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n\r\n  {% elseif users_total > '10000' and users_total <= '25000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 25 000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_25000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n{% endif %}\r\n\r\n{# Extra Modules calculation #}\r\n{% if data.module_po_castle_time_track %}\r\n{% set time_track_name = 'Дополнительный модуль ПО Castle «Учет рабочего времени»' %}\r\n{% set time_track_desc %} \r\n<ul>\r\n  <li>Создание рабочих графиков для сотрудников</li>\r\n  <li>Получение отчетов за любой исторический период</li>\r\n  <li>Полный журнал отклонений от рабочего графика</li>\r\n  <li>Журнал неявок, опозданий и других временных нарушений рабочей дисциплины</li>\r\n</ul>\r\n{% endset %}\r\n{% set time_track_vol = 1 %}\r\n{% set time_track_price = data.cena_module_time_track %}\r\n{% set time_track_cost = (time_track_price * time_track_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_pass_print %}\r\n{% set pass_print_name = 'Дополнительный модуль ПО Castle «Создание и печать пропусков»' %}\r\n{% set pass_print_desc %} \r\n<ul>\r\n  <li>Создание и редактирование шаблонов графического оформления пропусков</li>\r\n  <li>Назначение шаблонов пропусков для сотрудников</li>\r\n  <li>Печать пропусков на основании шаблонов и персональных данных сотрудников</li>\r\n</ul>\r\n{% endset %}\r\n{% set pass_print_vol = 1 %}\r\n{% set pass_print_price = data.cena_module_pass_print %}\r\n{% set pass_print_cost = (pass_print_price * pass_print_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_event_monitor %}\r\n{% set event_monitor_name = 'Дополнительный модуль «Мониторинг событий (фотоидентификация)»' %}\r\n{% set event_monitor_desc %} \r\n<ul>\r\n  <li>Наблюдение в режиме реального времени за событиями, происходящими в системе. При запросе прохода сотрудником отображается его учетная карточка из базы, включающая фотографию.</li>\r\n</ul>\r\n{% endset %}\r\n{% set event_monitor_vol = 1 %}\r\n{% set event_monitor_price = data.cena_module_event_monitor %}\r\n{% set event_monitor_cost = (event_monitor_price * event_monitor_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_1c_integration %}\r\n{% set onec_integration_name = 'Дополнительный модуль «Интеграция с 1С»' %}\r\n{% set onec_integration_desc %} \r\n<ul>\r\n  <li>Дополняет функции модуля &laquo;Учет рабочего времени&raquo;</li>\r\n  <li>Автоматическая передача табеля (форма Т-13) в &laquo;1C: Предприятие&raquo;</li>\r\n</ul>\r\n{% endset %}\r\n{% set onec_integration_vol = 1 %}\r\n{% set onec_integration_price = data.cena_module_1c_integration %}\r\n{% set onec_integration_cost = (onec_integration_price * onec_integration_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_pass_ext or data.cardcapture_check %}\r\n{% set pass_ext_name = 'Дополнительный модуль «Расширенная поддержка пропусков посетителей»' %}\r\n{% set pass_ext_desc %} \r\n<ul>\r\n  <li>Интерфейс для выдачи/сбора карт (АРМ &laquo;Бюро пропусков&raquo;), при выдаче происходит привязка карты к паспорту или другому документу посетителя</li>\r\n  <li>Хранение истории выдачи карт</li>\r\n  <li>Задание списка карт посетителей</li>\r\n</ul>\r\n{% endset %}\r\n{% set pass_ext_vol = 1 %}\r\n{% set pass_ext_price = data.cena_module_pass_ext %}\r\n{% set pass_ext_cost = (pass_ext_price * pass_ext_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_event_response %}\r\n{% set event_response_name = 'Дополнительный модуль «Реакция на события»' %}\r\n{% set event_response_desc %} \r\n<ul>\r\n  <li>Задание списка действий, которые будут выполняться системой автоматически при наступлении каких-либо событий. Например, возможна отправка SMS-сообщения на указанный телефонный номер.</li>\r\n</ul>\r\n{% endset %}\r\n{% set event_response_vol = 1 %}\r\n{% set event_response_price = data.cena_module_event_response %}\r\n{% set event_response_cost = (event_response_price * event_response_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_data_sync %}\r\n{% set data_sync_name = 'Дополнительный модуль «Синхронизация данных»' %}\r\n{% set data_sync_desc %} \r\n<ul>\r\n  <li>Автоматическая синхронизация списка сотрудников в СКУД по внешней базе данных существующей корпоративной системы.</li>\r\n</ul>\r\n{% endset %}\r\n{% set data_sync_vol = 1 %}\r\n{% set data_sync_price = data.cena_module_data_sync %}\r\n{% set data_sync_cost = (data_sync_price * data_sync_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_doc_ocr %}\r\n{% set doc_ocr_name = 'Дополнительный модуль «Распознавание документов»' %}\r\n{% set doc_ocr_desc %} \r\n<ul>\r\n  <li>Автоматическое сканирование и распознавание документов при выдаче временного пропуска посетителю.</li>\r\n</ul>\r\n{% endset %}\r\n{% set doc_ocr_vol = 1 %}\r\n{% set doc_ocr_price = data.cena_module_doc_ocr %}\r\n{% set doc_ocr_cost = (doc_ocr_price * doc_ocr_vol) %}\r\n{% endif %}\r\n\r\n{# Face Ident per camera calculation #}\r\n{% if camera_vol > 0 %}\r\n{% set face_ident_camera_name = 'Модуль «Идентификация лица» (лицензия на одну камеру)' %}\r\n{% set face_ident_camera_price = data.cena_module_face_ident_camera %}\r\n{% set face_ident_camera_vol = camera_vol %}\r\n{% set face_ident_camera_cost = (face_ident_camera_price * face_ident_camera_vol) %}\r\n{% endif %}\r\n\r\n{# Face ident calculation #}\r\n{% if data.face_vol > 0 and data.face_vol <= 10 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 10 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_10 %}\r\n\r\n{% elseif data.face_vol > 10 and data.face_vol <= 50 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 50 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_50 %}\r\n\r\n{% elseif data.face_vol > 50 and data.face_vol <= 100 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 100 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_100 %}\r\n\r\n{% elseif data.face_vol > 100 and data.face_vol <= 1000 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 1000 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_1000 %}\r\n{% endif %}\r\n\r\n{% set face_ident_desc %}\r\n<ul>\r\n  <li>Обязательный модуль, если выбрана опция идентификации лиц.</li>\r\n</ul>\r\n{% endset %}\r\n{% set face_ident_vol = 1 %}\r\n{% set face_ident_cost = (face_ident_price * face_ident_vol) %}\r\n\r\n{# Soft Subtotal #}\r\n{% set total_soft_cost = (user_cost + time_track_cost + pass_print_cost + event_monitor_cost + onec_integration_cost + pass_ext_cost + event_response_cost + data_sync_cost + doc_ocr_cost + face_ident_camera_cost + face_ident_cost) %}\r\n\r\n{# Grand Total #}\r\n{% set total = (total_hard_cost + total_soft_cost) %}\r\n\r\n{# Message Body #}\r\n\r\n<table width=\"100%\" style=\"font-size:14px;line-height:18px\" cellpadding=\"10\">\r\n  <colgroup width=\"50%\"></colgroup>\r\n  <colgroup width=\"10%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <thead>\r\n    <tr style=\"background: #505050; color:#fff\">\r\n      <td>Товары (работы, услуги)</td>\r\n      <td>Кол-во</td>\r\n      <td>Цена (с НДС)</td>\r\n      <td>Сумма (с НДС)</td>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {# Card #}\r\n    {% if card_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ card_name }}</td>  \r\n      <td>{{ card_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ card_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ card_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# Reader #}\r\n    {% if reader_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ reader_name }}</td>\r\n      <td>{{ reader_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ reader_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ reader_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# BBP #}\r\n    {% if bbp_mech_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_mech_name }}</td>\r\n      <td>{{ bbp_mech_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_mech_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_mech_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if bbp_mag_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_mag_name }}</td>\r\n      <td>{{ bbp_mag_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_mag_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_mag_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# BBP Gate #}\r\n    {% if bbp_gate_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_gate_name }}</td>\r\n      <td>{{ bbp_gate_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_gate_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_gate_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# Lock #}\r\n    {% if lock_mech_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ lock_mech_name }}</td>\r\n      <td>{{ lock_mech_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ lock_mech_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ lock_mech_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if lock_mag_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ lock_mag_name }}</td>\r\n      <td>{{ lock_mag_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ lock_mag_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ lock_mag_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Corner #}\r\n    {% if corner_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ corner_name }}</td>\r\n      <td>{{ corner_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ corner_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ corner_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Turnstile #}\r\n    {% if turnstile_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ turnstile_name }}</td>\r\n      <td>{{ turnstile_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ turnstile_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ turnstile_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {% if cardcapture_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ cardcapture_name }}</td>\r\n      <td>{{ cardcapture_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ cardcapture_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ cardcapture_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Controller #}\r\n    {% if ep_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_name }}</td>\r\n      <td>{{ ep_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if ep_two_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_two_name }}</td>\r\n      <td>{{ ep_two_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_two_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_two_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if ep_four_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_four_name }}</td>\r\n      <td>{{ ep_four_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_four_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_four_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Button #}\r\n    {% if button_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ button_name }}</td>\r\n      <td>{{ button_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ button_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ button_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Closer #}\r\n    {% if closer_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ closer_name }}</td>\r\n      <td>{{ closer_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ closer_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ closer_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Battery #}\r\n    {% if battery_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ battery_name }}</td>\r\n      <td>{{ battery_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ battery_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ battery_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Battery Gate #}\r\n    {% if battery_gate_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ battery_gate_name }}</td>\r\n      <td>{{ battery_gate_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ battery_gate_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ battery_gate_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Door Detector #}\r\n    {% if detector_door_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ detector_door_name }}</td>\r\n      <td>{{ detector_door_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ detector_door_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ detector_door_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Controller Detector #}\r\n    {% if detector_controller_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ detector_controller_name }}</td>\r\n      <td>{{ detector_controller_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ detector_controller_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ detector_controller_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Master Controller #}\r\n    {% if master_controller_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ master_controller_name }}</td>\r\n      <td>{{ master_controller_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ master_controller_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ master_controller_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Camera #}\r\n    {% if camera_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ camera_name }}</td>\r\n      <td>{{ camera_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ camera_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ camera_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Server #}\r\n    {% if data.server_skud or camera_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ server_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ server_desc}}</p></td>\r\n      <td>{{ server_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ server_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ server_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# URM #}\r\n    {% if data.urm_skud_check %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ urm_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ urm_desc}}</p></td>\r\n      <td>{{ urm_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ urm_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ urm_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n  </tbody>\r\n</table>\r\n\r\n{# hardware subtotal #}\r\n<table width=\"100%\" style=\"font-size: 14px;line-height: 18px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>  \r\n  <tr>\r\n    <td style=\"text-align:right\">Итого (товары, услуги) без НДС: </td>\r\n    <td style=\"text-align:left\">{{ total_hard_no_nds|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n  <tr>\r\n    <td style=\"text-align:right\">Сумма НДС (20%): </td>\r\n    <td style=\"text-align:left\">{{ hard_nds|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n  <tr>\r\n    <td style=\"text-align:right\">Всего оборудование: </td>\r\n    <td style=\"text-align:left\">{{ total_hard_cost|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n</table>\r\n\r\n<table width=\"100%\" style=\"font-size:14px;line-height:18px\" cellpadding=\"10\">\r\n  <colgroup width=\"50%\"></colgroup>\r\n  <colgroup width=\"10%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <thead>\r\n    <tr style=\"background: #505050; color:#fff\">\r\n      <td>Товары (программное обеспечение)</td>\r\n      <td>Кол-во</td>\r\n      <td>Цена (с НДС)</td>\r\n      <td>Сумма (с НДС)</td>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {# User #}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ user_name }}</td>\r\n      <td>{{ user_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ user_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ user_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    \r\n    {# Time Track #}\r\n    {% if data.module_po_castle_time_track %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ time_track_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ time_track_desc}}</p></td>\r\n      <td>{{ time_track_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ time_track_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ time_track_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# pass_print #}\r\n    {% if data.module_po_castle_pass_print %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ pass_print_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ pass_print_desc}}</p></td>\r\n      <td>{{ pass_print_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ pass_print_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ pass_print_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# event_monitor #}\r\n    {% if data.module_po_castle_event_monitor %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ event_monitor_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ event_monitor_desc}}</p></td>\r\n      <td>{{ event_monitor_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ event_monitor_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ event_monitor_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# 1c_integration #}\r\n    {% if data.module_po_castle_1c_integration %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ onec_integration_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ onec_integration_desc}}</p></td>\r\n      <td>{{ onec_integration_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ onec_integration_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ onec_integration_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# pass_ext #}\r\n    {% if data.module_po_castle_pass_ext %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ pass_ext_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ pass_ext_desc}}</p></td>\r\n      <td>{{ pass_ext_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ pass_ext_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ pass_ext_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# event_response #}\r\n    {% if data.module_po_castle_event_response %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ event_response_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ event_response_desc}}</p></td>\r\n      <td>{{ event_response_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ event_response_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ event_response_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# data_sync #}\r\n    {% if data.module_po_castle_data_sync %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ data_sync_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ data_sync_desc}}</p></td>\r\n      <td>{{ data_sync_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ data_sync_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ data_sync_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# doc_ocr #}\r\n    {% if data.module_po_castle_doc_ocr %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ doc_ocr_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ doc_ocr_desc}}</p></td>\r\n      <td>{{ doc_ocr_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ doc_ocr_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ doc_ocr_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# face_ident_camera #}\r\n    {% if camera_vol > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ face_ident_camera_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ face_ident_camera_desc}}</p></td>\r\n      <td>{{ face_ident_camera_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ face_ident_camera_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ face_ident_camera_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# face_ident #}\r\n    {% if data.face_vol > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ face_ident_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ face_ident_desc}}</p></td>\r\n      <td>{{ face_ident_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ face_ident_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ face_ident_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n  </tbody>\r\n</table>\r\n\r\n{# software subtotal #}\r\n<table width=\"100%\" style=\"font-size: 14px;line-height: 18px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n    <tr>\r\n      <td style=\"text-align:right\">Итого (программное обеспечение): </td>\r\n      <td style=\"text-align:left\">{{ total_soft_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:right\">Сумма НДС (20%): </td>\r\n      <td style=\"text-align:left\">—</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:right\">Всего ПО: </td>\r\n      <td style=\"text-align:left\">{{ total_soft_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n</table>\r\n\r\n<p>НДС не облагается согласно подпункту 26 пункта 2 статьи 149 НК РФ.</p>\r\n<table width=\"100%\" style=\"font-size: 18px;line-height: 24px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <tr>\r\n    <td style=\"text-align:left\">Общая сумма КП (оборудование + программное обеспечение):</td>\r\n    <td style=\"text-align:left\">{{ total|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n</table>"
      excluded_elements:
        reader_ordinary: reader_ordinary
        reader_eywa_classics: reader_eywa_classics
        reader_eywa_art: reader_eywa_art
        processed_text: processed_text
        processed_text_01: processed_text_01
        distance_30_less: distance_30_less
        distance_30_more: distance_30_more
        mechanical_lock_img_01: mechanical_lock_img_01
        magnet_lock_img_01: magnet_lock_img_01
        mechanical_lock_img: mechanical_lock_img
        magnet_lock_img: magnet_lock_img
        turnstile_check: turnstile_check
        turnstile_tripod_img: turnstile_tripod_img
        turnstile_gate_img: turnstile_gate_img
        cena_karty_em_marine: cena_karty_em_marine
        cena_karty_hid: cena_karty_hid
        cena_karty_mifare: cena_karty_mifare
        cena_po_castle_50: cena_po_castle_50
        cena_po_castle_1000: cena_po_castle_1000
        cena_po_castle_10000: cena_po_castle_10000
        cena_po_castle_25000: cena_po_castle_25000
        cena_reader_em_marine_ordinary: cena_reader_em_marine_ordinary
        cena_reader_hid_ordinary: cena_reader_hid_ordinary
        cena_reader_mifare_ordinary: cena_reader_mifare_ordinary
        cena_bio_reader_em_marine: cena_bio_reader_em_marine
        cena_bio_reader_hid: cena_bio_reader_hid
        cena_bio_reader_mifare: cena_bio_reader_mifare
        cena_reader_em_marine_premium: cena_reader_em_marine_premium
        cena_reader_hid_premium: cena_reader_hid_premium
        cena_reader_mifare_premium: cena_reader_mifare_premium
        cena_reader_eywa_classics: cena_reader_eywa_classics
        cena_reader_eywa_art: cena_reader_eywa_art
        cena_ep: cena_ep
        cena_ep2: cena_ep2
        cena_ep4: cena_ep4
        cena_mechanical_lock: cena_mechanical_lock
        cena_magnetlock: cena_magnetlock
        cena_bbp_20: cena_bbp_20
        cena_bbp_50: cena_bbp_50
        cena_ivepr: cena_ivepr
        cena_battery_dt1207: cena_battery_dt1207
        cena_battery_dt1212: cena_battery_dt1212
        cena_button_ordinary: cena_button_ordinary
        cena_montage_corner: cena_montage_corner
        cena_closer_tantos_ts_dc085: cena_closer_tantos_ts_dc085
        cena_detector_door: cena_detector_door
        cena_detector_controller: cena_detector_controller
        cena_reader_master_em_marine: cena_reader_master_em_marine
        cena_reader_master_mifare: cena_reader_master_mifare
        cena_bio_reader_master: cena_bio_reader_master
        cena_camera: cena_camera
        cena_server_skud: cena_server_skud
        cena_server_face_10: cena_server_face_10
        cena_server_skud_50_rack: cena_server_skud_50_rack
        cena_server_skud_100_rack: cena_server_skud_100_rack
        cena_server_skud_50_mt: cena_server_skud_50_mt
        cena_urm_skud: cena_urm_skud
        cena_urm_skud_vesa: cena_urm_skud_vesa
        cena_urm_skud_rspb: cena_urm_skud_rspb
        cena_turnstile_tripod: cena_turnstile_tripod
        cena_turnstile_gate: cena_turnstile_gate
        cena_cardcapture: cena_cardcapture
        cena_module_time_track: cena_module_time_track
        cena_module_pass_print: cena_module_pass_print
        cena_module_event_monitor: cena_module_event_monitor
        cena_module_1c_integration: cena_module_1c_integration
        cena_module_pass_ext: cena_module_pass_ext
        cena_module_event_response: cena_module_event_response
        cena_module_data_sync: cena_module_data_sync
        cena_module_doc_ocr: cena_module_doc_ocr
        cena_module_face_recog: cena_module_face_recog
        cena_module_face_ident_10: cena_module_face_ident_10
        cena_module_face_ident_50: cena_module_face_ident_50
        cena_module_face_ident_100: cena_module_face_ident_100
        cena_module_face_ident_1000: cena_module_face_ident_1000
        cena_module_face_ident_camera: cena_module_face_ident_camera
        horizontal_rule: horizontal_rule
        random: random
        fake: fake
      ignore_access: false
      exclude_empty: true
      exclude_empty_checkbox: true
      exclude_attachments: true
      html: true
      attachments: true
      twig: true
      theme_name: ''
      parameters: {  }
      debug: false
  pf_test:
    id: email
    handler_id: pf_test
    label: Тест
    notes: ''
    status: false
    conditions: {  }
    weight: 2
    settings:
      states:
        - completed
      to_mail: ep@agrg.ru
      to_options: {  }
      bcc_mail: ''
      bcc_options: {  }
      cc_mail: ''
      cc_options: {  }
      from_mail: '[webform_submission:values:email:raw]'
      from_options: {  }
      from_name: '[webform_submission:values:email:raw]'
      reply_to: ''
      return_path: ''
      sender_mail: ''
      sender_name: ''
      subject: 'Расчет на калькуляторе СКУД'
      body: "{% set doors_total = (data.oneside_door_volume + data.twoside_door_volume) %}\r\n{% set r_oneside = data.oneside_door_volume %}\r\n{% set r_twoside = (data.twoside_door_volume * 2) %}\r\n{% set users_total = (data.kolichestvo_kart + data.finger_vol + data.face_vol) %}\r\n\r\n{# Card / Reader calculation #}\r\n{% if data.tip_kart == 'Em-Marine' -%}\r\n  {% set card_name = 'Карта EM-Marine, бесконтактный идентификатор (толстая), TS' %}\r\n  {% set card_price = data.cena_karty_em_marine %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-EM' %}\r\n    {% set reader_price = data.cena_bio_reader_em_marine %}\r\n  {% else %}\r\n    {% set reader_name = 'Считыватель TS-RDR-E White EM-Marine' %}\r\n    {% set reader_price = data.cena_reader_em_marine_ordinary %}\r\n  {% endif %}\r\n\r\n{% elseif data.tip_kart == 'HID' %}\r\n  {% set card_name = 'Карта HID, бесконтактный идентификатор iC2002' %}\r\n  {% set card_price = data.cena_karty_hid %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель BioSmart 4-O-HD-N-L' %}\r\n    {% set reader_price = data.cena_bio_reader_hid %}\r\n  {% else %}\r\n    {% set reader_name = 'Считыватель TS-RDR-EHV-2 Metal HID' %}\r\n    {% set reader_price = data.cena_reader_hid_ordinary %}\r\n  {% endif %}\r\n\r\n{% elseif data.tip_kart == 'Mifare' %}\r\n  {% set card_name = 'Карта Mifare, бесконтактный идентификатор Smart-карта TS толстая (13,56МГц 1K)' %}\r\n  {% set card_price = data.cena_karty_mifare %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-MF' %}\r\n    {% set reader_price = data.cena_bio_reader_mifare %}\r\n  {% else %} \r\n    {% set reader_name = 'Считыватель TS-RDR-MF Metal Mifare' %}\r\n    {% set reader_price = data.cena_reader_mifare_ordinary %}\r\n  {% endif %}\r\n{%- endif %}\r\n\r\n  {# Reader style calculation #}\r\n  {% if data.readers_style == 'ordinary' or data.readers_style is empty -%}\r\n  {% elseif data.readers_style == 'eywa_classics' %}\r\n    {% set reader_name = 'Считыватель AGRG-CLS-B-N-ALDER-B' %}\r\n    {% set reader_price = data.cena_reader_eywa_classics %}\r\n  {% elseif data.readers_style == 'eywa_art' %}\r\n    {% set reader_name = 'Считыватель AGRG-ART-C(CH)-N-MAPLE-G' %}\r\n    {% set reader_price = data.cena_reader_eywa_art %}\r\n  {%- endif %}  \r\n\r\n{% set card_vol = data.kolichestvo_kart %}\r\n{% set card_cost = (card_price * card_vol) %}\r\n\r\n{% set reader_vol = (r_oneside + r_twoside) %}\r\n{% set reader_cost = (reader_price * reader_vol) %}\r\n\r\n{# BBP / Lock calculation #}\r\n{% if data.lock_type == 'mechanical' -%}\r\n  {% set bbp_mech_vol = (doors_total / 3)|round(0, 'ceil') %}\r\n  {% set lock_mech_vol = doors_total %}\r\n\r\n{% elseif data.lock_type == 'magnet' %}\r\n  {% set bbp_mag_vol = (doors_total / 2)|round(0, 'ceil') %}\r\n  {% set lock_mag_vol = doors_total %}\r\n  {% set corner_vol = doors_total %}\r\n  \r\n{% elseif data.lock_type == 'mixed' %}\r\n  {% set bbp_mech_vol = (data.mechanical_lock_volume / 3)|round(0, 'ceil') %}\r\n  {% set bbp_mag_vol = (data.magnet_lock_volume / 2)|round(0, 'ceil') %}\r\n  {% set lock_mech_vol = data.mechanical_lock_volume %}\r\n  {% set lock_mag_vol = data.magnet_lock_volume %}\r\n  {% set corner_vol = data.magnet_lock_volume %}\r\n{%- endif %}\r\n\r\n{% set bbp_mech_name = 'Источник вторичного электропитания ББП-50 TS' %}\r\n{% set bbp_mech_price = data.cena_bbp_50 %}\r\n{% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\r\n\r\n{% set bbp_mag_name = 'Источник вторичного электропитания ББП-20 TS' %}\r\n{% set bbp_mag_price = data.cena_bbp_20 %}\r\n{% set bbp_mag_cost = (bbp_mag_price * bbp_mag_vol) %}\r\n\r\n{% set lock_mech_name = 'Защелка электромеханическая Viro 7755.70' %}\r\n{% set lock_mech_price = data.cena_mechanical_lock %}\r\n{% set lock_mech_cost = (lock_mech_price * lock_mech_vol) %}\r\n\r\n{% set lock_mag_name = 'Электромагнитный замок TS-ML300' %}\r\n{% set lock_mag_price = data.cena_magnetlock %}\r\n{% set lock_mag_cost = (lock_mag_price * lock_mag_vol) %}\r\n\r\n{% set corner_name = 'Монтажный L-образный уголок для крепления электромагнитного замка, TS-LM300' %}\r\n{% set corner_price = data.cena_montage_corner %}\r\n{% set corner_cost = (corner_price * corner_vol) %}\r\n\r\n{# Button calculation #}\r\n{% set button_name = 'Сенсорная кнопка выхода TS-MAGIC чёрный' %}\r\n{% set button_vol = data.oneside_door_volume %}\r\n{% set button_price = data.cena_button_ordinary %}\r\n{% set button_cost = (button_price * button_vol) %}\r\n\r\n{# Closer calculation #}\r\n{% set closer_name = 'TANTOS TS-DC085 Freeze серебро - доводчик дверной с усилием EN4 для дверей весом до 100 кг' %}\r\n{% set closer_vol = doors_total %}\r\n{% set closer_price = data.cena_closer_tantos_ts_dc085 %}\r\n{% set closer_cost = (closer_price * closer_vol) %}\r\n\r\n{# Battery calculation #}\r\n{% set battery_name = 'Аккумулятор 12В 7 А•ч (DT 1207)' %}\r\n{% set battery_vol = (bbp_mech_vol + bbp_mag_vol) %}\r\n{% set battery_price = data.cena_battery_dt1207 %}\r\n{% set battery_cost = (battery_price * battery_vol) %}\r\n\r\n{# Door Detector calculation #}\r\n{% set detector_door_name = 'Извещатель охранный магнитоконтактный ИО 102-26 исп.00 «Аякс»' %}\r\n{% set detector_door_vol = doors_total %}\r\n{% set detector_door_price = data.cena_detector_door %}\r\n{% set detector_door_cost = (detector_door_price * detector_door_vol) %}\r\n\r\n{# Controller Detector calculation #}\r\n{% set detector_controller_name = 'Извещатель ИОПР 513/101-3 «Аварийный выход» с крышкой' %}\r\n{% set detector_controller_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\r\n{% set detector_controller_price = data.cena_detector_controller %}\r\n{% set detector_controller_cost = (detector_controller_price * detector_controller_vol) %}\r\n\r\n{# Turnstile calculation #}\r\n{% if data.turnstile_check %}\r\n  {% set turnstile_vol = data.turnstile_volume %}\r\n  {% if data.turnstile_type == 'tripod' %}\r\n    {% set turnstile_name = 'Турникет-трипод PERCo-TTR-07.1G' %}\r\n    {% set turnstile_price = data.cena_turnstile_tripod %}\r\n    \r\n    {% set bbp_mech_vol = (bbp_mech_vol + turnstile_vol) %}\r\n    {% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\r\n    \r\n    {% set battery_vol = (battery_vol + turnstile_vol) %}\r\n    {% set battery_cost = (battery_price * battery_vol) %}\r\n    \r\n    {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\r\n    {% set reader_cost = (reader_price * reader_vol) %}\r\n  {% elseif data.turnstile_type == 'gate' %}\r\n    {% set turnstile_name = 'Турникет с раздвижными створками PERCo-ST-02.900' %}\r\n    {% set turnstile_price = data.cena_turnstile_gate %}\r\n    \r\n    {% set bbp_gate_name = 'Аккумулятор 12В 12 А∙ч (DT 1212)' %}\r\n    {% set bbp_gate_price = data.cena_battery_dt1212 %}\r\n    {% set bbp_gate_vol = (turnstile_vol * 2) %}\r\n    {% set bbp_gate_cost = (bbp_gate_price * bbp_gate_vol) %}\r\n\r\n    {% set battery_gate_name = 'Блок питания ИВЭПР 24/5 2x12-Р БР' %}\r\n    {% set battery_gate_price = data.cena_ivepr %}\r\n    {% set battery_gate_vol = turnstile_vol %}\r\n    {% set battery_gate_cost = (battery_gate_price * battery_gate_vol) %}\r\n    \r\n    {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\r\n    {% set reader_cost = (reader_price * reader_vol) %}\r\n  {% endif %}\r\n  {% set turnstile_cost = (turnstile_price * turnstile_vol) %}\r\n{% endif %}\r\n\r\n{% if data.cardcapture_check %}\r\n  {% set cardcapture_name = 'Картоприемник PERCo-IC05' %}\r\n  {% set cardcapture_price = data.cena_cardcapture %}\r\n  {% set cardcapture_vol = turnstile_vol %}\r\n  {% set cardcapture_cost = (cardcapture_price * cardcapture_vol) %}\r\n{% endif %}\r\n\r\n{# Controller calculation #}\r\n{% if data.door_distance == '30less' -%}\r\n  {% if data.oneside_door_volume > 1 and data.oneside_door_volume <= 4 -%}\r\n    {% set ep_four_vol = 1 %}\r\n  {% elseif data.oneside_door_volume == 1 %}\r\n    {% set ep_two_vol = 1 %}\r\n  {% else %}\r\n    {% set ep_four_vol = (data.oneside_door_volume / 4)|round(0, 'ceil') %}\r\n  {%- endif %}\r\n\r\n  {% if data.twoside_door_volume == 1 %}\r\n    {% set ep_two_vol = 1 %}\r\n  {% else %}\r\n    {% set ep_vol = (data.twoside_door_volume / 2)|round(0, 'ceil') %}  \r\n  {% endif %}\r\n\r\n{% elseif data.door_distance == '30more' %}\r\n  {% set ep_two_vol = doors_total %}\r\n{%- endif %}\r\n\r\n{% set ep_vol = (ep_vol + turnstile_vol) %}\r\n\r\n{% set ep_name = 'Сетевой контроллер Castle EP' %}\r\n{% set ep_price = data.cena_ep %}\r\n{% set ep_cost = (ep_price * ep_vol) %}\r\n\r\n{% set ep_two_name = 'Сетевой контроллер Castle EP2' %}\r\n{% set ep_two_price = data.cena_ep2 %}\r\n{% set ep_two_cost = (ep_two_price * ep_two_vol) %}\r\n\r\n{% set ep_four_name = 'Сетевой контроллер Castle EP4' %}\r\n{% set ep_four_price = data.cena_ep4 %}\r\n{% set ep_four_cost = (ep_four_price * ep_four_vol) %}\r\n\r\n{% set controllers_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\r\n\r\n{# Master Controller calculation #}\r\n{% if data.finger_vol > 0 %}\r\n  {% set master_controller_name = 'USB-считыватель настольный BioSmart FS-80' %}\r\n  {% set master_controller_price = data.cena_bio_reader_master %}\r\n{% else %}\r\n  {% if data.tip_kart == 'Em-Marine' or data.tip_kart == 'HID'%}\r\n    {% set master_controller_name = 'Контрольный считыватель карт форматов EM-Marine и HID настольный «Castle-Reader» с интерфейсом USB' %}\r\n    {% set master_controller_price = data.cena_reader_master_em_marine %}\r\n  {% elseif data.tip_kart == 'Mifare' %}\r\n    {% set master_controller_name = 'Контрольный считыватель «ACR1252U USB NFC Reader III» Mifare' %}\r\n    {% set master_controller_price = data.cena_reader_master_mifare %}\r\n  {% endif %}\r\n{% endif %}\r\n\r\n{% set master_controller_vol = 1 %}\r\n{% set master_controller_cost = (master_controller_price * master_controller_vol) %}\r\n\r\n{# Camera calculation #}\r\n{% if data.face_vol > 0 %}\r\n  {% set camera_name = 'Видеокамера сетевая (IP) TSi-Pe25VP' %}\r\n  {% set camera_price = data.cena_camera %}\r\n  {% set camera_vol = (r_oneside + r_twoside + turnstile_vol * 2) %}\r\n  {% set camera_cost = (camera_price * camera_vol) %}\r\n{% endif %}\r\n\r\n{# Server Face Ident calculation #}\r\n{% if camera_vol > 0 %}\r\n  {% if camera_vol <= 4 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\r\n    {% set server_desc %} \r\n    <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i7</li>\r\n      <li>Оперативная память: 8 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_100_rack %}\r\n    {% else %}\r\n    {% set server_name = 'Сервер \"AGRG VideoСервер vS 10 2988-134 2MPx.25fps.16TbR5\"' %}\r\n    {% set server_desc %} \r\n      <p>Сервер СКУД для организации доступа при помощи идентификации лиц, включая ПО:</p>\r\n      <ul>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Подключение видеоканала (лицензия на 10 каналов)</li>\r\n        <li>Программное обеспечение - Система защиты Guardant</li>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Ядро системы</li>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Интеграция СКУД Castle</li>\r\n      </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_face_10 %}\r\n  {% endif %}\r\n  {% set server_vol = (camera_vol / 10)|round(0, 'ceil') %}\r\n  {% set server_cost = (server_price * server_vol) %}\r\n{% endif %}\r\n\r\n{# Server calculation #}\r\n{% if data.server_skud %}\r\n  {% if controllers_vol > 0 and controllers_vol <= 20 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер vS SKUD.Castle.1Tb.m0.R1\":' %}\r\n    {% set server_desc %} \r\n    <p>Базовая платформа сервера СКУД для установки в стойку. Устанавливается в стойку (Rackmount 19&quot;, 1U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция). Максимально доступное решение:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: HDD 1Tb NAS</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 1U</li>\r\n      <li>Размеры (ШхГхВ): 430x250x44 мм</li>\r\n      <li>Питание: 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud %}\r\n  {% elseif controllers_vol > 20 and controllers_vol <= 50 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1T2.m1.MT\"' %}\r\n    {% set server_desc %} \r\n    <p>Базовая платформа сервера СКУД в корпусе MiniTower (компактное отдельностоящее исполнение). Поставляется с расширенной системой хранения архива событий базы данных. Оптимальное решение для объектов, на которых не используются серверные стойки для сетевого и серверного оборудования:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: HDD 2Tb Enterprise</li>\r\n      <li>Тип монтажа: отдельностоящий настольный</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_50_mt %}\r\n  {% elseif controllers_vol > 50 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\r\n    {% set server_desc %} \r\n    <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i7</li>\r\n      <li>Оперативная память: 8 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_100_rack %}\r\n  {% endif %}\r\n  \r\n  {% set server_vol = 1 %}\r\n  {% set server_cost = (server_price * server_vol) %}\r\n{% endif %}\r\n\r\n{# URM calculation #}\r\n{% if data.urm_skud_check %}\r\n  {% if data.urm_skud_type == 'mt_win' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.MT\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД в корпусе MiniTower (компактное отдельностоящее исполнение):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>Тип монтажа: настольный</li>\r\n      <li>Размеры (ШхГхВ): 230x264x112 мм</li>\r\n      <li>Питание: 220V, &gt;160W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set urm_price = data.cena_urm_skud %}\r\n  {% elseif data.urm_skud_type == 'vesa_win' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.NUC\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД в компактном корпусе с креплением VESA (для установки на монитор с аналогичным типом крепления). Компактная и эстетичная модель:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>Тип монтажа: VESA 100</li>\r\n      <li>Размеры (ШхГхВ): 115х111х48 мм</li>\r\n      <li>Питание: 220V, &gt;65W</li>\r\n    </ul>\r\n    {% endset %}    \r\n    {% set urm_price = data.cena_urm_skud_vesa %}\r\n  {% elseif data.urm_skud_type == 'mt_linux' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.RSPB\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД на базе ОС Линукс (ультракомпактное отдельностоящее исполнение). Минимальное энергопотребление, отказоустойчивость ОС Линукс, высокая скорость загрузки и выгодная цена для заказчика:</p>\r\n    <ul>\r\n      <li>Процессор: ARM</li>\r\n      <li>Оперативная память: 1 Гб</li>\r\n      <li>ОС: Ubuntu</li>\r\n      <li>Тип монтажа: настольный</li>\r\n      <li>Размеры (ШхГхВ): 100х70х40 мм</li>\r\n      <li>Питание: 220V</li>\r\n    </ul>\r\n    {% endset %}    \r\n    {% set urm_price = data.cena_urm_skud_rspb %}\r\n  {% endif %}\r\n\r\n{% set urm_vol = data.urm_skud %}\r\n{% set urm_cost = (urm_price * urm_vol) %}\r\n{% endif %}\r\n\r\n{# Hardware subtotal #}\r\n\r\n{% set total_hard_cost = (card_cost + reader_cost + bbp_mech_cost + bbp_mag_cost + lock_mech_cost + lock_mag_cost + corner_cost + turnstile_cost + cardcapture_cost + camera_cost + ep_cost + ep_two_cost + ep_four_cost + button_cost + closer_cost + battery_cost + detector_door_cost + detector_controller_cost + master_controller_cost + server_cost + urm_cost) %}\r\n{% set hard_nds = (total_hard_cost * 20 / 120) %}\r\n{% set total_hard_no_nds = (total_hard_cost - hard_nds) %}\r\n\r\n{# Users cost calculation #}\r\n{% if users_total <= '50' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 50 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_50 %}\r\n  {% set user_cost = (user_price * user_vol) %}\r\n  \r\n  {% elseif users_total > '50' and users_total <= '1000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 1000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_1000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n\r\n  {% elseif users_total > '1000' and users_total <= '10000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 10 000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_10000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n\r\n  {% elseif users_total > '10000' and users_total <= '25000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 25 000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_25000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n{% endif %}\r\n\r\n{# Extra Modules calculation #}\r\n{% if data.module_po_castle_time_track %}\r\n{% set time_track_name = 'Дополнительный модуль ПО Castle «Учет рабочего времени»' %}\r\n{% set time_track_desc %} \r\n<ul>\r\n  <li>Создание рабочих графиков для сотрудников</li>\r\n  <li>Получение отчетов за любой исторический период</li>\r\n  <li>Полный журнал отклонений от рабочего графика</li>\r\n  <li>Журнал неявок, опозданий и других временных нарушений рабочей дисциплины</li>\r\n</ul>\r\n{% endset %}\r\n{% set time_track_vol = 1 %}\r\n{% set time_track_price = data.cena_module_time_track %}\r\n{% set time_track_cost = (time_track_price * time_track_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_pass_print %}\r\n{% set pass_print_name = 'Дополнительный модуль ПО Castle «Создание и печать пропусков»' %}\r\n{% set pass_print_desc %} \r\n<ul>\r\n  <li>Создание и редактирование шаблонов графического оформления пропусков</li>\r\n  <li>Назначение шаблонов пропусков для сотрудников</li>\r\n  <li>Печать пропусков на основании шаблонов и персональных данных сотрудников</li>\r\n</ul>\r\n{% endset %}\r\n{% set pass_print_vol = 1 %}\r\n{% set pass_print_price = data.cena_module_pass_print %}\r\n{% set pass_print_cost = (pass_print_price * pass_print_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_event_monitor %}\r\n{% set event_monitor_name = 'Дополнительный модуль «Мониторинг событий (фотоидентификация)»' %}\r\n{% set event_monitor_desc %} \r\n<ul>\r\n  <li>Наблюдение в режиме реального времени за событиями, происходящими в системе. При запросе прохода сотрудником отображается его учетная карточка из базы, включающая фотографию.</li>\r\n</ul>\r\n{% endset %}\r\n{% set event_monitor_vol = 1 %}\r\n{% set event_monitor_price = data.cena_module_event_monitor %}\r\n{% set event_monitor_cost = (event_monitor_price * event_monitor_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_1c_integration %}\r\n{% set onec_integration_name = 'Дополнительный модуль «Интеграция с 1С»' %}\r\n{% set onec_integration_desc %} \r\n<ul>\r\n  <li>Дополняет функции модуля &laquo;Учет рабочего времени&raquo;</li>\r\n  <li>Автоматическая передача табеля (форма Т-13) в &laquo;1C: Предприятие&raquo;</li>\r\n</ul>\r\n{% endset %}\r\n{% set onec_integration_vol = 1 %}\r\n{% set onec_integration_price = data.cena_module_1c_integration %}\r\n{% set onec_integration_cost = (onec_integration_price * onec_integration_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_pass_ext or data.cardcapture_check %}\r\n{% set pass_ext_name = 'Дополнительный модуль «Расширенная поддержка пропусков посетителей»' %}\r\n{% set pass_ext_desc %} \r\n<ul>\r\n  <li>Интерфейс для выдачи/сбора карт (АРМ &laquo;Бюро пропусков&raquo;), при выдаче происходит привязка карты к паспорту или другому документу посетителя</li>\r\n  <li>Хранение истории выдачи карт</li>\r\n  <li>Задание списка карт посетителей</li>\r\n</ul>\r\n{% endset %}\r\n{% set pass_ext_vol = 1 %}\r\n{% set pass_ext_price = data.cena_module_pass_ext %}\r\n{% set pass_ext_cost = (pass_ext_price * pass_ext_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_event_response %}\r\n{% set event_response_name = 'Дополнительный модуль «Реакция на события»' %}\r\n{% set event_response_desc %} \r\n<ul>\r\n  <li>Задание списка действий, которые будут выполняться системой автоматически при наступлении каких-либо событий. Например, возможна отправка SMS-сообщения на указанный телефонный номер.</li>\r\n</ul>\r\n{% endset %}\r\n{% set event_response_vol = 1 %}\r\n{% set event_response_price = data.cena_module_event_response %}\r\n{% set event_response_cost = (event_response_price * event_response_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_data_sync %}\r\n{% set data_sync_name = 'Дополнительный модуль «Синхронизация данных»' %}\r\n{% set data_sync_desc %} \r\n<ul>\r\n  <li>Автоматическая синхронизация списка сотрудников в СКУД по внешней базе данных существующей корпоративной системы.</li>\r\n</ul>\r\n{% endset %}\r\n{% set data_sync_vol = 1 %}\r\n{% set data_sync_price = data.cena_module_data_sync %}\r\n{% set data_sync_cost = (data_sync_price * data_sync_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_doc_ocr %}\r\n{% set doc_ocr_name = 'Дополнительный модуль «Распознавание документов»' %}\r\n{% set doc_ocr_desc %} \r\n<ul>\r\n  <li>Автоматическое сканирование и распознавание документов при выдаче временного пропуска посетителю.</li>\r\n</ul>\r\n{% endset %}\r\n{% set doc_ocr_vol = 1 %}\r\n{% set doc_ocr_price = data.cena_module_doc_ocr %}\r\n{% set doc_ocr_cost = (doc_ocr_price * doc_ocr_vol) %}\r\n{% endif %}\r\n\r\n{# Face Ident per camera calculation #}\r\n{% if camera_vol > 0 %}\r\n{% set face_ident_camera_name = 'Модуль «Идентификация лица» (лицензия на одну камеру)' %}\r\n{% set face_ident_camera_price = data.cena_module_face_ident_camera %}\r\n{% set face_ident_camera_vol = camera_vol %}\r\n{% set face_ident_camera_cost = (face_ident_camera_price * face_ident_camera_vol) %}\r\n{% endif %}\r\n\r\n{# Face ident calculation #}\r\n{% if data.face_vol > 0 and data.face_vol <= 10 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 10 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_10 %}\r\n\r\n{% elseif data.face_vol > 10 and data.face_vol <= 50 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 50 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_50 %}\r\n\r\n{% elseif data.face_vol > 50 and data.face_vol <= 100 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 100 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_100 %}\r\n\r\n{% elseif data.face_vol > 100 and data.face_vol <= 1000 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 1000 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_1000 %}\r\n{% endif %}\r\n\r\n{% set face_ident_desc %}\r\n<ul>\r\n  <li>Обязательный модуль, если выбрана опция идентификации лиц.</li>\r\n</ul>\r\n{% endset %}\r\n{% set face_ident_vol = 1 %}\r\n{% set face_ident_cost = (face_ident_price * face_ident_vol) %}\r\n\r\n{# Soft Subtotal #}\r\n{% set total_soft_cost = (user_cost + time_track_cost + pass_print_cost + event_monitor_cost + onec_integration_cost + pass_ext_cost + event_response_cost + data_sync_cost + doc_ocr_cost + face_ident_camera_cost + face_ident_cost) %}\r\n\r\n{# Grand Total #}\r\n{% set total = (total_hard_cost + total_soft_cost) %}\r\n\r\n{# Message Body #}\r\n\r\n<table width=\"100%\" style=\"font-size:14px;line-height:18px\" cellpadding=\"10\">\r\n  <colgroup width=\"50%\"></colgroup>\r\n  <colgroup width=\"10%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <thead>\r\n    <tr style=\"background: #505050; color:#fff\">\r\n      <td>Товары (работы, услуги)</td>\r\n      <td>Кол-во</td>\r\n      <td>Цена (с НДС)</td>\r\n      <td>Сумма (с НДС)</td>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {# Card #}\r\n    {% if card_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ card_name }}</td>  \r\n      <td>{{ card_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ card_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ card_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# Reader #}\r\n    {% if reader_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ reader_name }}</td>\r\n      <td>{{ reader_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ reader_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ reader_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# BBP #}\r\n    {% if bbp_mech_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_mech_name }}</td>\r\n      <td>{{ bbp_mech_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_mech_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_mech_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if bbp_mag_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_mag_name }}</td>\r\n      <td>{{ bbp_mag_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_mag_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_mag_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# BBP Gate #}\r\n    {% if bbp_gate_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_gate_name }}</td>\r\n      <td>{{ bbp_gate_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_gate_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_gate_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# Lock #}\r\n    {% if lock_mech_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ lock_mech_name }}</td>\r\n      <td>{{ lock_mech_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ lock_mech_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ lock_mech_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if lock_mag_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ lock_mag_name }}</td>\r\n      <td>{{ lock_mag_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ lock_mag_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ lock_mag_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Corner #}\r\n    {% if corner_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ corner_name }}</td>\r\n      <td>{{ corner_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ corner_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ corner_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Turnstile #}\r\n    {% if turnstile_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ turnstile_name }}</td>\r\n      <td>{{ turnstile_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ turnstile_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ turnstile_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {% if cardcapture_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ cardcapture_name }}</td>\r\n      <td>{{ cardcapture_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ cardcapture_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ cardcapture_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Controller #}\r\n    {% if ep_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_name }}</td>\r\n      <td>{{ ep_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if ep_two_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_two_name }}</td>\r\n      <td>{{ ep_two_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_two_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_two_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if ep_four_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_four_name }}</td>\r\n      <td>{{ ep_four_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_four_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_four_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Button #}\r\n    {% if button_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ button_name }}</td>\r\n      <td>{{ button_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ button_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ button_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Closer #}\r\n    {% if closer_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ closer_name }}</td>\r\n      <td>{{ closer_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ closer_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ closer_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Battery #}\r\n    {% if battery_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ battery_name }}</td>\r\n      <td>{{ battery_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ battery_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ battery_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Battery Gate #}\r\n    {% if battery_gate_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ battery_gate_name }}</td>\r\n      <td>{{ battery_gate_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ battery_gate_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ battery_gate_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Door Detector #}\r\n    {% if detector_door_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ detector_door_name }}</td>\r\n      <td>{{ detector_door_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ detector_door_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ detector_door_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Controller Detector #}\r\n    {% if detector_controller_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ detector_controller_name }}</td>\r\n      <td>{{ detector_controller_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ detector_controller_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ detector_controller_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Master Controller #}\r\n    {% if master_controller_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ master_controller_name }}</td>\r\n      <td>{{ master_controller_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ master_controller_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ master_controller_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Camera #}\r\n    {% if camera_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ camera_name }}</td>\r\n      <td>{{ camera_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ camera_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ camera_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Server #}\r\n    {% if data.server_skud or camera_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ server_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ server_desc}}</p></td>\r\n      <td>{{ server_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ server_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ server_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# URM #}\r\n    {% if data.urm_skud_check %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ urm_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ urm_desc}}</p></td>\r\n      <td>{{ urm_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ urm_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ urm_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n  </tbody>\r\n</table>\r\n\r\n{# hardware subtotal #}\r\n<table width=\"100%\" style=\"font-size: 14px;line-height: 18px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>  \r\n  <tr>\r\n    <td style=\"text-align:right\">Итого (товары, услуги) без НДС: </td>\r\n    <td style=\"text-align:left\">{{ total_hard_no_nds|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n  <tr>\r\n    <td style=\"text-align:right\">Сумма НДС (20%): </td>\r\n    <td style=\"text-align:left\">{{ hard_nds|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n  <tr>\r\n    <td style=\"text-align:right\">Всего оборудование: </td>\r\n    <td style=\"text-align:left\">{{ total_hard_cost|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n</table>\r\n\r\n<table width=\"100%\" style=\"font-size:14px;line-height:18px\" cellpadding=\"10\">\r\n  <colgroup width=\"50%\"></colgroup>\r\n  <colgroup width=\"10%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <thead>\r\n    <tr style=\"background: #505050; color:#fff\">\r\n      <td>Товары (программное обеспечение)</td>\r\n      <td>Кол-во</td>\r\n      <td>Цена (с НДС)</td>\r\n      <td>Сумма (с НДС)</td>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {# User #}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ user_name }}</td>\r\n      <td>{{ user_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ user_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ user_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    \r\n    {# Time Track #}\r\n    {% if data.module_po_castle_time_track %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ time_track_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ time_track_desc}}</p></td>\r\n      <td>{{ time_track_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ time_track_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ time_track_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# pass_print #}\r\n    {% if data.module_po_castle_pass_print %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ pass_print_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ pass_print_desc}}</p></td>\r\n      <td>{{ pass_print_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ pass_print_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ pass_print_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# event_monitor #}\r\n    {% if data.module_po_castle_event_monitor %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ event_monitor_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ event_monitor_desc}}</p></td>\r\n      <td>{{ event_monitor_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ event_monitor_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ event_monitor_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# 1c_integration #}\r\n    {% if data.module_po_castle_1c_integration %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ onec_integration_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ onec_integration_desc}}</p></td>\r\n      <td>{{ onec_integration_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ onec_integration_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ onec_integration_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# pass_ext #}\r\n    {% if data.module_po_castle_pass_ext %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ pass_ext_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ pass_ext_desc}}</p></td>\r\n      <td>{{ pass_ext_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ pass_ext_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ pass_ext_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# event_response #}\r\n    {% if data.module_po_castle_event_response %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ event_response_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ event_response_desc}}</p></td>\r\n      <td>{{ event_response_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ event_response_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ event_response_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# data_sync #}\r\n    {% if data.module_po_castle_data_sync %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ data_sync_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ data_sync_desc}}</p></td>\r\n      <td>{{ data_sync_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ data_sync_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ data_sync_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# doc_ocr #}\r\n    {% if data.module_po_castle_doc_ocr %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ doc_ocr_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ doc_ocr_desc}}</p></td>\r\n      <td>{{ doc_ocr_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ doc_ocr_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ doc_ocr_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# face_ident_camera #}\r\n    {% if camera_vol > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ face_ident_camera_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ face_ident_camera_desc}}</p></td>\r\n      <td>{{ face_ident_camera_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ face_ident_camera_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ face_ident_camera_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# face_ident #}\r\n    {% if data.face_vol > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ face_ident_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ face_ident_desc}}</p></td>\r\n      <td>{{ face_ident_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ face_ident_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ face_ident_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n  </tbody>\r\n</table>\r\n\r\n{# software subtotal #}\r\n<table width=\"100%\" style=\"font-size: 14px;line-height: 18px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n    <tr>\r\n      <td style=\"text-align:right\">Итого (программное обеспечение): </td>\r\n      <td style=\"text-align:left\">{{ total_soft_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:right\">Сумма НДС (20%): </td>\r\n      <td style=\"text-align:left\">—</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:right\">Всего ПО: </td>\r\n      <td style=\"text-align:left\">{{ total_soft_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n</table>\r\n\r\n<p>НДС не облагается согласно подпункту 26 пункта 2 статьи 149 НК РФ.</p>\r\n<table width=\"100%\" style=\"font-size: 18px;line-height: 24px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <tr>\r\n    <td style=\"text-align:left\">Общая сумма КП (оборудование + программное обеспечение):</td>\r\n    <td style=\"text-align:left\">{{ total|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n</table>"
      excluded_elements:
        reader_ordinary: reader_ordinary
        reader_eywa_classics: reader_eywa_classics
        reader_eywa_art: reader_eywa_art
        processed_text: processed_text
        processed_text_01: processed_text_01
        distance_30_less: distance_30_less
        distance_30_more: distance_30_more
        mechanical_lock_img_01: mechanical_lock_img_01
        magnet_lock_img_01: magnet_lock_img_01
        mechanical_lock_img: mechanical_lock_img
        magnet_lock_img: magnet_lock_img
        turnstile_check: turnstile_check
        turnstile_tripod_img: turnstile_tripod_img
        turnstile_gate_img: turnstile_gate_img
        cena_karty_em_marine: cena_karty_em_marine
        cena_karty_hid: cena_karty_hid
        cena_karty_mifare: cena_karty_mifare
        cena_po_castle_50: cena_po_castle_50
        cena_po_castle_1000: cena_po_castle_1000
        cena_po_castle_10000: cena_po_castle_10000
        cena_po_castle_25000: cena_po_castle_25000
        cena_reader_em_marine_ordinary: cena_reader_em_marine_ordinary
        cena_reader_hid_ordinary: cena_reader_hid_ordinary
        cena_reader_mifare_ordinary: cena_reader_mifare_ordinary
        cena_bio_reader_em_marine: cena_bio_reader_em_marine
        cena_bio_reader_hid: cena_bio_reader_hid
        cena_bio_reader_mifare: cena_bio_reader_mifare
        cena_reader_em_marine_premium: cena_reader_em_marine_premium
        cena_reader_hid_premium: cena_reader_hid_premium
        cena_reader_mifare_premium: cena_reader_mifare_premium
        cena_reader_eywa_classics: cena_reader_eywa_classics
        cena_reader_eywa_art: cena_reader_eywa_art
        cena_ep: cena_ep
        cena_ep2: cena_ep2
        cena_ep4: cena_ep4
        cena_mechanical_lock: cena_mechanical_lock
        cena_magnetlock: cena_magnetlock
        cena_bbp_20: cena_bbp_20
        cena_bbp_50: cena_bbp_50
        cena_ivepr: cena_ivepr
        cena_battery_dt1207: cena_battery_dt1207
        cena_battery_dt1212: cena_battery_dt1212
        cena_button_ordinary: cena_button_ordinary
        cena_montage_corner: cena_montage_corner
        cena_closer_tantos_ts_dc085: cena_closer_tantos_ts_dc085
        cena_detector_door: cena_detector_door
        cena_detector_controller: cena_detector_controller
        cena_reader_master_em_marine: cena_reader_master_em_marine
        cena_reader_master_mifare: cena_reader_master_mifare
        cena_bio_reader_master: cena_bio_reader_master
        cena_camera: cena_camera
        cena_server_skud: cena_server_skud
        cena_server_face_10: cena_server_face_10
        cena_server_skud_50_rack: cena_server_skud_50_rack
        cena_server_skud_100_rack: cena_server_skud_100_rack
        cena_server_skud_50_mt: cena_server_skud_50_mt
        cena_urm_skud: cena_urm_skud
        cena_urm_skud_vesa: cena_urm_skud_vesa
        cena_urm_skud_rspb: cena_urm_skud_rspb
        cena_turnstile_tripod: cena_turnstile_tripod
        cena_turnstile_gate: cena_turnstile_gate
        cena_cardcapture: cena_cardcapture
        cena_module_time_track: cena_module_time_track
        cena_module_pass_print: cena_module_pass_print
        cena_module_event_monitor: cena_module_event_monitor
        cena_module_1c_integration: cena_module_1c_integration
        cena_module_pass_ext: cena_module_pass_ext
        cena_module_event_response: cena_module_event_response
        cena_module_data_sync: cena_module_data_sync
        cena_module_doc_ocr: cena_module_doc_ocr
        cena_module_face_recog: cena_module_face_recog
        cena_module_face_ident_10: cena_module_face_ident_10
        cena_module_face_ident_50: cena_module_face_ident_50
        cena_module_face_ident_100: cena_module_face_ident_100
        cena_module_face_ident_1000: cena_module_face_ident_1000
        cena_module_face_ident_camera: cena_module_face_ident_camera
        horizontal_rule: horizontal_rule
        random: random
        fake: fake
      ignore_access: false
      exclude_empty: true
      exclude_empty_checkbox: true
      exclude_attachments: true
      html: true
      attachments: true
      twig: true
      theme_name: ''
      parameters: {  }
      debug: false
variants: {  }
