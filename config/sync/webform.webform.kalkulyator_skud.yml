uuid: 8c95857f-8fcf-43fe-8853-27f5100e7282
langcode: ru
status: closed
dependencies:
  module:
    - webform_entity_print
third_party_settings:
  webform_entity_print:
    template:
      header: ''
      footer: ''
      css: ''
    export_types:
      pdf:
        enabled: true
        link_text: ''
        link_attributes: {  }
open: null
close: null
weight: 0
uid: 1
template: false
archive: false
id: kalkulyator_skud
title: 'Калькулятор СКУД для дверей'
description: ''
category: ''
elements: "cards_type_volume:\n  '#type': fieldset\n  '#title': 'Тип и количество карт доступа'\n  '#attributes':\n    class:\n      - flex-width-auto\n  '#format': details-closed\n  flexbox_cards:\n    '#type': webform_flexbox\n    '#states':\n      invisible-slide:\n        ':input[name=\"face_vol\"]':\n          value:\n            greater: '0'\n    '#align_items': flex-end\n    kolichestvo_kart:\n      '#type': number\n      '#title': 'Количество карт пользователей'\n      '#help_title': '<none>'\n      '#help': '&nbsp;Количество людей в системе, включая гостевые карты.'\n      '#description_display': tooltip\n      '#help_display': title_after\n      '#size': '7'\n      '#prepopulate': true\n      '#flex': 0\n      '#default_value': '0'\n      '#wrapper_attributes':\n        class:\n          - long-label\n      '#min': 0\n      '#max': 25000\n      '#step': 1\n    tip_kart:\n      '#type': select\n      '#title': 'Тип карт'\n      '#help_title': '<none>'\n      '#help': |\n        <p><strong>Em-Marine</strong> &mdash; самые бюджетные карты. В них применяется амплитудная модуляция, что позволяет максимально удешевить как сами карты, так и считыватели. Однако они обладают низкой защитой от копирования.</p>\n        <p><strong>HID</strong> &mdash; самые дорогие карты, для которых требуются более дорогостоящие считыватели. В них используется частотная модуляция, что обеспечивает высокую помехозащищенность и дальность идентификации до одного метра. Отличаются высокой защитой от копирования.</p>\n        <p><strong>Mifare</strong> &mdash; объединяет несколько типов микросхем, часть которых применяется в системах государственной и банковской идентификации. Карты Mifare характеризуются невысокой дальностью считывания, однако их почти невозможно подделать.</p>\n        \n      '#help_display': title_after\n      '#prepopulate': true\n      '#options':\n        Em-Marine: Em-Marine\n        HID: HID\n        Mifare: Mifare\n      '#flex': 0\n      '#wrapper_attributes':\n        class:\n          - long-label\n    card_type:\n      '#type': processed_text\n      '#flex': 0\n      '#wrapper_attributes':\n        class:\n          - preview\n      '#text': '<img alt=\"Односторонняя дверь\" src=\"/themes/custom/skud_mb/images/calc/card_type.jpg\" height=\"75\" />'\n      '#format': full_html\nface_recog_check:\n  '#type': checkbox\n  '#title': 'Требуется биометрический доступ'\n  '#help_display': title_after\n  '#return_value': checked\nreaders_design:\n  '#type': fieldset\n  '#title': 'Дизайн считывателей'\n  '#states':\n    invisible-slide:\n      ':input[name=\"face_recog_check\"]':\n        checked: true\n      ':input[name=\"tip_kart\"]':\n        filled: true\n  flexbox_readers:\n    '#type': webform_flexbox\n    '#states':\n      invisible-slide:\n        ':input[name=\"tip_kart\"]':\n          value: HID\n    readers_style:\n      '#type': select\n      '#title': 'Вид считывателей'\n      '#help': 'Вы можете оставить в расчете считыватели&nbsp;стандартного вида&nbsp; или выбрать один из вариантов уникальных дизайнерских <a href=\"https://readers.agrg.ru\">считывателей Eywa</a>&nbsp;премиум-класса, выполненных из натурального дерева по HiTech-технологии.'\n      '#help_display': title_after\n      '#options':\n        ordinary: Обычный\n        eywa_classics: 'Eywa Classics'\n        eywa_art: 'Eywa Art'\n      '#default_value': ordinary\n    reader_ordinary:\n      '#type': processed_text\n      '#flex': 0\n      '#states':\n        visible:\n          ':input[name=\"readers_style\"]':\n            value: ordinary\n      '#wrapper_attributes':\n        class:\n          - preview\n      '#text': '<img alt=\"Обычный считыватель карт доступа\" src=\"/themes/custom/skud_mb/images/calc/reader_ordinary.jpg\" height=\"75\" />'\n      '#format': full_html\n    reader_eywa_classics:\n      '#type': processed_text\n      '#flex': 0\n      '#states':\n        visible:\n          ':input[name=\"readers_style\"]':\n            value: eywa_classics\n      '#wrapper_attributes':\n        class:\n          - preview\n      '#text': '<img alt=\"Дизайнерский считыватель Eywa Classics\" src=\"/themes/custom/skud_mb/images/calc/reader_eywa_classics.jpg\" height=\"75\" />'\n      '#format': full_html\n    reader_eywa_art:\n      '#type': processed_text\n      '#flex': 0\n      '#states':\n        visible:\n          ':input[name=\"readers_style\"]':\n            value: eywa_art\n      '#wrapper_attributes':\n        class:\n          - preview\n      '#text': '<img alt=\"Дизайнерский считыватель Eywa Art\" src=\"/themes/custom/skud_mb/images/calc/reader_eywa_art.jpg\" height=\"75\" />'\n      '#format': full_html\nbiometriya:\n  '#type': fieldset\n  '#title': Биометрия\n  '#title_display': invisible\n  '#states':\n    visible-slide:\n      ':input[name=\"face_recog_check\"]':\n        checked: true\n  '#attributes':\n    class:\n      - flex-width-auto\n  flexbox_bio:\n    '#type': webform_flexbox\n    finger_vol:\n      '#type': number\n      '#title': 'По отпечаткам пальцев (количество)'\n      '#help_title': '<none>'\n      '#help': 'Количество людей в системе с доступом по отпечаткам пальцев.'\n      '#description_display': tooltip\n      '#help_display': title_after\n      '#size': '7'\n      '#flex': 0\n      '#states':\n        invisible-slide:\n          ':input[name=\"face_vol\"]':\n            value:\n              greater: '0'\n      '#default_value': '0'\n      '#wrapper_attributes':\n        class:\n          - long-label\n      '#min': 0\n      '#max': 25000\n      '#step': 1\n    face_vol:\n      '#type': number\n      '#title': 'По лицам (количество)'\n      '#help_title': '<none>'\n      '#help': 'Количество людей в системе с доступом по идентификации лиц. При выборе данного способа идентификации проход по картам и отпечаткам пальцев становится недоступным.'\n      '#description_display': tooltip\n      '#help_display': title_after\n      '#size': '7'\n      '#flex': 0\n      '#states':\n        disabled:\n          ':input[name=\"face_recog_check\"]':\n            unchecked: true\n      '#default_value': '0'\n      '#wrapper_attributes':\n        class:\n          - long-label\n      '#min': 0\n      '#max': 25000\n      '#step': 1\ndoors_type_volume:\n  '#type': fieldset\n  '#title': 'Точки прохода (двери)'\n  flexbox_door:\n    '#type': webform_flexbox\n    oneside_door_volume:\n      '#type': number\n      '#title': 'Количество дверей со считывателем снаружи и кнопкой выхода изнутри (односторонние двери)'\n      '#help_title': '<none>'\n      '#help': 'Односторонняя дверь &mdash; дверь, оборудованная считывателем только&nbsp;снаружи. Внутри она открывается кнопкой выхода.'\n      '#description_display': tooltip\n      '#help_display': title_after\n      '#flex': 0\n      '#default_value': '0'\n      '#wrapper_attributes':\n        class:\n          - long-label\n      '#min': 0\n      '#max': 10000\n      '#step': 1\n    processed_text:\n      '#type': processed_text\n      '#flex': 0\n      '#wrapper_attributes':\n        class:\n          - preview\n      '#text': '<img alt=\"Односторонняя дверь\" src=\"/themes/custom/skud_mb/images/calc/1side-door.jpg\" />'\n      '#format': full_html\n  flexbox_door_1:\n    '#type': webform_flexbox\n    twoside_door_volume:\n      '#type': number\n      '#title': 'Количество дверей с двумя считывателями — по одному снаружи и внутри (двухсторонние двери)'\n      '#help_title': '<none>'\n      '#help': 'Двухсторонняя дверь &mdash; дверь, оборудованная считывателями снаружи и внутри помещения.'\n      '#description_display': tooltip\n      '#help_display': title_after\n      '#flex': 0\n      '#default_value': '0'\n      '#wrapper_attributes':\n        class:\n          - long-label\n      '#attributes':\n        class:\n          - long-label\n      '#min': 0\n      '#max': 10000\n      '#step': 1\n    processed_text_01:\n      '#type': processed_text\n      '#flex': 0\n      '#wrapper_attributes':\n        class:\n          - preview\n      '#text': |\n        <p><img alt=\"Односторонняя дверь\" src=\"/themes/custom/skud_mb/images/calc/2side-door.jpg\" /></p>\n        \n      '#format': full_html\n  flexbox_distance:\n    '#type': webform_flexbox\n    door_distance:\n      '#type': select\n      '#title': 'Расстояние между дверьми'\n      '#options':\n        30less: 'меньше 30 м'\n        30more: 'больше 30 м'\n    distance_30_less:\n      '#type': processed_text\n      '#states':\n        visible-slide:\n          ':input[name=\"door_distance\"]':\n            value: 30less\n      '#wrapper_attributes':\n        class:\n          - preview\n      '#text': |\n        <p><img alt=\"Односторонняя дверь\" src=\"/themes/custom/skud_mb/images/calc/door-distance-30-less.jpg\" /></p>\n        \n      '#format': full_html\n    distance_30_more:\n      '#type': processed_text\n      '#states':\n        visible-slide:\n          ':input[name=\"door_distance\"]':\n            value: 30more\n      '#wrapper_attributes':\n        class:\n          - preview\n      '#text': |\n        <p><img alt=\"Односторонняя дверь\" src=\"/themes/custom/skud_mb/images/calc/door-distance-30-more.jpg\" /></p>\n        \n      '#format': full_html\n  flexbox_lock_type:\n    '#type': webform_flexbox\n    lock_type:\n      '#type': select\n      '#title': 'Тип замков для дверей'\n      '#help_title': '<none>'\n      '#help': |\n        <strong>Электромеханическая защелка</strong> &mdash; продвинутый вариант наиболее распространенного запирающего механизма, характерного для обычных дверей. При подаче электрического импульса защелка разблокируется и остается открытой до тех пор, пока дверь вновь не будет закрыта.<br />\n        <br />\n        <strong>Электромагнитный замок</strong> &mdash; замок, состоящий из электромагнита и притягивающейся планки двери. Монтируется в верхней части дверного проема.&nbsp;<br />\n        <br />\n        <strong>Разные</strong> &mdash; данный вариант позволяет отдельно указать требуемое количество защелок и замков.\n        \n      '#help_display': title_after\n      '#options':\n        mechanical: Электромеханический\n        magnet: Электромагнитный\n        mixed: Разные\n    mechanical_lock_img_01:\n      '#type': processed_text\n      '#states':\n        visible-slide:\n          ':input[name=\"lock_type\"]':\n            value: mechanical\n      '#wrapper_attributes':\n        class:\n          - preview\n      '#text': |\n        <p><img alt=\"Односторонняя дверь\" src=\"/themes/custom/skud_mb/images/calc/mechanical_lock.jpg\" /></p>\n        \n      '#format': full_html\n    magnet_lock_img_01:\n      '#type': processed_text\n      '#states':\n        visible-slide:\n          ':input[name=\"lock_type\"]':\n            value: magnet\n      '#wrapper_attributes':\n        class:\n          - preview\n      '#text': |\n        <p><img alt=\"Односторонняя дверь\" src=\"/themes/custom/skud_mb/images/calc/magnet_lock.jpg\" /></p>\n        \n      '#format': full_html\n    raznye_zamki:\n      '#type': fieldset\n      '#title': 'Разные замки'\n      '#title_display': invisible\n      '#states':\n        visible-slide:\n          ':input[name=\"lock_type\"]':\n            value: mixed\n      flexbox_mechanical_lock:\n        '#type': webform_flexbox\n        '#states':\n          visible-slide:\n            ':input[name=\"lock_type\"]':\n              value: mixed\n        mechanical_lock_volume:\n          '#type': number\n          '#title': 'Количество электромеханических защелок'\n          '#help_title': '<none>'\n          '#help': 'Укажите количество электромеханических защелок.'\n          '#description_display': tooltip\n          '#help_display': title_before\n          '#flex': 0\n          '#default_value': '0'\n          '#wrapper_attributes':\n            class:\n              - long-label\n          '#attributes':\n            class:\n              - long-label\n          '#min': 0\n          '#max': 10000\n          '#step': 1\n        mechanical_lock_img:\n          '#type': processed_text\n          '#flex': 0\n          '#wrapper_attributes':\n            class:\n              - preview\n          '#text': |\n            <p><img alt=\"Односторонняя дверь\" src=\"/themes/custom/skud_mb/images/calc/mechanical_lock.jpg\" /></p>\n            \n          '#format': full_html\n      flexbox_magnet_lock:\n        '#type': webform_flexbox\n        '#states':\n          visible-slide:\n            ':input[name=\"lock_type\"]':\n              value: mixed\n        magnet_lock_volume:\n          '#type': number\n          '#title': 'Количество электромагнитных замков'\n          '#help_title': '<none>'\n          '#help': 'Укажите количество электромагнитных замков.'\n          '#description_display': tooltip\n          '#help_display': title_before\n          '#flex': 0\n          '#default_value': '0'\n          '#wrapper_attributes':\n            class:\n              - long-label\n          '#min': 0\n          '#max': 10000\n          '#step': 1\n        magnet_lock_img:\n          '#type': processed_text\n          '#flex': 0\n          '#wrapper_attributes':\n            class:\n              - preview\n          '#text': |\n            <p><img alt=\"Электромагнитный замок\" src=\"/themes/custom/skud_mb/images/calc/magnet_lock_1.jpg\" /></p>\n            \n          '#format': full_html\nturnstile_check:\n  '#type': checkbox\n  '#title': 'Добавить турникет'\nturnstiles:\n  '#type': fieldset\n  '#title': 'Точки прохода (турникеты)'\n  '#states':\n    visible-slide:\n      ':input[name=\"turnstile_check\"]':\n        checked: true\n  '#attributes':\n    class:\n      - flex-width-auto\n  flexbox_turnstiles:\n    '#type': webform_flexbox\n    '#align_items': flex-end\n    turnstile_volume:\n      '#type': number\n      '#title': 'Количество турникетов'\n      '#description_display': tooltip\n      '#help_display': title_before\n      '#flex': 0\n      '#default_value': '1'\n      '#wrapper_attributes':\n        class:\n          - long-label\n      '#min': 0\n      '#max': 10000\n      '#step': 1\n    turnstile_type:\n      '#type': select\n      '#title': 'Тип турникета'\n      '#options':\n        tripod: Трипод\n        gate: Калитка\n      '#flex': 0\n    turnstile_tripod_img:\n      '#type': processed_text\n      '#flex': 0\n      '#states':\n        visible:\n          ':input[name=\"turnstile_type\"]':\n            value: tripod\n      '#wrapper_attributes':\n        class:\n          - preview\n      '#text': |\n        <p><img alt=\"Турникет-трипод Perco\" src=\"/themes/custom/skud_mb/images/calc/perco-tripod.jpg\" height=\"80\" /></p>\n        \n      '#format': full_html\n    turnstile_gate_img:\n      '#type': processed_text\n      '#flex': 0\n      '#states':\n        visible:\n          ':input[name=\"turnstile_type\"]':\n            value: gate\n      '#wrapper_attributes':\n        class:\n          - preview\n      '#text': |\n        <p><img alt=\"Турникет-трипод Perco\" src=\"/themes/custom/skud_mb/images/calc/perco-gate.jpg\" height=\"80\" /></p>\n        \n      '#format': full_html\n  cardcapture_check:\n    '#type': checkbox\n    '#title': 'С картоприемником'\n    '#states':\n      invisible:\n        ':input[name=\"face_vol\"]':\n          value:\n            greater: '0'\ndopolnitelnoe_oborudovanie:\n  '#type': fieldset\n  '#title': 'Сервер для СКУД'\n  '#attributes':\n    class:\n      - flex-width-auto\n  server_skud:\n    '#type': checkbox\n    '#title': 'Сервер СКУД'\n    '#description': 'У меня нет надежного, производительного и постоянно работающего компьютера, имеющего достаточный объем свободного места и стабильное подключение к локальной сети. Хочу включить в расчет отдельный сервер СКУД.'\n    '#more_title': Подробнее...\n    '#more': '<p><img alt=\"Сервер СКУД\" class=\"more\" src=\"/themes/custom/skud_mb/images/calc/servers.jpg\" /></p>'\n    '#title_display': invisible\n    '#description_display': after\n    '#help_display': title_after\n    '#states':\n      invisible-slide:\n        ':input[name=\"face_vol\"]':\n          value:\n            greater: '0'\n  urm_skud_check:\n    '#type': checkbox\n    '#title': 'УРМ СКУД (флажок)'\n    '#description': 'Необходим дополнительный(-ые) компьютер(-ы) для удаленного рабочего места оператора СКУД.'\n    '#title_display': invisible\n    '#description_display': after\n  flexbox_urm_skud:\n    '#type': webform_flexbox\n    '#states':\n      visible-slide:\n        ':input[name=\"urm_skud_check\"]':\n          checked: true\n    '#attributes':\n      class:\n        - flex-column\n    urm_skud_type:\n      '#type': select\n      '#title': 'Тип АРМ оператора СКУД'\n      '#help_title': '<none>'\n      '#help': |\n        <strong>MiniTower, Windows 10</strong> &mdash; базовая платформа АРМ оператора СКУД в корпусе Mini Tower с установленной ОС Windows 10 IoT LTSB. Компактное отдельностоящее исполнение.<br />\n        <br />\n        <strong>VESA, Windows 10</strong> &mdash; базовая платформа АРМ оператора СКУД в компактном корпусе с креплением VESA&nbsp;с установленной ОС Windows 10 IoT LTSB. Эстетичная модель&nbsp;для установки на монитор с аналогичным типом крепления.<br />\n        <br />\n        <strong>MiniTower, Linux</strong> &mdash; базовая платформа АРМ оператора СКУД с ОС Линукс. Ультракомпактное отдельностоящее исполнение, минимальное энергопотребление, отказоустойчивость, высокая скорость загрузки и выгодная цена.\n        \n      '#help_display': title_after\n      '#options':\n        mt_win: 'MiniTower, Windows 10'\n        vesa_win: 'VESA, Windows 10'\n        mt_linux: 'MiniTower, Linux'\n      '#flex': 0\n      '#states':\n        visible:\n          ':input[name=\"urm_skud_check\"]':\n            checked: true\n    urm_skud:\n      '#type': number\n      '#title': 'Количество АРМ СКУД'\n      '#title_display': before\n      '#description_display': before\n      '#help_display': title_before\n      '#flex': 0\n      '#states':\n        visible:\n          ':input[name=\"urm_skud_check\"]':\n            checked: true\n      '#default_value': '1'\n      '#wrapper_attributes':\n        class:\n          - long-label\n      '#min': 0\n      '#max': 10000\n      '#step': 1\ndopolnitelnye_moduli_po_castle:\n  '#type': fieldset\n  '#title': 'Дополнительные модули ПО Castle'\n  '#attributes':\n    class:\n      - flex-width-auto\n  module_po_castle_time_track:\n    '#type': checkbox\n    '#title': 'Модуль «Учет рабочего времени»'\n    '#help_title': '<none>'\n    '#help': |\n      Функции модуля:\n      <ul>\n        <li>Создание рабочих графиков для сотрудников</li>\n        <li>Получение отчетов за любой исторический период</li>\n        <li>Полный журнал отклонений от рабочего графика</li>\n        <li>Журнал неявок, опозданий и других временных нарушений рабочей дисциплины</li>\n      </ul>\n      \n    '#help_display': title_after\n    '#return_value': checked\n  module_po_castle_pass_print:\n    '#type': checkbox\n    '#title': 'Модуль «Создание и печать пропусков»'\n    '#help_title': '<none>'\n    '#help': |\n      Функции модуля:\n      <ul>\n        <li>Создание и редактирование шаблонов графического оформления пропусков</li>\n        <li>Назначение шаблонов пропусков для сотрудников</li>\n        <li>Печать пропусков на основании шаблонов и персональных данных сотрудников</li>\n      </ul>\n      \n    '#help_display': title_after\n    '#return_value': checked\n  module_po_castle_event_monitor:\n    '#type': checkbox\n    '#title': 'Модуль «Мониторинг событий (фотоидентификация)»'\n    '#help_title': '<none>'\n    '#help': |\n      Функции модуля:\n      <ul>\n        <li>Наблюдение в режиме реального времени за событиями, происходящими в системе. При запросе прохода сотрудником отображается его учетная карточка из базы, включающая фотографию.</li>\n      </ul>\n      \n    '#help_display': title_after\n    '#return_value': checked\n  module_po_castle_1c_integration:\n    '#type': checkbox\n    '#title': 'Модуль «Интеграция с 1С»'\n    '#help_title': '<none>'\n    '#help': |\n      Функции модуля:\n      <ul>\n        <li>Дополняет функции модуля &laquo;Учет рабочего времени&raquo;</li>\n        <li>Автоматическая передача табеля (форма Т-13) в &laquo;1C: Предприятие&raquo;</li>\n      </ul>\n      \n    '#help_display': title_after\n  module_po_castle_pass_ext:\n    '#type': checkbox\n    '#title': 'Модуль «Расширенная поддержка пропусков посетителей»'\n    '#help_title': '<none>'\n    '#help': |\n      Функции модуля:\n      <ul>\n        <li>Интерфейс для выдачи/сбора карт (АРМ &laquo;Бюро пропусков&raquo;), при выдаче происходит привязка карты к паспорту или другому документу посетителя</li>\n        <li>Хранение истории выдачи карт</li>\n        <li>Задание списка карт посетителей</li>\n      </ul>\n      \n    '#help_display': title_after\n    '#required_error': 'Модуль «Расширенная поддержка пропусков посетителей» обязателен, если выбран картоприемник'\n    '#states':\n      checked:\n        ':input[name=\"cardcapture_check\"]':\n          checked: true\n      required:\n        ':input[name=\"cardcapture_check\"]':\n          checked: true\n  module_po_castle_event_response:\n    '#type': checkbox\n    '#title': 'Модуль «Реакция на события»'\n    '#help_title': '<none>'\n    '#help': |\n      Функции модуля:\n      <ul>\n        <li>Задание списка действий, которые будут выполняться системой автоматически при наступлении каких-либо событий. Например, возможна отправка SMS-сообщения на указанный телефонный номер.</li>\n      </ul>\n      \n    '#help_display': title_after\n  module_po_castle_data_sync:\n    '#type': checkbox\n    '#title': 'Модуль «Синхронизация данных»'\n    '#help_title': '<none>'\n    '#help': |\n      Функции модуля:\n      <ul>\n        <li>Автоматическая синхронизация списка сотрудников в СКУД по внешней базе данных существующей корпоративной системы.</li>\n      </ul>\n      \n    '#help_display': title_after\n  module_po_castle_doc_ocr:\n    '#type': checkbox\n    '#title': 'Модуль «Распознавание документов»'\n    '#help_title': '<none>'\n    '#help': |\n      Функции модуля:\n      <ul>\n        <li>Автоматическое сканирование и распознавание документов при выдаче временного пропуска посетителю.</li>\n      </ul>\n      \n    '#help_display': title_after\nceny:\n  '#type': fieldset\n  '#title': Цены\n  '#title_display': invisible\n  '#states':\n    disabled:\n      ':input[name=\"itogo\"]':\n        '': ''\n  cards_cost:\n    '#type': fieldset\n    '#title': cards_cost\n    '#title_display': invisible\n    '#states':\n      disabled:\n        ':input[name=\"itogo\"]':\n          '': ''\n    '#states_clear': false\n    cena_karty_em_marine:\n      '#type': number\n      '#title': 'Карта EM-Marine, бесконтактный идентификатор (толстая), TS '\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '25'\n    cena_karty_hid:\n      '#type': number\n      '#title': 'Карта HID, бесконтактный идентификатор iC2002'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '459'\n    cena_karty_mifare:\n      '#type': number\n      '#title': 'Карта Mifare, бесконтактный идентификатор Smart-карта TS толстая (13,56МГц 1K)'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '30'\n  users_cost:\n    '#type': fieldset\n    '#title': users_cost\n    '#title_display': invisible\n    '#states':\n      disabled:\n        ':input[name=\"itogo\"]':\n          '': ''\n    '#states_clear': false\n    cena_po_castle_50:\n      '#type': number\n      '#title': 'Цена ПО Castle 50'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '5200'\n    cena_po_castle_1000:\n      '#type': number\n      '#title': 'Цена ПО Castle 1000'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '20898'\n    cena_po_castle_10000:\n      '#type': number\n      '#title': 'Цена ПО Castle 10000'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '27637'\n    cena_po_castle_25000:\n      '#type': number\n      '#title': 'Цена ПО Castle 25000'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '51174'\n  readers_cost:\n    '#type': fieldset\n    '#title': readers_cost\n    '#title_display': invisible\n    '#states':\n      disabled:\n        '':\n          '': ''\n    cena_reader_em_marine_ordinary:\n      '#type': number\n      '#title': 'Считыватель TS-RDR-E White EM-Marine'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '1544'\n    cena_reader_hid_ordinary:\n      '#type': number\n      '#title': 'Считыватель TS-RDR-EHMF Metal'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '4624'\n    cena_reader_mifare_ordinary:\n      '#type': number\n      '#title': 'Считыватель TS-RDR-MF Metal Mifare'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '3712'\n    cena_bio_reader_em_marine:\n      '#type': number\n      '#title': 'Биометрический контроллер-считыватель Biosmart 5M-O-EM'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '38000'\n    cena_bio_reader_hid:\n      '#type': number\n      '#title': 'Биометрический контроллер-считыватель BioSmart 4-O-HD-N-L'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '71060'\n    cena_bio_reader_mifare:\n      '#type': number\n      '#title': 'Биометрический контроллер-считыватель Biosmart 5M-O-MF'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '41500'\n    cena_reader_em_marine_premium:\n      '#type': number\n      '#title': 'Цена считывателя Em-Marine (премиум)'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '3000'\n    cena_reader_hid_premium:\n      '#type': number\n      '#title': 'Цена считывателя HID (премиум)'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '11000'\n    cena_reader_mifare_premium:\n      '#type': number\n      '#title': 'Цена считывателя Mifare (премиум)'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '8000'\n    cena_reader_eywa_classics:\n      '#type': number\n      '#title': 'Считыватель AGRG-CLS-B-ABL1-MF/EM-NONE-NO-LOGO'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '18740'\n    cena_reader_eywa_art:\n      '#type': number\n      '#title': 'Считыватель AGRG-ART-C-R-ABL1-MF/EM-BLU-NO-LOGO'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '29850'\n  controllers_cost:\n    '#type': fieldset\n    '#title': controllers_cost\n    '#title_display': invisible\n    cena_ep:\n      '#type': number\n      '#title': 'Цена EP'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '20500'\n    cena_ep2:\n      '#type': number\n      '#title': 'Цена EP2'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '13400'\n    cena_ep4:\n      '#type': number\n      '#title': 'Цена EP4'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '22500'\n  locks_cost:\n    '#type': fieldset\n    '#title': locks_cost\n    '#title_display': invisible\n    cena_mechanical_lock:\n      '#type': number\n      '#title': 'Защелка электромеханическая Viro 7755.70 с ответной планкой'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '2100'\n    cena_magnetlock:\n      '#type': number\n      '#title': 'Электромагнитный замок TS-ML300'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '2608'\n    cena_bbp_20:\n      '#type': number\n      '#title': 'Источник вторичного электропитания ББП-20 TS'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '1085'\n    cena_bbp_50:\n      '#type': number\n      '#title': 'Источник вторичного электропитания ББП-50 TS'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '2265'\n    cena_ivepr:\n      '#type': number\n      '#title': 'Блок питания ИВЭПР 24/5 2x12-Р БР'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '6327'\n  extras_cost:\n    '#type': fieldset\n    '#title': extras_cost\n    '#title_display': invisible\n    '#states':\n      invisible:\n        ':input[name=\"itogo\"]':\n          '': ''\n    cena_battery_dt1207:\n      '#type': number\n      '#title': 'Аккумулятор 12В 7 А•ч (DT 1207)'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '1044'\n    cena_battery_dt1212:\n      '#type': number\n      '#title': 'Аккумулятор 12В 12 А∙ч (DT 1212)'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '2134'\n    cena_button_ordinary:\n      '#type': number\n      '#title': 'Сенсорная кнопка выхода TS-MAGIC чёрный'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '1088'\n    cena_montage_corner:\n      '#type': number\n      '#title': 'Монтажный L-образный уголок для крепления электромагнитного замка, TS-LM300'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '632'\n    cena_closer_tantos_ts_dc085:\n      '#type': number\n      '#title': 'TANTOS TS-DC085 Freeze серебро - доводчик дверной с усилием EN4 для дверей весом до 100 кг'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '2560'\n    cena_detector_door:\n      '#type': number\n      '#title': 'Извещатель охранный магнитоконтактный ИО 102-20 Б2П'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '135'\n    cena_detector_controller:\n      '#type': number\n      '#title': 'Устройство разблокировки двери TS-ERButton'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '1104'\n    cena_reader_master_em_marine:\n      '#type': number\n      '#title': 'Контрольный считыватель карт форматов EM-Marine и HID настольный «Castle-Reader» с интерфейсом USB'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '5200'\n    cena_reader_master_mifare:\n      '#type': number\n      '#title': 'Контрольный считыватель «ACR1252U USB NFC Reader III» Mifare'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '10500'\n    cena_bio_reader_master:\n      '#type': number\n      '#title': 'USB-считыватель настольный BioSmart FS-80'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '11200'\n    cena_camera:\n      '#type': number\n      '#title': 'Видеокамера сетевая (IP) TSi-Pe25VP'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '12560'\n  servers_cost:\n    '#type': fieldset\n    '#title': servers_cost\n    '#title_display': invisible\n    '#states':\n      disabled:\n        '':\n          '': ''\n    cena_server_skud:\n      '#type': number\n      '#title': 'Сервер СКУД \"AGRG VideoСервер vS SKUD.Castle.1Tb.m0.R1\":'\n      '#description': |\n        Базовая платформа сервера СКУД для установки в стойку. Устанавливается в стойку (Rackmount 19&quot;, 1U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция). Максимально доступное решение:\n        <ul>\n        \t<li>Процессор: INTEL Core i3</li>\n        \t<li>Оперативная память: 4 Гб</li>\n        \t<li>ОС: Windows 10 IoT LTSB</li>\n        \t<li>СХД базы данных: HDD 1Tb NAS</li>\n        \t<li>Тип монтажа: Rackmount 19&quot;, 1U</li>\n        \t<li>Размеры (ШхГхВ): 430x250x44 мм</li>\n        \t<li>Питание: 220V, &gt;300W</li>\n        </ul>\n        \n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '130160'\n    cena_server_face_10:\n      '#type': number\n      '#title': 'Сервер \"AGRG VideoСервер vs 10 2988-134 2MPx.25fps.16TbR5\"'\n      '#description': |\n        Сервер СКУД для организации доступа при помощи идентификации лиц, включая ПО:\n        <ul>\n        \t<li>Программное обеспечение &quot;Интеллект&quot; - Подключение видеоканала (лицензия на 10 каналов)</li>\n        \t<li>Программное обеспечение - Система защиты Guardant</li>\n        \t<li>Программное обеспечение &quot;Интеллект&quot; - Ядро системы</li>\n        \t<li>Программное обеспечение &quot;Интеллект&quot; - Интеграция СКУД Castle</li>\n        </ul>\n        \n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '1638384'\n    cena_server_skud_50_rack:\n      '#type': number\n      '#title': 'Сервер СКУД \"AGRG VideoСервер vS SKUD.Castle.1TbR1.m0.R1.5\"'\n      '#description': |\n        Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1). Устанавливается в стойку (Rackmount 19&quot;, 1.5U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):\n        <ul>\n        \t<li>Процессор: INTEL Core i3</li>\n        \t<li>Оперативная память: 4 Гб</li>\n        \t<li>ОС: Windows 10 IoT LTSB</li>\n        \t<li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\n        \t<li>Тип монтажа: Rackmount 19&quot;, 1.5U</li>\n        \t<li>Размеры (ШхГхВ): 430x280x67 мм</li>\n        \t<li>Питание: 220V, &gt;300W</li>\n        </ul>\n        \n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '142160'\n    cena_server_skud_100_rack:\n      '#type': number\n      '#title': 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"'\n      '#description': |\n        Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):\n        <ul>\n        \t<li>Процессор: INTEL Core i7</li>\n        \t<li>Оперативная память: 8 Гб</li>\n        \t<li>ОС: Windows 10 IoT LTSB</li>\n        \t<li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\n        \t<li>Тип монтажа: Rackmount 19&quot;, 4U</li>\n        \t<li>Размеры (ШхГхВ): 430x280x67 мм</li>\n        \t<li>Питание: Redundant 1+1, 220V, &gt;300W</li>\n        </ul>\n        \n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '263120'\n    cena_server_skud_50_mt:\n      '#type': number\n      '#title': 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1T2.m1.MT\"'\n      '#description': |\n        Базовая платформа сервера СКУД в корпусе MiniTower (компактное отдельностоящее исполнение). Поставляется с расширенной системой хранения архива событий базы данных. Оптимальное решение для объектов, на которых не используются серверные стойки для сетевого и серверного оборудования:\n        <ul>\n        \t<li>Процессор: INTEL Core i3</li>\n        \t<li>Оперативная память: 4 Гб</li>\n        \t<li>ОС: Windows 10 IoT LTSB</li>\n        \t<li>СХД базы данных: HDD 2Tb Enterprise</li>\n        \t<li>Тип монтажа: отдельностоящий настольный</li>\n        \t<li>Размеры (ШхГхВ): 430x280x67 мм</li>\n        \t<li>Питание: 220V, &gt;300W</li>\n        </ul>\n        \n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '130160'\n    cena_urm_skud:\n      '#type': number\n      '#title': 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.MT\"'\n      '#description': |\n        Базовая платформа АРМ оператора СКУД в корпусе MiniTower (компактное отдельностоящее исполнение):\n        <ul>\n        \t<li>Процессор: INTEL Core i3</li>\n        \t<li>Оперативная память: 4 Гб</li>\n        \t<li>ОС: Windows 10 IoT LTSB</li>\n        \t<li>Тип монтажа: настольный</li>\n        \t<li>Размеры (ШхГхВ): 230x264x112 мм</li>\n        \t<li>Питание: 220V, &gt;160W</li>\n        </ul>\n        \n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '91760'\n    cena_urm_skud_vesa:\n      '#type': number\n      '#title': 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.NUC\"'\n      '#description': |\n        Базовая платформа АРМ оператора СКУД в компактном корпусе с креплением VESA (для установки на монитор с аналогичным типом крепления). Компактная и эстетичная модель:\n        <ul>\n        \t<li>Процессор: INTEL Core i3</li>\n        \t<li>Оперативная память: 4 Гб</li>\n        \t<li>ОС: Windows 10 IoT LTSB</li>\n        \t<li>Тип монтажа: VESA 100</li>\n        \t<li>Размеры (ШхГхВ): 115х111х48 мм</li>\n        \t<li>Питание: 220V, &gt;65W</li>\n        </ul>\n        \n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '97040'\n    cena_urm_skud_rspb:\n      '#type': number\n      '#title': 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.RSPB\"'\n      '#description': |\n        Базовая платформа АРМ оператора СКУД на базе ОС Линукс (ультракомпактное отдельностоящее исполнение). Минимальное энергопотребление, отказоустойчивость ОС Линукс, высокая скорость загрузки и выгодная цена для заказчика:\n        <ul>\n        \t<li>Процессор: ARM</li>\n        \t<li>Оперативная память: 1 Гб</li>\n        \t<li>ОС: Ubuntu</li>\n        \t<li>Тип монтажа: настольный</li>\n        \t<li>Размеры (ШхГхВ): 100х70х40 мм</li>\n        \t<li>Питание: 220V</li>\n        </ul>\n        \n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '24000'\n  turnstiles_cost:\n    '#type': fieldset\n    '#title': turnstiles_cost\n    '#title_display': invisible\n    '#states':\n      invisible:\n        '':\n          '': ''\n    cena_turnstile_tripod:\n      '#type': number\n      '#title': 'Турникет-трипод PERCo-TTR-07.1G'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '106729'\n    cena_turnstile_gate:\n      '#type': number\n      '#title': 'Турникет с раздвижными створками PERCo-ST-02.900'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '1058032'\n    cena_cardcapture:\n      '#type': number\n      '#title': 'Картоприемник PERCo-IC05'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '88490'\n  modules_cost:\n    '#type': fieldset\n    '#title': modules_cost\n    '#title_display': invisible\n    '#states':\n      invisible:\n        '':\n          '': ''\n    cena_module_time_track:\n      '#type': number\n      '#title': 'Цена модуля «Учет рабочего времени»'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '16288'\n    cena_module_pass_print:\n      '#type': number\n      '#title': 'Цена модуля «Создание и печать пропусков»'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '16288'\n    cena_module_event_monitor:\n      '#type': number\n      '#title': 'Цена модуля «Мониторинг событий (фотоидентификация)»'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '4493'\n    cena_module_1c_integration:\n      '#type': number\n      '#title': 'Цена модуля «Интеграция с 1С» (дополняет функции модуля \"Учет рабочего времени\"»'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '16288'\n    cena_module_pass_ext:\n      '#type': number\n      '#title': 'Цена модуля «Расширенная поддержка пропусков посетителей»'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '16288'\n    cena_module_event_response:\n      '#type': number\n      '#title': 'Цена модуля «Реакция на события»'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '16288'\n    cena_module_data_sync:\n      '#type': number\n      '#title': 'Цена модуля «Синхронизация данных»'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '31512'\n    cena_module_doc_ocr:\n      '#type': number\n      '#title': 'Цена модуля «Распознавание документов»'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '16288'\n    cena_module_face_recog:\n      '#type': number\n      '#title': 'Цена модуля «Распознавание лиц»'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '64800'\n    cena_module_face_ident_10:\n      '#type': number\n      '#title': 'Модуль «Идентификация лица» (лицензия на базу до 10 лиц)'\n      '#help_title': '<none>'\n      '#help': 'Обязательный модуль при выборе опции распознавания лиц.'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '92160'\n    cena_module_face_ident_50:\n      '#type': number\n      '#title': 'Модуль «Идентификация лица» (лицензия на базу до 50 лиц)'\n      '#help_title': '<none>'\n      '#help': 'Обязательный модуль при выборе опции распознавания лиц.'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '129280'\n    cena_module_face_ident_100:\n      '#type': number\n      '#title': 'Модуль «Идентификация лица» (лицензия на базу до 100 лиц)'\n      '#help_title': '<none>'\n      '#help': 'Обязательный модуль при выборе опции распознавания лиц.'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '166400'\n    cena_module_face_ident_1000:\n      '#type': number\n      '#title': 'Распознавание лиц Tevian (лицензия на базу до 1000 лиц)'\n      '#help_title': '<none>'\n      '#help': 'Обязательный модуль при выборе опции распознавания лиц.'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '314000'\n    cena_module_face_ident_camera:\n      '#type': number\n      '#title': 'Модуль «Идентификация лица» (лицензия на одну камеру)'\n      '#help_title': '<none>'\n      '#help': 'Обязательный модуль при выборе опции распознавания лиц.'\n      '#field_suffix': ' руб.'\n      '#disabled': true\n      '#states':\n        invisible:\n          ':input[name=\"itogo\"]':\n            '': ''\n      '#states_clear': false\n      '#default_value': '8960'\nhorizontal_rule:\n  '#type': webform_horizontal_rule\nrandom:\n  '#type': webform_computed_twig\n  '#title': random\n  '#description': '<img alt=\"\" class=\"hidden\" id=\"funny-pic\" src=\"/themes/custom/skud_mb/images/calc/funny-btn.png\" width=\"100\" />'\n  '#title_display': none\n  '#description_display': before\n  '#wrapper_attributes':\n    class:\n      - funny-btn-wrapper\n  '#display_on': form\n  '#mode': html\n  '#template': |\n    <button class=\"funny-btn\" onClick=\"window.location.search = '&kolichestvo_kart={{random(1, 500)}}&tip_kart={{ random(['Em-marine', 'HID', 'Mifare'])}}&oneside_door_volume={{random(1, 10)}}&twoside_door_volume={{random(1, 10)}}&module_po_castle_time_track={{random(['checked', 'unchecked'])}}&module_po_castle_pass_print={{random(['checked', 'unchecked'])}}&module_po_castle_event_monitor={{random(['checked', 'unchecked'])}}&fake={{ 'checked'}}';\">Рассчитать<br/>как-нибудь&nbsp;:)</button>\n    \n  '#whitespace': spaceless\nfake:\n  '#type': checkbox\n  '#title': fake\n  '#title_display': invisible\n  '#description_display': invisible\n  '#states':\n    invisible:\n      ':input[name=\"itogo\"]':\n        filled: true\n  '#states_clear': false\n  '#return_value': checked\ntrebuetsya_pomosch_specialista:\n  '#type': checkbox\n  '#title': 'Требуется помощь специалиста'\nphone:\n  '#type': tel\n  '#title': Телефон\n  '#description': 'Введите номер телефона, и наш специалист перезвонит Вам, чтобы помочь точно рассчитать стоимость СКУД для Вашего объекта.'\n  '#title_display': invisible\n  '#minlength': 1\n  '#maxlength': 30\n  '#size': 30\n  '#placeholder': '+7 (999) 999-99-99'\n  '#states':\n    visible-slide:\n      ':input[name=\"trebuetsya_pomosch_specialista\"]':\n        checked: true\nemail:\n  '#type': email\n  '#title': Email\n  '#description': 'Укажите свой email, и на него автоматически поступит коммерческое предложение, составленное на основе Ваших расчетов. Если письмо не пришло, проверьте папку нежелательных сообщений.'\n  '#title_display': invisible\n  '#size': 30\n  '#placeholder': Email\n  '#required': true\n  '#required_error': 'Для получения расчета на почту поле Email обязательно для заполнения'\nimya:\n  '#type': textfield\n  '#title': Имя\n  '#title_display': invisible\n  '#minlength': 1\n  '#maxlength': 40\n  '#size': 40\n  '#placeholder': Имя\n  '#required': true\nfamiliya:\n  '#type': textfield\n  '#title': Фамилия\n  '#title_display': invisible\n  '#minlength': 1\n  '#maxlength': 40\n  '#size': 40\n  '#placeholder': Фамилия\n  '#required': true\nitogo:\n  '#type': webform_computed_twig\n  '#title': Итого\n  '#template': |\n    {% set doors_total = (data.oneside_door_volume + data.twoside_door_volume) %}\n    {% set r_oneside = data.oneside_door_volume %}\n    {% set r_twoside = (data.twoside_door_volume * 2) %}\n    {% set users_total = (data.kolichestvo_kart + data.finger_vol + data.face_vol) %}\n    \n    {# Card / Reader calculation #}\n    {% if data.tip_kart == 'Em-Marine' -%}\n      {% set card_name = 'Карта EM-Marine, бесконтактный идентификатор (толстая), TS' %}\n      {% set card_price = data.cena_karty_em_marine %}\n    \n      {% if data.finger_vol > 0 %}\n        {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-EM' %}\n        {% set reader_price = data.cena_bio_reader_em_marine %}\n      {% else %}\n        {% set reader_name = 'Считыватель TS-RDR-E White EM-Marine' %}\n        {% set reader_price = data.cena_reader_em_marine_ordinary %}\n      {% endif %}\n    \n    {% elseif data.tip_kart == 'HID' %}\n      {% set card_name = 'Карта HID, бесконтактный идентификатор iC2002' %}\n      {% set card_price = data.cena_karty_hid %}\n    \n      {% if data.finger_vol > 0 %}\n        {% set reader_name = 'Биометрический контроллер-считыватель BioSmart 4-O-HD-N-L' %}\n        {% set reader_price = data.cena_bio_reader_hid %}\n      {% else %}\n        {% set reader_name = 'Считыватель TS-RDR-EHV-2 Metal HID' %}\n        {% set reader_price = data.cena_reader_hid_ordinary %}\n      {% endif %}\n    \n    {% elseif data.tip_kart == 'Mifare' %}\n      {% set card_name = 'Карта Mifare, бесконтактный идентификатор Smart-карта TS толстая (13,56МГц 1K)' %}\n      {% set card_price = data.cena_karty_mifare %}\n    \n      {% if data.finger_vol > 0 %}\n        {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-MF' %}\n        {% set reader_price = data.cena_bio_reader_mifare %}\n      {% else %} \n        {% set reader_name = 'Считыватель TS-RDR-MF Metal Mifare' %}\n        {% set reader_price = data.cena_reader_mifare_ordinary %}\n      {% endif %}\n    {%- endif %}\n    \n      {# Reader style calculation #}\n      {% if data.readers_style == 'ordinary' or data.readers_style is empty -%}\n      {% elseif data.readers_style == 'eywa_classics' %}\n        {% set reader_name = 'Считыватель AGRG-CLS-B-ABL1-MF/EM-NONE-NO-LOGO' %}\n        {% set reader_price = data.cena_reader_eywa_classics %}\n      {% elseif data.readers_style == 'eywa_art' %}\n        {% set reader_name = 'AGRG-ART-C-R-ABL1-MF/EM-BLU-NO-LOGO' %}\n        {% set reader_price = data.cena_reader_eywa_art %}\n      {%- endif %}  \n    \n    {% set card_vol = data.kolichestvo_kart %}\n    {% set card_cost = (card_price * card_vol) %}\n    \n    {% set reader_vol = (r_oneside + r_twoside) %}\n    {% set reader_cost = (reader_price * reader_vol) %}\n    \n    {# BBP / Lock calculation #}\n    {% if data.lock_type == 'mechanical' -%}\n      {% set bbp_mech_vol = (doors_total / 3)|round(0, 'ceil') %}\n      {% set lock_mech_vol = doors_total %}\n    \n    {% elseif data.lock_type == 'magnet' %}\n      {% set bbp_mag_vol = (doors_total / 2)|round(0, 'ceil') %}\n      {% set lock_mag_vol = doors_total %}\n      {% set corner_vol = doors_total %}\n      \n    {% elseif data.lock_type == 'mixed' %}\n      {% set bbp_mech_vol = (data.mechanical_lock_volume / 3)|round(0, 'ceil') %}\n      {% set bbp_mag_vol = (data.magnet_lock_volume / 2)|round(0, 'ceil') %}\n      {% set lock_mech_vol = data.mechanical_lock_volume %}\n      {% set lock_mag_vol = data.magnet_lock_volume %}\n      {% set corner_vol = data.magnet_lock_volume %}\n    {%- endif %}\n    \n    {% set bbp_mech_name = 'Источник вторичного электропитания ББП-50 TS' %}\n    {% set bbp_mech_price = data.cena_bbp_50 %}\n    {% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\n    \n    {% set bbp_mag_name = 'Источник вторичного электропитания ББП-20 TS' %}\n    {% set bbp_mag_price = data.cena_bbp_20 %}\n    {% set bbp_mag_cost = (bbp_mag_price * bbp_mag_vol) %}\n    \n    {% set lock_mech_name = 'Защелка электромеханическая Viro 7755.70 с ответной планкой' %}\n    {% set lock_mech_price = data.cena_mechanical_lock %}\n    {% set lock_mech_cost = (lock_mech_price * lock_mech_vol) %}\n    \n    {% set lock_mag_name = 'Электромагнитный замок TS-ML300' %}\n    {% set lock_mag_price = data.cena_magnetlock %}\n    {% set lock_mag_cost = (lock_mag_price * lock_mag_vol) %}\n    \n    {% set corner_name = 'Монтажный L-образный уголок для крепления электромагнитного замка, TS-LM300' %}\n    {% set corner_price = data.cena_montage_corner %}\n    {% set corner_cost = (corner_price * corner_vol) %}\n    \n    {# Button calculation #}\n    {% set button_name = 'Сенсорная кнопка выхода TS-MAGIC чёрный' %}\n    {% set button_vol = data.oneside_door_volume %}\n    {% set button_price = data.cena_button_ordinary %}\n    {% set button_cost = (button_price * button_vol) %}\n    \n    {# Closer calculation #}\n    {% set closer_name = 'TANTOS TS-DC085 Freeze серебро - доводчик дверной с усилием EN4 для дверей весом до 100 кг' %}\n    {% set closer_vol = doors_total %}\n    {% set closer_price = data.cena_closer_tantos_ts_dc085 %}\n    {% set closer_cost = (closer_price * closer_vol) %}\n    \n    {# Battery calculation #}\n    {% set battery_name = 'Аккумулятор 12В 7 А•ч (DT 1207)' %}\n    {% set battery_vol = (bbp_mech_vol + bbp_mag_vol) %}\n    {% set battery_price = data.cena_battery_dt1207 %}\n    {% set battery_cost = (battery_price * battery_vol) %}\n    \n    {# Door Detector calculation #}\n    {% set detector_door_name = 'Извещатель охранный магнитоконтактный ИО 102-26 исп.00 «Аякс»' %}\n    {% set detector_door_vol = doors_total %}\n    {% set detector_door_price = data.cena_detector_door %}\n    {% set detector_door_cost = (detector_door_price * detector_door_vol) %}\n    \n    {# Controller Detector calculation #}\n    {% set detector_controller_name = 'Извещатель ИОПР 513/101-3 «Аварийный выход» с крышкой' %}\n    {% set detector_controller_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\n    {% set detector_controller_price = data.cena_detector_controller %}\n    {% set detector_controller_cost = (detector_controller_price * detector_controller_vol) %}\n    \n    {# Turnstile calculation #}\n    {% if data.turnstile_check %}\n      {% set turnstile_vol = data.turnstile_volume %}\n      {% if data.turnstile_type == 'tripod' %}\n        {% set turnstile_name = 'Турникет-трипод PERCo-TTR-07.1G' %}\n        {% set turnstile_price = data.cena_turnstile_tripod %}\n        \n        {% set bbp_mech_vol = (bbp_mech_vol + turnstile_vol) %}\n        {% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\n        \n        {% set battery_vol = (battery_vol + turnstile_vol) %}\n        {% set battery_cost = (battery_price * battery_vol) %}\n        \n        {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\n        {% set reader_cost = (reader_price * reader_vol) %}\n      {% elseif data.turnstile_type == 'gate' %}\n        {% set turnstile_name = 'Турникет с раздвижными створками PERCo-ST-02.900' %}\n        {% set turnstile_price = data.cena_turnstile_gate %}\n        \n        {% set bbp_gate_name = 'Аккумулятор 12В 12 А∙ч (DT 1212)' %}\n        {% set bbp_gate_price = data.cena_battery_dt1212 %}\n        {% set bbp_gate_vol = (turnstile_vol * 2) %}\n        {% set bbp_gate_cost = (bbp_gate_price * bbp_gate_vol) %}\n    \n        {% set battery_gate_name = 'Блок питания ИВЭПР 24/5 2x12-Р БР' %}\n        {% set battery_gate_price = data.cena_ivepr %}\n        {% set battery_gate_vol = turnstile_vol %}\n        {% set battery_gate_cost = (battery_gate_price * battery_gate_vol) %}\n        \n        {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\n        {% set reader_cost = (reader_price * reader_vol) %}\n      {% endif %}\n      {% set turnstile_cost = (turnstile_price * turnstile_vol) %}\n    {% endif %}\n    \n    {% if data.cardcapture_check %}\n      {% set cardcapture_name = 'Картоприемник PERCo-IC05' %}\n      {% set cardcapture_price = data.cena_cardcapture %}\n      {% set cardcapture_vol = turnstile_vol %}\n      {% set cardcapture_cost = (cardcapture_price * cardcapture_vol) %}\n    {% endif %}\n    \n    {# Controller calculation #}\n    {% if data.door_distance == '30less' -%}\n      {% if data.oneside_door_volume > 1 and data.oneside_door_volume <= 4 -%}\n        {% set ep_four_vol = 1 %}\n      {% elseif data.oneside_door_volume == 1 %}\n        {% set ep_two_vol = 1 %}\n      {% else %}\n        {% set ep_four_vol = (data.oneside_door_volume / 4)|round(0, 'ceil') %}\n      {%- endif %}\n    \n      {% if data.twoside_door_volume == 1 %}\n        {% set ep_two_vol = 1 %}\n      {% else %}\n        {% set ep_vol = (data.twoside_door_volume / 2)|round(0, 'ceil') %}  \n      {% endif %}\n    \n    {% elseif data.door_distance == '30more' %}\n      {% set ep_two_vol = doors_total %}\n    {%- endif %}\n    \n    {% set ep_vol = (ep_vol + turnstile_vol) %}\n    \n    {% set ep_name = 'Сетевой контроллер Castle EP' %}\n    {% set ep_price = data.cena_ep %}\n    {% set ep_cost = (ep_price * ep_vol) %}\n    \n    {% set ep_two_name = 'Сетевой контроллер Castle EP2' %}\n    {% set ep_two_price = data.cena_ep2 %}\n    {% set ep_two_cost = (ep_two_price * ep_two_vol) %}\n    \n    {% set ep_four_name = 'Сетевой контроллер Castle EP4' %}\n    {% set ep_four_price = data.cena_ep4 %}\n    {% set ep_four_cost = (ep_four_price * ep_four_vol) %}\n    \n    {% set controllers_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\n    \n    {# Master Controller calculation #}\n    {% if data.finger_vol > 0 %}\n      {% set master_controller_name = 'USB-считыватель настольный BioSmart FS-80' %}\n      {% set master_controller_price = data.cena_bio_reader_master %}\n    {% else %}\n      {% if data.tip_kart == 'Em-Marine' or data.tip_kart == 'HID'%}\n        {% set master_controller_name = 'Контрольный считыватель карт форматов EM-Marine и HID настольный «Castle-Reader» с интерфейсом USB' %}\n        {% set master_controller_price = data.cena_reader_master_em_marine %}\n      {% elseif data.tip_kart == 'Mifare' %}\n        {% set master_controller_name = 'Контрольный считыватель «ACR1252U USB NFC Reader III» Mifare' %}\n        {% set master_controller_price = data.cena_reader_master_mifare %}\n      {% endif %}\n    {% endif %}\n    \n    {% set master_controller_vol = 1 %}\n    {% set master_controller_cost = (master_controller_price * master_controller_vol) %}\n    \n    {# Camera calculation #}\n    {% if data.face_vol > 0 %}\n      {% set camera_name = 'Видеокамера сетевая (IP) TSi-Pe25VP' %}\n      {% set camera_price = data.cena_camera %}\n      {% set camera_vol = (r_oneside + r_twoside + turnstile_vol * 2) %}\n      {% set camera_cost = (camera_price * camera_vol) %}\n    {% endif %}\n    \n    {# Server Face Ident calculation #}\n    {% if camera_vol > 0 %}\n      {% if camera_vol <= 4 %}\n        {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\n        {% set server_desc %} \n        <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\n        <ul>\n          <li>Процессор: INTEL Core i7</li>\n          <li>Оперативная память: 8 Гб</li>\n          <li>ОС: Windows 10 IoT LTSB</li>\n          <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\n          <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\n          <li>Размеры (ШхГхВ): 430x280x67 мм</li>\n          <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\n        </ul>\n        {% endset %}\n        {% set server_price = data.cena_server_skud_100_rack %}\n        {% else %}\n        {% set server_name = 'Сервер \"AGRG VideoСервер vS 10 2988-134 2MPx.25fps.16TbR5\"' %}\n        {% set server_desc %} \n          <p>Сервер СКУД для организации доступа при помощи идентификации лиц, включая ПО:</p>\n          <ul>\n            <li>Программное обеспечение &quot;Интеллект&quot; - Подключение видеоканала (лицензия на 10 каналов)</li>\n            <li>Программное обеспечение - Система защиты Guardant</li>\n            <li>Программное обеспечение &quot;Интеллект&quot; - Ядро системы</li>\n            <li>Программное обеспечение &quot;Интеллект&quot; - Интеграция СКУД Castle</li>\n          </ul>\n        {% endset %}\n        {% set server_price = data.cena_server_face_10 %}\n      {% endif %}\n      {% set server_vol = (camera_vol / 10)|round(0, 'ceil') %}\n      {% set server_cost = (server_price * server_vol) %}\n    {% endif %}\n    \n    {# Server calculation #}\n    {% if data.server_skud %}\n      {% if controllers_vol > 0 and controllers_vol <= 20 %}\n        {% set server_name = 'Сервер СКУД \"AGRG VideoСервер vS SKUD.Castle.1Tb.m0.R1\":' %}\n        {% set server_desc %} \n        <p>Базовая платформа сервера СКУД для установки в стойку. Устанавливается в стойку (Rackmount 19&quot;, 1U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция). Максимально доступное решение:</p>\n        <ul>\n          <li>Процессор: INTEL Core i3</li>\n          <li>Оперативная память: 4 Гб</li>\n          <li>ОС: Windows 10 IoT LTSB</li>\n          <li>СХД базы данных: HDD 1Tb NAS</li>\n          <li>Тип монтажа: Rackmount 19&quot;, 1U</li>\n          <li>Размеры (ШхГхВ): 430x250x44 мм</li>\n          <li>Питание: 220V, &gt;300W</li>\n        </ul>\n        {% endset %}\n        {% set server_price = data.cena_server_skud %}\n      {% elseif controllers_vol > 20 and controllers_vol <= 50 %}\n        {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1T2.m1.MT\"' %}\n        {% set server_desc %} \n        <p>Базовая платформа сервера СКУД в корпусе MiniTower (компактное отдельностоящее исполнение). Поставляется с расширенной системой хранения архива событий базы данных. Оптимальное решение для объектов, на которых не используются серверные стойки для сетевого и серверного оборудования:</p>\n        <ul>\n          <li>Процессор: INTEL Core i3</li>\n          <li>Оперативная память: 4 Гб</li>\n          <li>ОС: Windows 10 IoT LTSB</li>\n          <li>СХД базы данных: HDD 2Tb Enterprise</li>\n          <li>Тип монтажа: отдельностоящий настольный</li>\n          <li>Размеры (ШхГхВ): 430x280x67 мм</li>\n          <li>Питание: 220V, &gt;300W</li>\n        </ul>\n        {% endset %}\n        {% set server_price = data.cena_server_skud_50_mt %}\n      {% elseif controllers_vol > 50 %}\n        {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\n        {% set server_desc %} \n        <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\n        <ul>\n          <li>Процессор: INTEL Core i7</li>\n          <li>Оперативная память: 8 Гб</li>\n          <li>ОС: Windows 10 IoT LTSB</li>\n          <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\n          <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\n          <li>Размеры (ШхГхВ): 430x280x67 мм</li>\n          <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\n        </ul>\n        {% endset %}\n        {% set server_price = data.cena_server_skud_100_rack %}\n      {% endif %}\n      \n      {% set server_vol = 1 %}\n      {% set server_cost = (server_price * server_vol) %}\n    {% endif %}\n    \n    {# URM calculation #}\n    {% if data.urm_skud_check %}\n      {% if data.urm_skud_type == 'mt_win' %}\n        {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.MT\"' %}\n        {% set urm_desc %} \n        <p>Базовая платформа АРМ оператора СКУД в корпусе MiniTower (компактное отдельностоящее исполнение):</p>\n        <ul>\n          <li>Процессор: INTEL Core i3</li>\n          <li>Оперативная память: 4 Гб</li>\n          <li>ОС: Windows 10 IoT LTSB</li>\n          <li>Тип монтажа: настольный</li>\n          <li>Размеры (ШхГхВ): 230x264x112 мм</li>\n          <li>Питание: 220V, &gt;160W</li>\n        </ul>\n        {% endset %}\n        {% set urm_price = data.cena_urm_skud %}\n      {% elseif data.urm_skud_type == 'vesa_win' %}\n        {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.NUC\"' %}\n        {% set urm_desc %} \n        <p>Базовая платформа АРМ оператора СКУД в компактном корпусе с креплением VESA (для установки на монитор с аналогичным типом крепления). Компактная и эстетичная модель:</p>\n        <ul>\n          <li>Процессор: INTEL Core i3</li>\n          <li>Оперативная память: 4 Гб</li>\n          <li>ОС: Windows 10 IoT LTSB</li>\n          <li>Тип монтажа: VESA 100</li>\n          <li>Размеры (ШхГхВ): 115х111х48 мм</li>\n          <li>Питание: 220V, &gt;65W</li>\n        </ul>\n        {% endset %}    \n        {% set urm_price = data.cena_urm_skud_vesa %}\n      {% elseif data.urm_skud_type == 'mt_linux' %}\n        {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.RSPB\"' %}\n        {% set urm_desc %} \n        <p>Базовая платформа АРМ оператора СКУД на базе ОС Линукс (ультракомпактное отдельностоящее исполнение). Минимальное энергопотребление, отказоустойчивость ОС Линукс, высокая скорость загрузки и выгодная цена для заказчика:</p>\n        <ul>\n          <li>Процессор: ARM</li>\n          <li>Оперативная память: 1 Гб</li>\n          <li>ОС: Ubuntu</li>\n          <li>Тип монтажа: настольный</li>\n          <li>Размеры (ШхГхВ): 100х70х40 мм</li>\n          <li>Питание: 220V</li>\n        </ul>\n        {% endset %}    \n        {% set urm_price = data.cena_urm_skud_rspb %}\n      {% endif %}\n    \n    {% set urm_vol = data.urm_skud %}\n    {% set urm_cost = (urm_price * urm_vol) %}\n    {% endif %}\n    \n    {# Hardware subtotal #}\n    \n    {% set total_hard_cost = (card_cost + reader_cost + bbp_mech_cost + bbp_mag_cost + lock_mech_cost + lock_mag_cost + corner_cost + turnstile_cost + cardcapture_cost + camera_cost + ep_cost + ep_two_cost + ep_four_cost + button_cost + closer_cost + battery_cost + detector_door_cost + detector_controller_cost + master_controller_cost + server_cost + urm_cost) %}\n    {% set hard_nds = (total_hard_cost * 20 / 120) %}\n    {% set total_hard_no_nds = (total_hard_cost - hard_nds) %}\n    \n    {# Users cost calculation #}\n    {% if users_total <= '50' %}\n      {% set user_name = 'Базовый модуль ПО Castle, ограничение до 50 карт доступа' %}\n      {% set user_vol = 1 %}\n      {% set user_price = data.cena_po_castle_50 %}\n      {% set user_cost = (user_price * user_vol) %}\n      \n      {% elseif users_total > '50' and users_total <= '1000' %}\n      {% set user_name = 'Базовый модуль ПО Castle, ограничение до 1000 карт доступа' %}\n      {% set user_vol = 1 %}\n      {% set user_price = data.cena_po_castle_1000 %} \n      {% set user_cost = (user_price * user_vol) %}\n    \n      {% elseif users_total > '1000' and users_total <= '10000' %}\n      {% set user_name = 'Базовый модуль ПО Castle, ограничение до 10 000 карт доступа' %}\n      {% set user_vol = 1 %}\n      {% set user_price = data.cena_po_castle_10000 %} \n      {% set user_cost = (user_price * user_vol) %}\n    \n      {% elseif users_total > '10000' and users_total <= '25000' %}\n      {% set user_name = 'Базовый модуль ПО Castle, ограничение до 25 000 карт доступа' %}\n      {% set user_vol = 1 %}\n      {% set user_price = data.cena_po_castle_25000 %} \n      {% set user_cost = (user_price * user_vol) %}\n    {% endif %}\n    \n    {# Extra Modules calculation #}\n    {% if data.module_po_castle_time_track %}\n    {% set time_track_name = 'Дополнительный модуль ПО Castle «Учет рабочего времени»' %}\n    {% set time_track_desc %} \n    <ul>\n      <li>Создание рабочих графиков для сотрудников</li>\n      <li>Получение отчетов за любой исторический период</li>\n      <li>Полный журнал отклонений от рабочего графика</li>\n      <li>Журнал неявок, опозданий и других временных нарушений рабочей дисциплины</li>\n    </ul>\n    {% endset %}\n    {% set time_track_vol = 1 %}\n    {% set time_track_price = data.cena_module_time_track %}\n    {% set time_track_cost = (time_track_price * time_track_vol) %}\n    {% endif %}\n    \n    {% if data.module_po_castle_pass_print %}\n    {% set pass_print_name = 'Дополнительный модуль ПО Castle «Создание и печать пропусков»' %}\n    {% set pass_print_desc %} \n    <ul>\n      <li>Создание и редактирование шаблонов графического оформления пропусков</li>\n      <li>Назначение шаблонов пропусков для сотрудников</li>\n      <li>Печать пропусков на основании шаблонов и персональных данных сотрудников</li>\n    </ul>\n    {% endset %}\n    {% set pass_print_vol = 1 %}\n    {% set pass_print_price = data.cena_module_pass_print %}\n    {% set pass_print_cost = (pass_print_price * pass_print_vol) %}\n    {% endif %}\n    \n    {% if data.module_po_castle_event_monitor %}\n    {% set event_monitor_name = 'Дополнительный модуль «Мониторинг событий (фотоидентификация)»' %}\n    {% set event_monitor_desc %} \n    <ul>\n      <li>Наблюдение в режиме реального времени за событиями, происходящими в системе. При запросе прохода сотрудником отображается его учетная карточка из базы, включающая фотографию.</li>\n    </ul>\n    {% endset %}\n    {% set event_monitor_vol = 1 %}\n    {% set event_monitor_price = data.cena_module_event_monitor %}\n    {% set event_monitor_cost = (event_monitor_price * event_monitor_vol) %}\n    {% endif %}\n    \n    {% if data.module_po_castle_1c_integration %}\n    {% set onec_integration_name = 'Дополнительный модуль «Интеграция с 1С»' %}\n    {% set onec_integration_desc %} \n    <ul>\n      <li>Дополняет функции модуля &laquo;Учет рабочего времени&raquo;</li>\n      <li>Автоматическая передача табеля (форма Т-13) в &laquo;1C: Предприятие&raquo;</li>\n    </ul>\n    {% endset %}\n    {% set onec_integration_vol = 1 %}\n    {% set onec_integration_price = data.cena_module_1c_integration %}\n    {% set onec_integration_cost = (onec_integration_price * onec_integration_vol) %}\n    {% endif %}\n    \n    {% if data.module_po_castle_pass_ext or data.cardcapture_check %}\n    {% set pass_ext_name = 'Дополнительный модуль «Расширенная поддержка пропусков посетителей»' %}\n    {% set pass_ext_desc %} \n    <ul>\n      <li>Интерфейс для выдачи/сбора карт (АРМ &laquo;Бюро пропусков&raquo;), при выдаче происходит привязка карты к паспорту или другому документу посетителя</li>\n      <li>Хранение истории выдачи карт</li>\n      <li>Задание списка карт посетителей</li>\n    </ul>\n    {% endset %}\n    {% set pass_ext_vol = 1 %}\n    {% set pass_ext_price = data.cena_module_pass_ext %}\n    {% set pass_ext_cost = (pass_ext_price * pass_ext_vol) %}\n    {% endif %}\n    \n    {% if data.module_po_castle_event_response %}\n    {% set event_response_name = 'Дополнительный модуль «Реакция на события»' %}\n    {% set event_response_desc %} \n    <ul>\n      <li>Задание списка действий, которые будут выполняться системой автоматически при наступлении каких-либо событий. Например, возможна отправка SMS-сообщения на указанный телефонный номер.</li>\n    </ul>\n    {% endset %}\n    {% set event_response_vol = 1 %}\n    {% set event_response_price = data.cena_module_event_response %}\n    {% set event_response_cost = (event_response_price * event_response_vol) %}\n    {% endif %}\n    \n    {% if data.module_po_castle_data_sync %}\n    {% set data_sync_name = 'Дополнительный модуль «Синхронизация данных»' %}\n    {% set data_sync_desc %} \n    <ul>\n      <li>Автоматическая синхронизация списка сотрудников в СКУД по внешней базе данных существующей корпоративной системы.</li>\n    </ul>\n    {% endset %}\n    {% set data_sync_vol = 1 %}\n    {% set data_sync_price = data.cena_module_data_sync %}\n    {% set data_sync_cost = (data_sync_price * data_sync_vol) %}\n    {% endif %}\n    \n    {% if data.module_po_castle_doc_ocr %}\n    {% set doc_ocr_name = 'Дополнительный модуль «Распознавание документов»' %}\n    {% set doc_ocr_desc %} \n    <ul>\n      <li>Автоматическое сканирование и распознавание документов при выдаче временного пропуска посетителю.</li>\n    </ul>\n    {% endset %}\n    {% set doc_ocr_vol = 1 %}\n    {% set doc_ocr_price = data.cena_module_doc_ocr %}\n    {% set doc_ocr_cost = (doc_ocr_price * doc_ocr_vol) %}\n    {% endif %}\n    \n    {# Face Ident per camera calculation #}\n    {% if camera_vol > 0 %}\n    {% set face_ident_camera_name = 'Модуль «Идентификация лица» (лицензия на одну камеру)' %}\n    {% set face_ident_camera_price = data.cena_module_face_ident_camera %}\n    {% set face_ident_camera_vol = camera_vol %}\n    {% set face_ident_camera_cost = (face_ident_camera_price * face_ident_camera_vol) %}\n    {% endif %}\n    \n    {# Face ident calculation #}\n    {% if data.face_vol > 0 and data.face_vol <= 10 %}\n    {% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 10 лиц)' %}\n    {% set face_ident_price = data.cena_module_face_ident_10 %}\n    \n    {% elseif data.face_vol > 10 and data.face_vol <= 50 %}\n    {% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 50 лиц)' %}\n    {% set face_ident_price = data.cena_module_face_ident_50 %}\n    \n    {% elseif data.face_vol > 50 and data.face_vol <= 100 %}\n    {% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 100 лиц)' %}\n    {% set face_ident_price = data.cena_module_face_ident_100 %}\n    \n    {% elseif data.face_vol > 100 and data.face_vol <= 1000 %}\n    {% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 1000 лиц)' %}\n    {% set face_ident_price = data.cena_module_face_ident_1000 %}\n    {% endif %}\n    \n    {% set face_ident_desc %}\n    <ul>\n      <li>Обязательный модуль, если выбрана опция идентификации лиц.</li>\n    </ul>\n    {% endset %}\n    {% set face_ident_vol = 1 %}\n    {% set face_ident_cost = (face_ident_price * face_ident_vol) %}\n    \n    {# Soft Subtotal #}\n    {% set total_soft_cost = (user_cost + time_track_cost + pass_print_cost + event_monitor_cost + onec_integration_cost + pass_ext_cost + event_response_cost + data_sync_cost + doc_ocr_cost + face_ident_camera_cost + face_ident_cost) %}\n    \n    {# Grand Total #}\n    {% set total = (total_hard_cost + total_soft_cost) %}\n    \n    {# Total cost calculation #}\n    {% if doors_total == 0 and users_total == 0 and turnstile_vol == 0 %}\n      0 ₽\n    {% else %}\n      {{total|number_format(0, '.', ' ')}} ₽\n    {% endif %}\n    \n    {# Debug\n    <br/>\n    <p style=\"font-size:10px; line-height: 10px\">\n    card_cost {{card_cost}} <br/> reader_cost {{reader_cost}} <br/> bbp_gate_cost {{bbp_gate_cost}} <br/> battery_gate_cost {{battery_gate_cost}} <br/> bbp_mech_cost {{bbp_mech_cost}} <br/> bbp_mag_cost {{bbp_mag_cost}} <br/> lock_mech_cost {{lock_mech_cost}} <br/> lock_mag_cost {{lock_mag_cost}} <br/> corner_cost {{corner_cost}} <br/> turnstile_cost {{turnstile_cost}} <br/> cardcapture_cost {{cardcapture_cost}} <br/> camera_cost {{camera_cost}} <br/> ep_cost {{ep_cost}} <br/> ep_two_cost {{ep_two_cost}} <br/> ep_four_cost {{ep_four_cost}} <br/> button_cost {{button_cost}} <br/> closer_cost {{closer_cost}} <br/> battery_cost {{battery_cost}} <br/> detector_door_cost {{detector_door_cost}} <br/> detector_controller_cost {{detector_controller_cost}} <br/> master_controller_cost {{master_controller_cost}} <br/> server_cost {{server_cost}} <br/> server_vol {{server_vol}} <br/> urm_cost {{urm_cost}}\n    <p>\n      #}\n    \n  '#whitespace': spaceless\n  '#ajax': true\npdf:\n  '#type': 'webform_entity_print_attachment:pdf'\n  '#title': PDF\n  '#title_display': invisible\n  '#filename': agrg_kp.pdf\n  '#view_mode': table\nactions:\n  '#type': webform_actions\n  '#title': 'Submit button(s)'\n  '#submit__label': 'Получить предложение'"
css: ''
javascript: ''
settings:
  ajax: true
  ajax_scroll_top: ''
  ajax_progress_type: throbber
  ajax_effect: fade
  ajax_speed: 200
  page: false
  page_submit_path: ''
  page_confirm_path: ''
  page_theme_name: ''
  form_title: source_entity_webform
  form_submit_once: false
  form_exception_message: ''
  form_open_message: ''
  form_close_message: ''
  form_previous_submissions: true
  form_confidential: false
  form_confidential_message: ''
  form_remote_addr: true
  form_convert_anonymous: false
  form_prepopulate: true
  form_prepopulate_source_entity: false
  form_prepopulate_source_entity_required: false
  form_prepopulate_source_entity_type: ''
  form_reset: false
  form_disable_autocomplete: false
  form_novalidate: false
  form_disable_inline_errors: false
  form_required: false
  form_unsaved: false
  form_disable_back: false
  form_submit_back: false
  form_autofocus: false
  form_details_toggle: false
  form_access_denied: default
  form_access_denied_title: ''
  form_access_denied_message: ''
  form_access_denied_attributes: {  }
  form_file_limit: ''
  share: false
  share_node: false
  share_theme_name: ''
  share_title: true
  share_page_body_attributes: {  }
  submission_label: 'Коммерческое предложение №[webform_submission:serial] от [webform_submission:completed:custom:d F Y]'
  submission_log: false
  submission_views: {  }
  submission_views_replace: {  }
  submission_user_columns: {  }
  submission_user_duplicate: false
  submission_access_denied: default
  submission_access_denied_title: ''
  submission_access_denied_message: ''
  submission_access_denied_attributes: {  }
  submission_exception_message: ''
  submission_locked_message: ''
  submission_excluded_elements:
    cena_karty_em_marine: cena_karty_em_marine
    cena_karty_hid: cena_karty_hid
    cena_karty_mifare: cena_karty_mifare
    cena_po_castle_50: cena_po_castle_50
    cena_po_castle_1000: cena_po_castle_1000
    cena_po_castle_10000: cena_po_castle_10000
    cena_po_castle_25000: cena_po_castle_25000
    cena_reader_em_marine_ordinary: cena_reader_em_marine_ordinary
    cena_reader_hid_ordinary: cena_reader_hid_ordinary
    cena_reader_mifare_ordinary: cena_reader_mifare_ordinary
    cena_bio_reader_em_marine: cena_bio_reader_em_marine
    cena_bio_reader_hid: cena_bio_reader_hid
    cena_bio_reader_mifare: cena_bio_reader_mifare
    cena_reader_em_marine_premium: cena_reader_em_marine_premium
    cena_reader_hid_premium: cena_reader_hid_premium
    cena_reader_mifare_premium: cena_reader_mifare_premium
    cena_reader_eywa_classics: cena_reader_eywa_classics
    cena_reader_eywa_art: cena_reader_eywa_art
    cena_ep: cena_ep
    cena_ep2: cena_ep2
    cena_ep4: cena_ep4
    cena_mechanical_lock: cena_mechanical_lock
    cena_magnetlock: cena_magnetlock
    cena_bbp_20: cena_bbp_20
    cena_bbp_50: cena_bbp_50
    cena_ivepr: cena_ivepr
    cena_battery_dt1207: cena_battery_dt1207
    cena_battery_dt1212: cena_battery_dt1212
    cena_button_ordinary: cena_button_ordinary
    cena_montage_corner: cena_montage_corner
    cena_closer_tantos_ts_dc085: cena_closer_tantos_ts_dc085
    cena_detector_door: cena_detector_door
    cena_detector_controller: cena_detector_controller
    cena_reader_master_em_marine: cena_reader_master_em_marine
    cena_reader_master_mifare: cena_reader_master_mifare
    cena_bio_reader_master: cena_bio_reader_master
    cena_camera: cena_camera
    cena_server_skud: cena_server_skud
    cena_server_face_10: cena_server_face_10
    cena_server_skud_50_rack: cena_server_skud_50_rack
    cena_server_skud_100_rack: cena_server_skud_100_rack
    cena_server_skud_50_mt: cena_server_skud_50_mt
    cena_urm_skud: cena_urm_skud
    cena_urm_skud_vesa: cena_urm_skud_vesa
    cena_urm_skud_rspb: cena_urm_skud_rspb
    cena_turnstile_tripod: cena_turnstile_tripod
    cena_turnstile_gate: cena_turnstile_gate
    cena_cardcapture: cena_cardcapture
    cena_module_time_track: cena_module_time_track
    cena_module_pass_print: cena_module_pass_print
    cena_module_event_monitor: cena_module_event_monitor
    cena_module_1c_integration: cena_module_1c_integration
    cena_module_pass_ext: cena_module_pass_ext
    cena_module_event_response: cena_module_event_response
    cena_module_data_sync: cena_module_data_sync
    cena_module_doc_ocr: cena_module_doc_ocr
    cena_module_face_recog: cena_module_face_recog
    cena_module_face_ident_10: cena_module_face_ident_10
    cena_module_face_ident_50: cena_module_face_ident_50
    cena_module_face_ident_100: cena_module_face_ident_100
    cena_module_face_ident_1000: cena_module_face_ident_1000
    cena_module_face_ident_camera: cena_module_face_ident_camera
    random: random
  submission_exclude_empty: true
  submission_exclude_empty_checkbox: true
  previous_submission_message: ''
  previous_submissions_message: ''
  autofill: false
  autofill_message: ''
  autofill_excluded_elements: {  }
  wizard_progress_bar: true
  wizard_progress_pages: false
  wizard_progress_percentage: false
  wizard_progress_link: false
  wizard_progress_states: false
  wizard_auto_forward: true
  wizard_auto_forward_hide_next_button: false
  wizard_keyboard: true
  wizard_start_label: ''
  wizard_preview_link: false
  wizard_confirmation: true
  wizard_confirmation_label: ''
  wizard_track: ''
  wizard_prev_button_label: ''
  wizard_next_button_label: ''
  wizard_toggle: true
  wizard_toggle_show_label: ''
  wizard_toggle_hide_label: ''
  preview: 0
  preview_label: ''
  preview_title: ''
  preview_message: ''
  preview_attributes: {  }
  preview_excluded_elements: {  }
  preview_exclude_empty: true
  preview_exclude_empty_checkbox: false
  draft: none
  draft_multiple: false
  draft_auto_save: false
  draft_saved_message: ''
  draft_loaded_message: ''
  draft_pending_single_message: ''
  draft_pending_multiple_message: ''
  confirmation_type: page
  confirmation_title: 'Ваше сообщение отправлено!'
  confirmation_message: '<p>На указанный Вами email-адрес отправлено коммерческое предложение.&nbsp;Если у Вас возникли вопросы, изложите их в ответном письме.&nbsp;Если письмо не пришло, проверьте папку нежелательных сообщений.</p>'
  confirmation_url: /confirm
  confirmation_attributes: {  }
  confirmation_back: true
  confirmation_back_label: 'Вернуться к форме'
  confirmation_back_attributes:
    class:
      - btn
    style: 'background: #4ace92;color: #fff;'
  confirmation_exclude_query: false
  confirmation_exclude_token: false
  confirmation_update: false
  limit_total: null
  limit_total_interval: null
  limit_total_message: ''
  limit_total_unique: false
  limit_user: null
  limit_user_interval: null
  limit_user_message: ''
  limit_user_unique: false
  entity_limit_total: null
  entity_limit_total_interval: null
  entity_limit_user: null
  entity_limit_user_interval: null
  purge: none
  purge_days: null
  results_disabled: false
  results_disabled_ignore: false
  results_customize: false
  token_view: false
  token_update: false
  token_delete: false
  serial_disabled: false
access:
  create:
    roles:
      - anonymous
      - authenticated
    users: {  }
    permissions: {  }
  view_any:
    roles: {  }
    users: {  }
    permissions: {  }
  update_any:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_any:
    roles: {  }
    users: {  }
    permissions: {  }
  purge_any:
    roles: {  }
    users: {  }
    permissions: {  }
  view_own:
    roles: {  }
    users: {  }
    permissions: {  }
  update_own:
    roles: {  }
    users: {  }
    permissions: {  }
  delete_own:
    roles: {  }
    users: {  }
    permissions: {  }
  administer:
    roles: {  }
    users: {  }
    permissions: {  }
  test:
    roles: {  }
    users: {  }
    permissions: {  }
  configuration:
    roles: {  }
    users: {  }
    permissions: {  }
handlers:
  email:
    id: email
    label: 'Подтверждение по email'
    notes: ''
    handler_id: email
    status: true
    conditions: {  }
    weight: 0
    settings:
      states:
        - completed
      to_mail: '[webform_submission:values:email:raw]'
      to_options: {  }
      cc_mail: ''
      cc_options: {  }
      bcc_mail: ''
      bcc_options: {  }
      from_mail: _default
      from_options: {  }
      from_name: _default
      subject: 'Ваш расчет на калькуляторе СКУД. Коммерческое предложение №[webform_submission:serial] от [webform_submission:completed:custom:d F Y]'
      body: "{% set doors_total = (data.oneside_door_volume + data.twoside_door_volume) %}\r\n{% set r_oneside = data.oneside_door_volume %}\r\n{% set r_twoside = (data.twoside_door_volume * 2) %}\r\n{% set users_total = (data.kolichestvo_kart + data.finger_vol + data.face_vol) %}\r\n\r\n{# Card / Reader calculation #}\r\n{% if data.tip_kart == 'Em-Marine' -%}\r\n  {% set card_name = 'Карта EM-Marine, бесконтактный идентификатор (толстая), TS' %}\r\n  {% set card_price = data.cena_karty_em_marine %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-EM' %}\r\n    {% set reader_price = data.cena_bio_reader_em_marine %}\r\n  {% else %}\r\n    {% set reader_name = 'Считыватель TS-RDR-E White EM-Marine' %}\r\n    {% set reader_price = data.cena_reader_em_marine_ordinary %}\r\n  {% endif %}\r\n\r\n{% elseif data.tip_kart == 'HID' %}\r\n  {% set card_name = 'Карта HID, бесконтактный идентификатор iC2002' %}\r\n  {% set card_price = data.cena_karty_hid %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель BioSmart 4-O-HD-N-L' %}\r\n    {% set reader_price = data.cena_bio_reader_hid %}\r\n  {% else %}\r\n    {% set reader_name = 'Считыватель TS-RDR-EHV-2 Metal HID' %}\r\n    {% set reader_price = data.cena_reader_hid_ordinary %}\r\n  {% endif %}\r\n\r\n{% elseif data.tip_kart == 'Mifare' %}\r\n  {% set card_name = 'Карта Mifare, бесконтактный идентификатор Smart-карта TS толстая (13,56МГц 1K)' %}\r\n  {% set card_price = data.cena_karty_mifare %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-MF' %}\r\n    {% set reader_price = data.cena_bio_reader_mifare %}\r\n  {% else %} \r\n    {% set reader_name = 'Считыватель TS-RDR-MF Metal Mifare' %}\r\n    {% set reader_price = data.cena_reader_mifare_ordinary %}\r\n  {% endif %}\r\n{%- endif %}\r\n\r\n  {# Reader style calculation #}\r\n  {% if data.readers_style == 'ordinary' or data.readers_style is empty -%}\r\n  {% elseif data.readers_style == 'eywa_classics' %}\r\n    {% set reader_name = 'Считыватель AGRG-CLS-B-ABL1-MF/EM-NONE-NO-LOGO' %}\r\n    {% set reader_price = data.cena_reader_eywa_classics %}\r\n  {% elseif data.readers_style == 'eywa_art' %}\r\n    {% set reader_name = 'Считыватель AGRG-ART-C-R-ABL1-MF/EM-BLU-NO-LOGO' %}\r\n    {% set reader_price = data.cena_reader_eywa_art %}\r\n  {%- endif %}  \r\n\r\n{% set card_vol = data.kolichestvo_kart %}\r\n{% set card_cost = (card_price * card_vol) %}\r\n\r\n{% set reader_vol = (r_oneside + r_twoside) %}\r\n{% set reader_cost = (reader_price * reader_vol) %}\r\n\r\n{# BBP / Lock calculation #}\r\n{% if data.lock_type == 'mechanical' -%}\r\n  {% set bbp_mech_vol = (doors_total / 3)|round(0, 'ceil') %}\r\n  {% set lock_mech_vol = doors_total %}\r\n\r\n{% elseif data.lock_type == 'magnet' %}\r\n  {% set bbp_mag_vol = (doors_total / 2)|round(0, 'ceil') %}\r\n  {% set lock_mag_vol = doors_total %}\r\n  {% set corner_vol = doors_total %}\r\n  \r\n{% elseif data.lock_type == 'mixed' %}\r\n  {% set bbp_mech_vol = (data.mechanical_lock_volume / 3)|round(0, 'ceil') %}\r\n  {% set bbp_mag_vol = (data.magnet_lock_volume / 2)|round(0, 'ceil') %}\r\n  {% set lock_mech_vol = data.mechanical_lock_volume %}\r\n  {% set lock_mag_vol = data.magnet_lock_volume %}\r\n  {% set corner_vol = data.magnet_lock_volume %}\r\n{%- endif %}\r\n\r\n{% set bbp_mech_name = 'Источник вторичного электропитания ББП-50 TS' %}\r\n{% set bbp_mech_price = data.cena_bbp_50 %}\r\n{% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\r\n\r\n{% set bbp_mag_name = 'Источник вторичного электропитания ББП-20 TS' %}\r\n{% set bbp_mag_price = data.cena_bbp_20 %}\r\n{% set bbp_mag_cost = (bbp_mag_price * bbp_mag_vol) %}\r\n\r\n{% set lock_mech_name = 'Защелка электромеханическая Viro 7755.70' %}\r\n{% set lock_mech_price = data.cena_mechanical_lock %}\r\n{% set lock_mech_cost = (lock_mech_price * lock_mech_vol) %}\r\n\r\n{% set lock_mag_name = 'Электромагнитный замок TS-ML300' %}\r\n{% set lock_mag_price = data.cena_magnetlock %}\r\n{% set lock_mag_cost = (lock_mag_price * lock_mag_vol) %}\r\n\r\n{% set corner_name = 'Монтажный L-образный уголок для крепления электромагнитного замка, TS-LM300' %}\r\n{% set corner_price = data.cena_montage_corner %}\r\n{% set corner_cost = (corner_price * corner_vol) %}\r\n\r\n{# Button calculation #}\r\n{% set button_name = 'Сенсорная кнопка выхода TS-MAGIC чёрный' %}\r\n{% set button_vol = data.oneside_door_volume %}\r\n{% set button_price = data.cena_button_ordinary %}\r\n{% set button_cost = (button_price * button_vol) %}\r\n\r\n{# Closer calculation #}\r\n{% set closer_name = 'TANTOS TS-DC085 Freeze серебро - доводчик дверной с усилием EN4 для дверей весом до 100 кг' %}\r\n{% set closer_vol = doors_total %}\r\n{% set closer_price = data.cena_closer_tantos_ts_dc085 %}\r\n{% set closer_cost = (closer_price * closer_vol) %}\r\n\r\n{# Battery calculation #}\r\n{% set battery_name = 'Аккумулятор 12В 7 А•ч (DT 1207)' %}\r\n{% set battery_vol = (bbp_mech_vol + bbp_mag_vol) %}\r\n{% set battery_price = data.cena_battery_dt1207 %}\r\n{% set battery_cost = (battery_price * battery_vol) %}\r\n\r\n{# Door Detector calculation #}\r\n{% set detector_door_name = 'Извещатель охранный магнитоконтактный ИО 102-26 исп.00 «Аякс»' %}\r\n{% set detector_door_vol = doors_total %}\r\n{% set detector_door_price = data.cena_detector_door %}\r\n{% set detector_door_cost = (detector_door_price * detector_door_vol) %}\r\n\r\n{# Controller Detector calculation #}\r\n{% set detector_controller_name = 'Извещатель ИОПР 513/101-3 «Аварийный выход» с крышкой' %}\r\n{% set detector_controller_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\r\n{% set detector_controller_price = data.cena_detector_controller %}\r\n{% set detector_controller_cost = (detector_controller_price * detector_controller_vol) %}\r\n\r\n{# Turnstile calculation #}\r\n{% if data.turnstile_check %}\r\n  {% set turnstile_vol = data.turnstile_volume %}\r\n  {% if data.turnstile_type == 'tripod' %}\r\n    {% set turnstile_name = 'Турникет-трипод PERCo-TTR-07.1G' %}\r\n    {% set turnstile_price = data.cena_turnstile_tripod %}\r\n    \r\n    {% set bbp_mech_vol = (bbp_mech_vol + turnstile_vol) %}\r\n    {% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\r\n    \r\n    {% set battery_vol = (battery_vol + turnstile_vol) %}\r\n    {% set battery_cost = (battery_price * battery_vol) %}\r\n    \r\n    {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\r\n    {% set reader_cost = (reader_price * reader_vol) %}\r\n  {% elseif data.turnstile_type == 'gate' %}\r\n    {% set turnstile_name = 'Турникет с раздвижными створками PERCo-ST-02.900' %}\r\n    {% set turnstile_price = data.cena_turnstile_gate %}\r\n    \r\n    {% set bbp_gate_name = 'Аккумулятор 12В 12 А∙ч (DT 1212)' %}\r\n    {% set bbp_gate_price = data.cena_battery_dt1212 %}\r\n    {% set bbp_gate_vol = (turnstile_vol * 2) %}\r\n    {% set bbp_gate_cost = (bbp_gate_price * bbp_gate_vol) %}\r\n\r\n    {% set battery_gate_name = 'Блок питания ИВЭПР 24/5 2x12-Р БР' %}\r\n    {% set battery_gate_price = data.cena_ivepr %}\r\n    {% set battery_gate_vol = turnstile_vol %}\r\n    {% set battery_gate_cost = (battery_gate_price * battery_gate_vol) %}\r\n    \r\n    {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\r\n    {% set reader_cost = (reader_price * reader_vol) %}\r\n  {% endif %}\r\n  {% set turnstile_cost = (turnstile_price * turnstile_vol) %}\r\n{% endif %}\r\n\r\n{% if data.cardcapture_check %}\r\n  {% set cardcapture_name = 'Картоприемник PERCo-IC05' %}\r\n  {% set cardcapture_price = data.cena_cardcapture %}\r\n  {% set cardcapture_vol = turnstile_vol %}\r\n  {% set cardcapture_cost = (cardcapture_price * cardcapture_vol) %}\r\n{% endif %}\r\n\r\n{# Controller calculation #}\r\n{% if data.door_distance == '30less' -%}\r\n  {% if data.oneside_door_volume > 1 and data.oneside_door_volume <= 4 -%}\r\n    {% set ep_four_vol = 1 %}\r\n  {% elseif data.oneside_door_volume == 1 %}\r\n    {% set ep_two_vol = 1 %}\r\n  {% else %}\r\n    {% set ep_four_vol = (data.oneside_door_volume / 4)|round(0, 'ceil') %}\r\n  {%- endif %}\r\n\r\n  {% if data.twoside_door_volume == 1 %}\r\n    {% set ep_two_vol = 1 %}\r\n  {% else %}\r\n    {% set ep_vol = (data.twoside_door_volume / 2)|round(0, 'ceil') %}  \r\n  {% endif %}\r\n\r\n{% elseif data.door_distance == '30more' %}\r\n  {% set ep_two_vol = doors_total %}\r\n{%- endif %}\r\n\r\n{% set ep_vol = (ep_vol + turnstile_vol) %}\r\n\r\n{% set ep_name = 'Сетевой контроллер Castle EP' %}\r\n{% set ep_price = data.cena_ep %}\r\n{% set ep_cost = (ep_price * ep_vol) %}\r\n\r\n{% set ep_two_name = 'Сетевой контроллер Castle EP2' %}\r\n{% set ep_two_price = data.cena_ep2 %}\r\n{% set ep_two_cost = (ep_two_price * ep_two_vol) %}\r\n\r\n{% set ep_four_name = 'Сетевой контроллер Castle EP4' %}\r\n{% set ep_four_price = data.cena_ep4 %}\r\n{% set ep_four_cost = (ep_four_price * ep_four_vol) %}\r\n\r\n{% set controllers_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\r\n\r\n{# Master Controller calculation #}\r\n{% if data.finger_vol > 0 %}\r\n  {% set master_controller_name = 'USB-считыватель настольный BioSmart FS-80' %}\r\n  {% set master_controller_price = data.cena_bio_reader_master %}\r\n{% else %}\r\n  {% if data.tip_kart == 'Em-Marine' or data.tip_kart == 'HID'%}\r\n    {% set master_controller_name = 'Контрольный считыватель карт форматов EM-Marine и HID настольный «Castle-Reader» с интерфейсом USB' %}\r\n    {% set master_controller_price = data.cena_reader_master_em_marine %}\r\n  {% elseif data.tip_kart == 'Mifare' %}\r\n    {% set master_controller_name = 'Контрольный считыватель «ACR1252U USB NFC Reader III» Mifare' %}\r\n    {% set master_controller_price = data.cena_reader_master_mifare %}\r\n  {% endif %}\r\n{% endif %}\r\n\r\n{% set master_controller_vol = 1 %}\r\n{% set master_controller_cost = (master_controller_price * master_controller_vol) %}\r\n\r\n{# Camera calculation #}\r\n{% if data.face_vol > 0 %}\r\n  {% set camera_name = 'Видеокамера сетевая (IP) TSi-Pe25VP' %}\r\n  {% set camera_price = data.cena_camera %}\r\n  {% set camera_vol = (r_oneside + r_twoside + turnstile_vol * 2) %}\r\n  {% set camera_cost = (camera_price * camera_vol) %}\r\n{% endif %}\r\n\r\n{# Server Face Ident calculation #}\r\n{% if camera_vol > 0 %}\r\n  {% if camera_vol <= 4 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\r\n    {% set server_desc %} \r\n    <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i7</li>\r\n      <li>Оперативная память: 8 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_100_rack %}\r\n    {% else %}\r\n    {% set server_name = 'Сервер \"AGRG VideoСервер vS 10 2988-134 2MPx.25fps.16TbR5\"' %}\r\n    {% set server_desc %} \r\n      <p>Сервер СКУД для организации доступа при помощи идентификации лиц, включая ПО:</p>\r\n      <ul>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Подключение видеоканала (лицензия на 10 каналов)</li>\r\n        <li>Программное обеспечение - Система защиты Guardant</li>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Ядро системы</li>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Интеграция СКУД Castle</li>\r\n      </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_face_10 %}\r\n  {% endif %}\r\n  {% set server_vol = (camera_vol / 10)|round(0, 'ceil') %}\r\n  {% set server_cost = (server_price * server_vol) %}\r\n{% endif %}\r\n\r\n{# Server calculation #}\r\n{% if data.server_skud %}\r\n  {% if controllers_vol > 0 and controllers_vol <= 20 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер vS SKUD.Castle.1Tb.m0.R1\":' %}\r\n    {% set server_desc %} \r\n    <p>Базовая платформа сервера СКУД для установки в стойку. Устанавливается в стойку (Rackmount 19&quot;, 1U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция). Максимально доступное решение:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: HDD 1Tb NAS</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 1U</li>\r\n      <li>Размеры (ШхГхВ): 430x250x44 мм</li>\r\n      <li>Питание: 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud %}\r\n  {% elseif controllers_vol > 20 and controllers_vol <= 50 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1T2.m1.MT\"' %}\r\n    {% set server_desc %} \r\n    <p>Базовая платформа сервера СКУД в корпусе MiniTower (компактное отдельностоящее исполнение). Поставляется с расширенной системой хранения архива событий базы данных. Оптимальное решение для объектов, на которых не используются серверные стойки для сетевого и серверного оборудования:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: HDD 2Tb Enterprise</li>\r\n      <li>Тип монтажа: отдельностоящий настольный</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_50_mt %}\r\n  {% elseif controllers_vol > 50 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\r\n    {% set server_desc %} \r\n    <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i7</li>\r\n      <li>Оперативная память: 8 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_100_rack %}\r\n  {% endif %}\r\n  \r\n  {% set server_vol = 1 %}\r\n  {% set server_cost = (server_price * server_vol) %}\r\n{% endif %}\r\n\r\n{# URM calculation #}\r\n{% if data.urm_skud_check %}\r\n  {% if data.urm_skud_type == 'mt_win' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.MT\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД в корпусе MiniTower (компактное отдельностоящее исполнение):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>Тип монтажа: настольный</li>\r\n      <li>Размеры (ШхГхВ): 230x264x112 мм</li>\r\n      <li>Питание: 220V, &gt;160W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set urm_price = data.cena_urm_skud %}\r\n  {% elseif data.urm_skud_type == 'vesa_win' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.NUC\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД в компактном корпусе с креплением VESA (для установки на монитор с аналогичным типом крепления). Компактная и эстетичная модель:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>Тип монтажа: VESA 100</li>\r\n      <li>Размеры (ШхГхВ): 115х111х48 мм</li>\r\n      <li>Питание: 220V, &gt;65W</li>\r\n    </ul>\r\n    {% endset %}    \r\n    {% set urm_price = data.cena_urm_skud_vesa %}\r\n  {% elseif data.urm_skud_type == 'mt_linux' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.RSPB\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД на базе ОС Линукс (ультракомпактное отдельностоящее исполнение). Минимальное энергопотребление, отказоустойчивость ОС Линукс, высокая скорость загрузки и выгодная цена для заказчика:</p>\r\n    <ul>\r\n      <li>Процессор: ARM</li>\r\n      <li>Оперативная память: 1 Гб</li>\r\n      <li>ОС: Ubuntu</li>\r\n      <li>Тип монтажа: настольный</li>\r\n      <li>Размеры (ШхГхВ): 100х70х40 мм</li>\r\n      <li>Питание: 220V</li>\r\n    </ul>\r\n    {% endset %}    \r\n    {% set urm_price = data.cena_urm_skud_rspb %}\r\n  {% endif %}\r\n\r\n{% set urm_vol = data.urm_skud %}\r\n{% set urm_cost = (urm_price * urm_vol) %}\r\n{% endif %}\r\n\r\n{# Hardware subtotal #}\r\n\r\n{% set total_hard_cost = (card_cost + reader_cost + bbp_mech_cost + bbp_mag_cost + lock_mech_cost + lock_mag_cost + corner_cost + turnstile_cost + cardcapture_cost + camera_cost + ep_cost + ep_two_cost + ep_four_cost + button_cost + closer_cost + battery_cost + detector_door_cost + detector_controller_cost + master_controller_cost + server_cost + urm_cost) %}\r\n{% set hard_nds = (total_hard_cost * 20 / 120) %}\r\n{% set total_hard_no_nds = (total_hard_cost - hard_nds) %}\r\n\r\n{# Users cost calculation #}\r\n{% if users_total <= '50' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 50 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_50 %}\r\n  {% set user_cost = (user_price * user_vol) %}\r\n  \r\n  {% elseif users_total > '50' and users_total <= '1000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 1000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_1000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n\r\n  {% elseif users_total > '1000' and users_total <= '10000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 10 000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_10000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n\r\n  {% elseif users_total > '10000' and users_total <= '25000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 25 000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_25000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n{% endif %}\r\n\r\n{# Extra Modules calculation #}\r\n{% if data.module_po_castle_time_track %}\r\n{% set time_track_name = 'Дополнительный модуль ПО Castle «Учет рабочего времени»' %}\r\n{% set time_track_desc %} \r\n<ul>\r\n  <li>Создание рабочих графиков для сотрудников</li>\r\n  <li>Получение отчетов за любой исторический период</li>\r\n  <li>Полный журнал отклонений от рабочего графика</li>\r\n  <li>Журнал неявок, опозданий и других временных нарушений рабочей дисциплины</li>\r\n</ul>\r\n{% endset %}\r\n{% set time_track_vol = 1 %}\r\n{% set time_track_price = data.cena_module_time_track %}\r\n{% set time_track_cost = (time_track_price * time_track_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_pass_print %}\r\n{% set pass_print_name = 'Дополнительный модуль ПО Castle «Создание и печать пропусков»' %}\r\n{% set pass_print_desc %} \r\n<ul>\r\n  <li>Создание и редактирование шаблонов графического оформления пропусков</li>\r\n  <li>Назначение шаблонов пропусков для сотрудников</li>\r\n  <li>Печать пропусков на основании шаблонов и персональных данных сотрудников</li>\r\n</ul>\r\n{% endset %}\r\n{% set pass_print_vol = 1 %}\r\n{% set pass_print_price = data.cena_module_pass_print %}\r\n{% set pass_print_cost = (pass_print_price * pass_print_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_event_monitor %}\r\n{% set event_monitor_name = 'Дополнительный модуль «Мониторинг событий (фотоидентификация)»' %}\r\n{% set event_monitor_desc %} \r\n<ul>\r\n  <li>Наблюдение в режиме реального времени за событиями, происходящими в системе. При запросе прохода сотрудником отображается его учетная карточка из базы, включающая фотографию.</li>\r\n</ul>\r\n{% endset %}\r\n{% set event_monitor_vol = 1 %}\r\n{% set event_monitor_price = data.cena_module_event_monitor %}\r\n{% set event_monitor_cost = (event_monitor_price * event_monitor_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_1c_integration %}\r\n{% set onec_integration_name = 'Дополнительный модуль «Интеграция с 1С»' %}\r\n{% set onec_integration_desc %} \r\n<ul>\r\n  <li>Дополняет функции модуля &laquo;Учет рабочего времени&raquo;</li>\r\n  <li>Автоматическая передача табеля (форма Т-13) в &laquo;1C: Предприятие&raquo;</li>\r\n</ul>\r\n{% endset %}\r\n{% set onec_integration_vol = 1 %}\r\n{% set onec_integration_price = data.cena_module_1c_integration %}\r\n{% set onec_integration_cost = (onec_integration_price * onec_integration_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_pass_ext or data.cardcapture_check %}\r\n{% set pass_ext_name = 'Дополнительный модуль «Расширенная поддержка пропусков посетителей»' %}\r\n{% set pass_ext_desc %} \r\n<ul>\r\n  <li>Интерфейс для выдачи/сбора карт (АРМ &laquo;Бюро пропусков&raquo;), при выдаче происходит привязка карты к паспорту или другому документу посетителя</li>\r\n  <li>Хранение истории выдачи карт</li>\r\n  <li>Задание списка карт посетителей</li>\r\n</ul>\r\n{% endset %}\r\n{% set pass_ext_vol = 1 %}\r\n{% set pass_ext_price = data.cena_module_pass_ext %}\r\n{% set pass_ext_cost = (pass_ext_price * pass_ext_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_event_response %}\r\n{% set event_response_name = 'Дополнительный модуль «Реакция на события»' %}\r\n{% set event_response_desc %} \r\n<ul>\r\n  <li>Задание списка действий, которые будут выполняться системой автоматически при наступлении каких-либо событий. Например, возможна отправка SMS-сообщения на указанный телефонный номер.</li>\r\n</ul>\r\n{% endset %}\r\n{% set event_response_vol = 1 %}\r\n{% set event_response_price = data.cena_module_event_response %}\r\n{% set event_response_cost = (event_response_price * event_response_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_data_sync %}\r\n{% set data_sync_name = 'Дополнительный модуль «Синхронизация данных»' %}\r\n{% set data_sync_desc %} \r\n<ul>\r\n  <li>Автоматическая синхронизация списка сотрудников в СКУД по внешней базе данных существующей корпоративной системы.</li>\r\n</ul>\r\n{% endset %}\r\n{% set data_sync_vol = 1 %}\r\n{% set data_sync_price = data.cena_module_data_sync %}\r\n{% set data_sync_cost = (data_sync_price * data_sync_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_doc_ocr %}\r\n{% set doc_ocr_name = 'Дополнительный модуль «Распознавание документов»' %}\r\n{% set doc_ocr_desc %} \r\n<ul>\r\n  <li>Автоматическое сканирование и распознавание документов при выдаче временного пропуска посетителю.</li>\r\n</ul>\r\n{% endset %}\r\n{% set doc_ocr_vol = 1 %}\r\n{% set doc_ocr_price = data.cena_module_doc_ocr %}\r\n{% set doc_ocr_cost = (doc_ocr_price * doc_ocr_vol) %}\r\n{% endif %}\r\n\r\n{# Face Ident per camera calculation #}\r\n{% if camera_vol > 0 %}\r\n{% set face_ident_camera_name = 'Модуль «Идентификация лица» (лицензия на одну камеру)' %}\r\n{% set face_ident_camera_price = data.cena_module_face_ident_camera %}\r\n{% set face_ident_camera_vol = camera_vol %}\r\n{% set face_ident_camera_cost = (face_ident_camera_price * face_ident_camera_vol) %}\r\n{% endif %}\r\n\r\n{# Face ident calculation #}\r\n{% if data.face_vol > 0 and data.face_vol <= 10 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 10 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_10 %}\r\n\r\n{% elseif data.face_vol > 10 and data.face_vol <= 50 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 50 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_50 %}\r\n\r\n{% elseif data.face_vol > 50 and data.face_vol <= 100 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 100 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_100 %}\r\n\r\n{% elseif data.face_vol > 100 and data.face_vol <= 1000 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 1000 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_1000 %}\r\n{% endif %}\r\n\r\n{% set face_ident_desc %}\r\n<ul>\r\n  <li>Обязательный модуль, если выбрана опция идентификации лиц.</li>\r\n</ul>\r\n{% endset %}\r\n{% set face_ident_vol = 1 %}\r\n{% set face_ident_cost = (face_ident_price * face_ident_vol) %}\r\n\r\n{# Soft Subtotal #}\r\n{% set total_soft_cost = (user_cost + time_track_cost + pass_print_cost + event_monitor_cost + onec_integration_cost + pass_ext_cost + event_response_cost + data_sync_cost + doc_ocr_cost + face_ident_camera_cost + face_ident_cost) %}\r\n\r\n{# Grand Total #}\r\n{% set total = (total_hard_cost + total_soft_cost) %}\r\n\r\n{# Message Body #}\r\n\r\n<table width=\"100%\" style=\"font-size:14px;line-height:18px\" cellpadding=\"10\">\r\n  <colgroup width=\"50%\"></colgroup>\r\n  <colgroup width=\"10%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <thead>\r\n    <tr style=\"background: #505050; color:#fff\">\r\n      <td>Товары (работы, услуги)</td>\r\n      <td>Кол-во</td>\r\n      <td>Цена (с НДС)</td>\r\n      <td>Сумма (с НДС)</td>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {# Card #}\r\n    {% if card_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ card_name }}</td>  \r\n      <td>{{ card_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ card_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ card_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# Reader #}\r\n    {% if reader_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ reader_name }}</td>\r\n      <td>{{ reader_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ reader_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ reader_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# BBP #}\r\n    {% if bbp_mech_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_mech_name }}</td>\r\n      <td>{{ bbp_mech_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_mech_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_mech_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if bbp_mag_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_mag_name }}</td>\r\n      <td>{{ bbp_mag_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_mag_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_mag_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# BBP Gate #}\r\n    {% if bbp_gate_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_gate_name }}</td>\r\n      <td>{{ bbp_gate_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_gate_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_gate_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# Lock #}\r\n    {% if lock_mech_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ lock_mech_name }}</td>\r\n      <td>{{ lock_mech_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ lock_mech_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ lock_mech_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if lock_mag_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ lock_mag_name }}</td>\r\n      <td>{{ lock_mag_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ lock_mag_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ lock_mag_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Corner #}\r\n    {% if corner_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ corner_name }}</td>\r\n      <td>{{ corner_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ corner_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ corner_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Turnstile #}\r\n    {% if turnstile_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ turnstile_name }}</td>\r\n      <td>{{ turnstile_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ turnstile_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ turnstile_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {% if cardcapture_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ cardcapture_name }}</td>\r\n      <td>{{ cardcapture_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ cardcapture_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ cardcapture_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Controller #}\r\n    {% if ep_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_name }}</td>\r\n      <td>{{ ep_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if ep_two_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_two_name }}</td>\r\n      <td>{{ ep_two_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_two_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_two_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if ep_four_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_four_name }}</td>\r\n      <td>{{ ep_four_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_four_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_four_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Button #}\r\n    {% if button_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ button_name }}</td>\r\n      <td>{{ button_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ button_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ button_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Closer #}\r\n    {% if closer_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ closer_name }}</td>\r\n      <td>{{ closer_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ closer_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ closer_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Battery #}\r\n    {% if battery_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ battery_name }}</td>\r\n      <td>{{ battery_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ battery_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ battery_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Battery Gate #}\r\n    {% if battery_gate_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ battery_gate_name }}</td>\r\n      <td>{{ battery_gate_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ battery_gate_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ battery_gate_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Door Detector #}\r\n    {% if detector_door_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ detector_door_name }}</td>\r\n      <td>{{ detector_door_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ detector_door_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ detector_door_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Controller Detector #}\r\n    {% if detector_controller_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ detector_controller_name }}</td>\r\n      <td>{{ detector_controller_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ detector_controller_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ detector_controller_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Master Controller #}\r\n    {% if master_controller_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ master_controller_name }}</td>\r\n      <td>{{ master_controller_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ master_controller_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ master_controller_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Camera #}\r\n    {% if camera_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ camera_name }}</td>\r\n      <td>{{ camera_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ camera_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ camera_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Server #}\r\n    {% if data.server_skud or camera_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ server_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ server_desc}}</p></td>\r\n      <td>{{ server_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ server_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ server_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# URM #}\r\n    {% if data.urm_skud_check %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ urm_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ urm_desc}}</p></td>\r\n      <td>{{ urm_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ urm_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ urm_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n  </tbody>\r\n</table>\r\n\r\n{# hardware subtotal #}\r\n<table width=\"100%\" style=\"font-size: 14px;line-height: 18px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>  \r\n  <tr>\r\n    <td style=\"text-align:right\">Итого (товары, услуги) без НДС: </td>\r\n    <td style=\"text-align:left\">{{ total_hard_no_nds|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n  <tr>\r\n    <td style=\"text-align:right\">Сумма НДС (20%): </td>\r\n    <td style=\"text-align:left\">{{ hard_nds|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n  <tr>\r\n    <td style=\"text-align:right\">Всего оборудование: </td>\r\n    <td style=\"text-align:left\">{{ total_hard_cost|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n</table>\r\n\r\n<table width=\"100%\" style=\"font-size:14px;line-height:18px\" cellpadding=\"10\">\r\n  <colgroup width=\"50%\"></colgroup>\r\n  <colgroup width=\"10%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <thead>\r\n    <tr style=\"background: #505050; color:#fff\">\r\n      <td>Товары (программное обеспечение)</td>\r\n      <td>Кол-во</td>\r\n      <td>Цена (с НДС)</td>\r\n      <td>Сумма (с НДС)</td>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {# User #}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ user_name }}</td>\r\n      <td>{{ user_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ user_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ user_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    \r\n    {# Time Track #}\r\n    {% if data.module_po_castle_time_track %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ time_track_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ time_track_desc}}</p></td>\r\n      <td>{{ time_track_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ time_track_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ time_track_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# pass_print #}\r\n    {% if data.module_po_castle_pass_print %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ pass_print_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ pass_print_desc}}</p></td>\r\n      <td>{{ pass_print_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ pass_print_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ pass_print_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# event_monitor #}\r\n    {% if data.module_po_castle_event_monitor %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ event_monitor_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ event_monitor_desc}}</p></td>\r\n      <td>{{ event_monitor_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ event_monitor_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ event_monitor_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# 1c_integration #}\r\n    {% if data.module_po_castle_1c_integration %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ onec_integration_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ onec_integration_desc}}</p></td>\r\n      <td>{{ onec_integration_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ onec_integration_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ onec_integration_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# pass_ext #}\r\n    {% if data.module_po_castle_pass_ext %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ pass_ext_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ pass_ext_desc}}</p></td>\r\n      <td>{{ pass_ext_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ pass_ext_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ pass_ext_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# event_response #}\r\n    {% if data.module_po_castle_event_response %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ event_response_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ event_response_desc}}</p></td>\r\n      <td>{{ event_response_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ event_response_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ event_response_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# data_sync #}\r\n    {% if data.module_po_castle_data_sync %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ data_sync_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ data_sync_desc}}</p></td>\r\n      <td>{{ data_sync_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ data_sync_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ data_sync_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# doc_ocr #}\r\n    {% if data.module_po_castle_doc_ocr %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ doc_ocr_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ doc_ocr_desc}}</p></td>\r\n      <td>{{ doc_ocr_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ doc_ocr_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ doc_ocr_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# face_ident_camera #}\r\n    {% if camera_vol > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ face_ident_camera_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ face_ident_camera_desc}}</p></td>\r\n      <td>{{ face_ident_camera_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ face_ident_camera_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ face_ident_camera_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# face_ident #}\r\n    {% if data.face_vol > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ face_ident_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ face_ident_desc}}</p></td>\r\n      <td>{{ face_ident_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ face_ident_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ face_ident_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n  </tbody>\r\n</table>\r\n\r\n{# software subtotal #}\r\n<table width=\"100%\" style=\"font-size: 14px;line-height: 18px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n    <tr>\r\n      <td style=\"text-align:right\">Итого (программное обеспечение): </td>\r\n      <td style=\"text-align:left\">{{ total_soft_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:right\">Сумма НДС (20%): </td>\r\n      <td style=\"text-align:left\">—</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:right\">Всего ПО: </td>\r\n      <td style=\"text-align:left\">{{ total_soft_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n</table>\r\n\r\n<p>НДС не облагается согласно подпункту 26 пункта 2 статьи 149 НК РФ.</p>\r\n<table width=\"100%\" style=\"font-size: 18px;line-height: 24px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <tr>\r\n    <td style=\"text-align:left\">Общая сумма КП (оборудование + программное обеспечение):</td>\r\n    <td style=\"text-align:left\">{{ total|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n</table>"
      excluded_elements:
        tip_kart: tip_kart
        cena_karty_hid: cena_karty_hid
        cena_karty_mifare: cena_karty_mifare
        cena_po_castle_50: cena_po_castle_50
        cena_po_castle_1000: cena_po_castle_1000
        cena_po_castle_10000: cena_po_castle_10000
        cena_po_castle_25000: cena_po_castle_25000
        cena_reader_em_marine_ordinary: cena_reader_em_marine_ordinary
        cena_reader_hid_ordinary: cena_reader_hid_ordinary
        cena_reader_mifare_ordinary: cena_reader_mifare_ordinary
        cena_reader_em_marine_premium: cena_reader_em_marine_premium
        cena_reader_hid_premium: cena_reader_hid_premium
        cena_reader_mifare_premium: cena_reader_mifare_premium
        cena_ep: cena_ep
        cena_ep2: cena_ep2
        cena_ep4: cena_ep4
        cena_module_time_track: cena_module_time_track
        cena_module_pass_print: cena_module_pass_print
        cena_module_event_monitor: cena_module_event_monitor
        cena_module_1c_integration: cena_module_1c_integration
        cena_module_pass_ext: cena_module_pass_ext
        cena_module_event_response: cena_module_event_response
        cena_module_data_sync: cena_module_data_sync
        cena_module_doc_ocr: cena_module_doc_ocr
        random: random
        fake: fake
      ignore_access: false
      exclude_empty: true
      exclude_empty_checkbox: true
      exclude_attachments: false
      html: true
      attachments: false
      twig: true
      debug: false
      reply_to: ''
      return_path: ''
      sender_mail: ''
      sender_name: ''
      theme_name: ''
      parameters: {  }
  email_planfix:
    id: email
    label: 'Уведомление в ПланФикс'
    notes: ''
    handler_id: email_planfix
    status: true
    conditions: {  }
    weight: 1
    settings:
      states:
        - completed
      to_mail: project+660@agrg.planfix.ru
      to_options: {  }
      cc_mail: ''
      cc_options: {  }
      bcc_mail: ep@agrg.ru
      bcc_options: {  }
      from_mail: _default
      from_options: {  }
      from_name: _default
      subject: 'Расчет на калькуляторе СКУД'
      body: "{% set doors_total = (data.oneside_door_volume + data.twoside_door_volume) %}\r\n{% set r_oneside = data.oneside_door_volume %}\r\n{% set r_twoside = (data.twoside_door_volume * 2) %}\r\n{% set users_total = (data.kolichestvo_kart + data.finger_vol + data.face_vol) %}\r\n\r\n{# Card / Reader calculation #}\r\n{% if data.tip_kart == 'Em-Marine' -%}\r\n  {% set card_name = 'Карта EM-Marine, бесконтактный идентификатор (толстая), TS' %}\r\n  {% set card_price = data.cena_karty_em_marine %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-EM' %}\r\n    {% set reader_price = data.cena_bio_reader_em_marine %}\r\n  {% else %}\r\n    {% set reader_name = 'Считыватель TS-RDR-E White EM-Marine' %}\r\n    {% set reader_price = data.cena_reader_em_marine_ordinary %}\r\n  {% endif %}\r\n\r\n{% elseif data.tip_kart == 'HID' %}\r\n  {% set card_name = 'Карта HID, бесконтактный идентификатор iC2002' %}\r\n  {% set card_price = data.cena_karty_hid %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель BioSmart 4-O-HD-N-L' %}\r\n    {% set reader_price = data.cena_bio_reader_hid %}\r\n  {% else %}\r\n    {% set reader_name = 'Считыватель TS-RDR-EHV-2 Metal HID' %}\r\n    {% set reader_price = data.cena_reader_hid_ordinary %}\r\n  {% endif %}\r\n\r\n{% elseif data.tip_kart == 'Mifare' %}\r\n  {% set card_name = 'Карта Mifare, бесконтактный идентификатор Smart-карта TS толстая (13,56МГц 1K)' %}\r\n  {% set card_price = data.cena_karty_mifare %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-MF' %}\r\n    {% set reader_price = data.cena_bio_reader_mifare %}\r\n  {% else %} \r\n    {% set reader_name = 'Считыватель TS-RDR-MF Metal Mifare' %}\r\n    {% set reader_price = data.cena_reader_mifare_ordinary %}\r\n  {% endif %}\r\n{%- endif %}\r\n\r\n  {# Reader style calculation #}\r\n  {% if data.readers_style == 'ordinary' or data.readers_style is empty -%}\r\n  {% elseif data.readers_style == 'eywa_classics' %}\r\n    {% set reader_name = 'Считыватель AGRG-CLS-B-ABL1-MF/EM-NONE-NO-LOGO' %}\r\n    {% set reader_price = data.cena_reader_eywa_classics %}\r\n  {% elseif data.readers_style == 'eywa_art' %}\r\n    {% set reader_name = 'Считыватель AGRG-ART-C-R-ABL1-MF/EM-BLU-NO-LOGO' %}\r\n    {% set reader_price = data.cena_reader_eywa_art %}\r\n  {%- endif %}  \r\n\r\n{% set card_vol = data.kolichestvo_kart %}\r\n{% set card_cost = (card_price * card_vol) %}\r\n\r\n{% set reader_vol = (r_oneside + r_twoside) %}\r\n{% set reader_cost = (reader_price * reader_vol) %}\r\n\r\n{# BBP / Lock calculation #}\r\n{% if data.lock_type == 'mechanical' -%}\r\n  {% set bbp_mech_vol = (doors_total / 3)|round(0, 'ceil') %}\r\n  {% set lock_mech_vol = doors_total %}\r\n\r\n{% elseif data.lock_type == 'magnet' %}\r\n  {% set bbp_mag_vol = (doors_total / 2)|round(0, 'ceil') %}\r\n  {% set lock_mag_vol = doors_total %}\r\n  {% set corner_vol = doors_total %}\r\n  \r\n{% elseif data.lock_type == 'mixed' %}\r\n  {% set bbp_mech_vol = (data.mechanical_lock_volume / 3)|round(0, 'ceil') %}\r\n  {% set bbp_mag_vol = (data.magnet_lock_volume / 2)|round(0, 'ceil') %}\r\n  {% set lock_mech_vol = data.mechanical_lock_volume %}\r\n  {% set lock_mag_vol = data.magnet_lock_volume %}\r\n  {% set corner_vol = data.magnet_lock_volume %}\r\n{%- endif %}\r\n\r\n{% set bbp_mech_name = 'Источник вторичного электропитания ББП-50 TS' %}\r\n{% set bbp_mech_price = data.cena_bbp_50 %}\r\n{% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\r\n\r\n{% set bbp_mag_name = 'Источник вторичного электропитания ББП-20 TS' %}\r\n{% set bbp_mag_price = data.cena_bbp_20 %}\r\n{% set bbp_mag_cost = (bbp_mag_price * bbp_mag_vol) %}\r\n\r\n{% set lock_mech_name = 'Защелка электромеханическая Viro 7755.70' %}\r\n{% set lock_mech_price = data.cena_mechanical_lock %}\r\n{% set lock_mech_cost = (lock_mech_price * lock_mech_vol) %}\r\n\r\n{% set lock_mag_name = 'Электромагнитный замок TS-ML300' %}\r\n{% set lock_mag_price = data.cena_magnetlock %}\r\n{% set lock_mag_cost = (lock_mag_price * lock_mag_vol) %}\r\n\r\n{% set corner_name = 'Монтажный L-образный уголок для крепления электромагнитного замка, TS-LM300' %}\r\n{% set corner_price = data.cena_montage_corner %}\r\n{% set corner_cost = (corner_price * corner_vol) %}\r\n\r\n{# Button calculation #}\r\n{% set button_name = 'Сенсорная кнопка выхода TS-MAGIC чёрный' %}\r\n{% set button_vol = data.oneside_door_volume %}\r\n{% set button_price = data.cena_button_ordinary %}\r\n{% set button_cost = (button_price * button_vol) %}\r\n\r\n{# Closer calculation #}\r\n{% set closer_name = 'TANTOS TS-DC085 Freeze серебро - доводчик дверной с усилием EN4 для дверей весом до 100 кг' %}\r\n{% set closer_vol = doors_total %}\r\n{% set closer_price = data.cena_closer_tantos_ts_dc085 %}\r\n{% set closer_cost = (closer_price * closer_vol) %}\r\n\r\n{# Battery calculation #}\r\n{% set battery_name = 'Аккумулятор 12В 7 А•ч (DT 1207)' %}\r\n{% set battery_vol = (bbp_mech_vol + bbp_mag_vol) %}\r\n{% set battery_price = data.cena_battery_dt1207 %}\r\n{% set battery_cost = (battery_price * battery_vol) %}\r\n\r\n{# Door Detector calculation #}\r\n{% set detector_door_name = 'Извещатель охранный магнитоконтактный ИО 102-26 исп.00 «Аякс»' %}\r\n{% set detector_door_vol = doors_total %}\r\n{% set detector_door_price = data.cena_detector_door %}\r\n{% set detector_door_cost = (detector_door_price * detector_door_vol) %}\r\n\r\n{# Controller Detector calculation #}\r\n{% set detector_controller_name = 'Извещатель ИОПР 513/101-3 «Аварийный выход» с крышкой' %}\r\n{% set detector_controller_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\r\n{% set detector_controller_price = data.cena_detector_controller %}\r\n{% set detector_controller_cost = (detector_controller_price * detector_controller_vol) %}\r\n\r\n{# Turnstile calculation #}\r\n{% if data.turnstile_check %}\r\n  {% set turnstile_vol = data.turnstile_volume %}\r\n  {% if data.turnstile_type == 'tripod' %}\r\n    {% set turnstile_name = 'Турникет-трипод PERCo-TTR-07.1G' %}\r\n    {% set turnstile_price = data.cena_turnstile_tripod %}\r\n    \r\n    {% set bbp_mech_vol = (bbp_mech_vol + turnstile_vol) %}\r\n    {% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\r\n    \r\n    {% set battery_vol = (battery_vol + turnstile_vol) %}\r\n    {% set battery_cost = (battery_price * battery_vol) %}\r\n    \r\n    {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\r\n    {% set reader_cost = (reader_price * reader_vol) %}\r\n  {% elseif data.turnstile_type == 'gate' %}\r\n    {% set turnstile_name = 'Турникет с раздвижными створками PERCo-ST-02.900' %}\r\n    {% set turnstile_price = data.cena_turnstile_gate %}\r\n    \r\n    {% set bbp_gate_name = 'Аккумулятор 12В 12 А∙ч (DT 1212)' %}\r\n    {% set bbp_gate_price = data.cena_battery_dt1212 %}\r\n    {% set bbp_gate_vol = (turnstile_vol * 2) %}\r\n    {% set bbp_gate_cost = (bbp_gate_price * bbp_gate_vol) %}\r\n\r\n    {% set battery_gate_name = 'Блок питания ИВЭПР 24/5 2x12-Р БР' %}\r\n    {% set battery_gate_price = data.cena_ivepr %}\r\n    {% set battery_gate_vol = turnstile_vol %}\r\n    {% set battery_gate_cost = (battery_gate_price * battery_gate_vol) %}\r\n    \r\n    {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\r\n    {% set reader_cost = (reader_price * reader_vol) %}\r\n  {% endif %}\r\n  {% set turnstile_cost = (turnstile_price * turnstile_vol) %}\r\n{% endif %}\r\n\r\n{% if data.cardcapture_check %}\r\n  {% set cardcapture_name = 'Картоприемник PERCo-IC05' %}\r\n  {% set cardcapture_price = data.cena_cardcapture %}\r\n  {% set cardcapture_vol = turnstile_vol %}\r\n  {% set cardcapture_cost = (cardcapture_price * cardcapture_vol) %}\r\n{% endif %}\r\n\r\n{# Controller calculation #}\r\n{% if data.door_distance == '30less' -%}\r\n  {% if data.oneside_door_volume > 1 and data.oneside_door_volume <= 4 -%}\r\n    {% set ep_four_vol = 1 %}\r\n  {% elseif data.oneside_door_volume == 1 %}\r\n    {% set ep_two_vol = 1 %}\r\n  {% else %}\r\n    {% set ep_four_vol = (data.oneside_door_volume / 4)|round(0, 'ceil') %}\r\n  {%- endif %}\r\n\r\n  {% if data.twoside_door_volume == 1 %}\r\n    {% set ep_two_vol = 1 %}\r\n  {% else %}\r\n    {% set ep_vol = (data.twoside_door_volume / 2)|round(0, 'ceil') %}  \r\n  {% endif %}\r\n\r\n{% elseif data.door_distance == '30more' %}\r\n  {% set ep_two_vol = doors_total %}\r\n{%- endif %}\r\n\r\n{% set ep_vol = (ep_vol + turnstile_vol) %}\r\n\r\n{% set ep_name = 'Сетевой контроллер Castle EP' %}\r\n{% set ep_price = data.cena_ep %}\r\n{% set ep_cost = (ep_price * ep_vol) %}\r\n\r\n{% set ep_two_name = 'Сетевой контроллер Castle EP2' %}\r\n{% set ep_two_price = data.cena_ep2 %}\r\n{% set ep_two_cost = (ep_two_price * ep_two_vol) %}\r\n\r\n{% set ep_four_name = 'Сетевой контроллер Castle EP4' %}\r\n{% set ep_four_price = data.cena_ep4 %}\r\n{% set ep_four_cost = (ep_four_price * ep_four_vol) %}\r\n\r\n{% set controllers_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\r\n\r\n{# Master Controller calculation #}\r\n{% if data.finger_vol > 0 %}\r\n  {% set master_controller_name = 'USB-считыватель настольный BioSmart FS-80' %}\r\n  {% set master_controller_price = data.cena_bio_reader_master %}\r\n{% else %}\r\n  {% if data.tip_kart == 'Em-Marine' or data.tip_kart == 'HID'%}\r\n    {% set master_controller_name = 'Контрольный считыватель карт форматов EM-Marine и HID настольный «Castle-Reader» с интерфейсом USB' %}\r\n    {% set master_controller_price = data.cena_reader_master_em_marine %}\r\n  {% elseif data.tip_kart == 'Mifare' %}\r\n    {% set master_controller_name = 'Контрольный считыватель «ACR1252U USB NFC Reader III» Mifare' %}\r\n    {% set master_controller_price = data.cena_reader_master_mifare %}\r\n  {% endif %}\r\n{% endif %}\r\n\r\n{% set master_controller_vol = 1 %}\r\n{% set master_controller_cost = (master_controller_price * master_controller_vol) %}\r\n\r\n{# Camera calculation #}\r\n{% if data.face_vol > 0 %}\r\n  {% set camera_name = 'Видеокамера сетевая (IP) TSi-Pe25VP' %}\r\n  {% set camera_price = data.cena_camera %}\r\n  {% set camera_vol = (r_oneside + r_twoside + turnstile_vol * 2) %}\r\n  {% set camera_cost = (camera_price * camera_vol) %}\r\n{% endif %}\r\n\r\n{# Server Face Ident calculation #}\r\n{% if camera_vol > 0 %}\r\n  {% if camera_vol <= 4 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\r\n    {% set server_desc %} \r\n    <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i7</li>\r\n      <li>Оперативная память: 8 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_100_rack %}\r\n    {% else %}\r\n    {% set server_name = 'Сервер \"AGRG VideoСервер vS 10 2988-134 2MPx.25fps.16TbR5\"' %}\r\n    {% set server_desc %} \r\n      <p>Сервер СКУД для организации доступа при помощи идентификации лиц, включая ПО:</p>\r\n      <ul>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Подключение видеоканала (лицензия на 10 каналов)</li>\r\n        <li>Программное обеспечение - Система защиты Guardant</li>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Ядро системы</li>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Интеграция СКУД Castle</li>\r\n      </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_face_10 %}\r\n  {% endif %}\r\n  {% set server_vol = (camera_vol / 10)|round(0, 'ceil') %}\r\n  {% set server_cost = (server_price * server_vol) %}\r\n{% endif %}\r\n\r\n{# Server calculation #}\r\n{% if data.server_skud %}\r\n  {% if controllers_vol > 0 and controllers_vol <= 20 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер vS SKUD.Castle.1Tb.m0.R1\":' %}\r\n    {% set server_desc %} \r\n    <p>Базовая платформа сервера СКУД для установки в стойку. Устанавливается в стойку (Rackmount 19&quot;, 1U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция). Максимально доступное решение:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: HDD 1Tb NAS</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 1U</li>\r\n      <li>Размеры (ШхГхВ): 430x250x44 мм</li>\r\n      <li>Питание: 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud %}\r\n  {% elseif controllers_vol > 20 and controllers_vol <= 50 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1T2.m1.MT\"' %}\r\n    {% set server_desc %} \r\n    <p>Базовая платформа сервера СКУД в корпусе MiniTower (компактное отдельностоящее исполнение). Поставляется с расширенной системой хранения архива событий базы данных. Оптимальное решение для объектов, на которых не используются серверные стойки для сетевого и серверного оборудования:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: HDD 2Tb Enterprise</li>\r\n      <li>Тип монтажа: отдельностоящий настольный</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_50_mt %}\r\n  {% elseif controllers_vol > 50 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\r\n    {% set server_desc %} \r\n    <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i7</li>\r\n      <li>Оперативная память: 8 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_100_rack %}\r\n  {% endif %}\r\n  \r\n  {% set server_vol = 1 %}\r\n  {% set server_cost = (server_price * server_vol) %}\r\n{% endif %}\r\n\r\n{# URM calculation #}\r\n{% if data.urm_skud_check %}\r\n  {% if data.urm_skud_type == 'mt_win' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.MT\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД в корпусе MiniTower (компактное отдельностоящее исполнение):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>Тип монтажа: настольный</li>\r\n      <li>Размеры (ШхГхВ): 230x264x112 мм</li>\r\n      <li>Питание: 220V, &gt;160W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set urm_price = data.cena_urm_skud %}\r\n  {% elseif data.urm_skud_type == 'vesa_win' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.NUC\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД в компактном корпусе с креплением VESA (для установки на монитор с аналогичным типом крепления). Компактная и эстетичная модель:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>Тип монтажа: VESA 100</li>\r\n      <li>Размеры (ШхГхВ): 115х111х48 мм</li>\r\n      <li>Питание: 220V, &gt;65W</li>\r\n    </ul>\r\n    {% endset %}    \r\n    {% set urm_price = data.cena_urm_skud_vesa %}\r\n  {% elseif data.urm_skud_type == 'mt_linux' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.RSPB\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД на базе ОС Линукс (ультракомпактное отдельностоящее исполнение). Минимальное энергопотребление, отказоустойчивость ОС Линукс, высокая скорость загрузки и выгодная цена для заказчика:</p>\r\n    <ul>\r\n      <li>Процессор: ARM</li>\r\n      <li>Оперативная память: 1 Гб</li>\r\n      <li>ОС: Ubuntu</li>\r\n      <li>Тип монтажа: настольный</li>\r\n      <li>Размеры (ШхГхВ): 100х70х40 мм</li>\r\n      <li>Питание: 220V</li>\r\n    </ul>\r\n    {% endset %}    \r\n    {% set urm_price = data.cena_urm_skud_rspb %}\r\n  {% endif %}\r\n\r\n{% set urm_vol = data.urm_skud %}\r\n{% set urm_cost = (urm_price * urm_vol) %}\r\n{% endif %}\r\n\r\n{# Hardware subtotal #}\r\n\r\n{% set total_hard_cost = (card_cost + reader_cost + bbp_mech_cost + bbp_mag_cost + lock_mech_cost + lock_mag_cost + corner_cost + turnstile_cost + cardcapture_cost + camera_cost + ep_cost + ep_two_cost + ep_four_cost + button_cost + closer_cost + battery_cost + detector_door_cost + detector_controller_cost + master_controller_cost + server_cost + urm_cost) %}\r\n{% set hard_nds = (total_hard_cost * 20 / 120) %}\r\n{% set total_hard_no_nds = (total_hard_cost - hard_nds) %}\r\n\r\n{# Users cost calculation #}\r\n{% if users_total <= '50' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 50 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_50 %}\r\n  {% set user_cost = (user_price * user_vol) %}\r\n  \r\n  {% elseif users_total > '50' and users_total <= '1000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 1000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_1000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n\r\n  {% elseif users_total > '1000' and users_total <= '10000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 10 000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_10000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n\r\n  {% elseif users_total > '10000' and users_total <= '25000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 25 000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_25000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n{% endif %}\r\n\r\n{# Extra Modules calculation #}\r\n{% if data.module_po_castle_time_track %}\r\n{% set time_track_name = 'Дополнительный модуль ПО Castle «Учет рабочего времени»' %}\r\n{% set time_track_desc %} \r\n<ul>\r\n  <li>Создание рабочих графиков для сотрудников</li>\r\n  <li>Получение отчетов за любой исторический период</li>\r\n  <li>Полный журнал отклонений от рабочего графика</li>\r\n  <li>Журнал неявок, опозданий и других временных нарушений рабочей дисциплины</li>\r\n</ul>\r\n{% endset %}\r\n{% set time_track_vol = 1 %}\r\n{% set time_track_price = data.cena_module_time_track %}\r\n{% set time_track_cost = (time_track_price * time_track_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_pass_print %}\r\n{% set pass_print_name = 'Дополнительный модуль ПО Castle «Создание и печать пропусков»' %}\r\n{% set pass_print_desc %} \r\n<ul>\r\n  <li>Создание и редактирование шаблонов графического оформления пропусков</li>\r\n  <li>Назначение шаблонов пропусков для сотрудников</li>\r\n  <li>Печать пропусков на основании шаблонов и персональных данных сотрудников</li>\r\n</ul>\r\n{% endset %}\r\n{% set pass_print_vol = 1 %}\r\n{% set pass_print_price = data.cena_module_pass_print %}\r\n{% set pass_print_cost = (pass_print_price * pass_print_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_event_monitor %}\r\n{% set event_monitor_name = 'Дополнительный модуль «Мониторинг событий (фотоидентификация)»' %}\r\n{% set event_monitor_desc %} \r\n<ul>\r\n  <li>Наблюдение в режиме реального времени за событиями, происходящими в системе. При запросе прохода сотрудником отображается его учетная карточка из базы, включающая фотографию.</li>\r\n</ul>\r\n{% endset %}\r\n{% set event_monitor_vol = 1 %}\r\n{% set event_monitor_price = data.cena_module_event_monitor %}\r\n{% set event_monitor_cost = (event_monitor_price * event_monitor_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_1c_integration %}\r\n{% set onec_integration_name = 'Дополнительный модуль «Интеграция с 1С»' %}\r\n{% set onec_integration_desc %} \r\n<ul>\r\n  <li>Дополняет функции модуля &laquo;Учет рабочего времени&raquo;</li>\r\n  <li>Автоматическая передача табеля (форма Т-13) в &laquo;1C: Предприятие&raquo;</li>\r\n</ul>\r\n{% endset %}\r\n{% set onec_integration_vol = 1 %}\r\n{% set onec_integration_price = data.cena_module_1c_integration %}\r\n{% set onec_integration_cost = (onec_integration_price * onec_integration_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_pass_ext or data.cardcapture_check %}\r\n{% set pass_ext_name = 'Дополнительный модуль «Расширенная поддержка пропусков посетителей»' %}\r\n{% set pass_ext_desc %} \r\n<ul>\r\n  <li>Интерфейс для выдачи/сбора карт (АРМ &laquo;Бюро пропусков&raquo;), при выдаче происходит привязка карты к паспорту или другому документу посетителя</li>\r\n  <li>Хранение истории выдачи карт</li>\r\n  <li>Задание списка карт посетителей</li>\r\n</ul>\r\n{% endset %}\r\n{% set pass_ext_vol = 1 %}\r\n{% set pass_ext_price = data.cena_module_pass_ext %}\r\n{% set pass_ext_cost = (pass_ext_price * pass_ext_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_event_response %}\r\n{% set event_response_name = 'Дополнительный модуль «Реакция на события»' %}\r\n{% set event_response_desc %} \r\n<ul>\r\n  <li>Задание списка действий, которые будут выполняться системой автоматически при наступлении каких-либо событий. Например, возможна отправка SMS-сообщения на указанный телефонный номер.</li>\r\n</ul>\r\n{% endset %}\r\n{% set event_response_vol = 1 %}\r\n{% set event_response_price = data.cena_module_event_response %}\r\n{% set event_response_cost = (event_response_price * event_response_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_data_sync %}\r\n{% set data_sync_name = 'Дополнительный модуль «Синхронизация данных»' %}\r\n{% set data_sync_desc %} \r\n<ul>\r\n  <li>Автоматическая синхронизация списка сотрудников в СКУД по внешней базе данных существующей корпоративной системы.</li>\r\n</ul>\r\n{% endset %}\r\n{% set data_sync_vol = 1 %}\r\n{% set data_sync_price = data.cena_module_data_sync %}\r\n{% set data_sync_cost = (data_sync_price * data_sync_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_doc_ocr %}\r\n{% set doc_ocr_name = 'Дополнительный модуль «Распознавание документов»' %}\r\n{% set doc_ocr_desc %} \r\n<ul>\r\n  <li>Автоматическое сканирование и распознавание документов при выдаче временного пропуска посетителю.</li>\r\n</ul>\r\n{% endset %}\r\n{% set doc_ocr_vol = 1 %}\r\n{% set doc_ocr_price = data.cena_module_doc_ocr %}\r\n{% set doc_ocr_cost = (doc_ocr_price * doc_ocr_vol) %}\r\n{% endif %}\r\n\r\n{# Face Ident per camera calculation #}\r\n{% if camera_vol > 0 %}\r\n{% set face_ident_camera_name = 'Модуль «Идентификация лица» (лицензия на одну камеру)' %}\r\n{% set face_ident_camera_price = data.cena_module_face_ident_camera %}\r\n{% set face_ident_camera_vol = camera_vol %}\r\n{% set face_ident_camera_cost = (face_ident_camera_price * face_ident_camera_vol) %}\r\n{% endif %}\r\n\r\n{# Face ident calculation #}\r\n{% if data.face_vol > 0 and data.face_vol <= 10 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 10 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_10 %}\r\n\r\n{% elseif data.face_vol > 10 and data.face_vol <= 50 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 50 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_50 %}\r\n\r\n{% elseif data.face_vol > 50 and data.face_vol <= 100 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 100 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_100 %}\r\n\r\n{% elseif data.face_vol > 100 and data.face_vol <= 1000 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 1000 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_1000 %}\r\n{% endif %}\r\n\r\n{% set face_ident_desc %}\r\n<ul>\r\n  <li>Обязательный модуль, если выбрана опция идентификации лиц.</li>\r\n</ul>\r\n{% endset %}\r\n{% set face_ident_vol = 1 %}\r\n{% set face_ident_cost = (face_ident_price * face_ident_vol) %}\r\n\r\n{# Soft Subtotal #}\r\n{% set total_soft_cost = (user_cost + time_track_cost + pass_print_cost + event_monitor_cost + onec_integration_cost + pass_ext_cost + event_response_cost + data_sync_cost + doc_ocr_cost + face_ident_camera_cost + face_ident_cost) %}\r\n\r\n{# Grand Total #}\r\n{% set total = (total_hard_cost + total_soft_cost) %}\r\n\r\n{# Message Body #}\r\n\r\n<table width=\"100%\" style=\"font-size:14px;line-height:18px\" cellpadding=\"10\">\r\n  <colgroup width=\"50%\"></colgroup>\r\n  <colgroup width=\"10%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <thead>\r\n    <tr style=\"background: #505050; color:#fff\">\r\n      <td>Товары (работы, услуги)</td>\r\n      <td>Кол-во</td>\r\n      <td>Цена (с НДС)</td>\r\n      <td>Сумма (с НДС)</td>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {# Card #}\r\n    {% if card_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ card_name }}</td>  \r\n      <td>{{ card_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ card_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ card_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# Reader #}\r\n    {% if reader_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ reader_name }}</td>\r\n      <td>{{ reader_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ reader_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ reader_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# BBP #}\r\n    {% if bbp_mech_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_mech_name }}</td>\r\n      <td>{{ bbp_mech_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_mech_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_mech_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if bbp_mag_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_mag_name }}</td>\r\n      <td>{{ bbp_mag_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_mag_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_mag_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# BBP Gate #}\r\n    {% if bbp_gate_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_gate_name }}</td>\r\n      <td>{{ bbp_gate_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_gate_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_gate_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# Lock #}\r\n    {% if lock_mech_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ lock_mech_name }}</td>\r\n      <td>{{ lock_mech_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ lock_mech_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ lock_mech_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if lock_mag_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ lock_mag_name }}</td>\r\n      <td>{{ lock_mag_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ lock_mag_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ lock_mag_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Corner #}\r\n    {% if corner_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ corner_name }}</td>\r\n      <td>{{ corner_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ corner_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ corner_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Turnstile #}\r\n    {% if turnstile_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ turnstile_name }}</td>\r\n      <td>{{ turnstile_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ turnstile_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ turnstile_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {% if cardcapture_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ cardcapture_name }}</td>\r\n      <td>{{ cardcapture_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ cardcapture_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ cardcapture_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Controller #}\r\n    {% if ep_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_name }}</td>\r\n      <td>{{ ep_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if ep_two_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_two_name }}</td>\r\n      <td>{{ ep_two_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_two_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_two_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if ep_four_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_four_name }}</td>\r\n      <td>{{ ep_four_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_four_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_four_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Button #}\r\n    {% if button_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ button_name }}</td>\r\n      <td>{{ button_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ button_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ button_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Closer #}\r\n    {% if closer_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ closer_name }}</td>\r\n      <td>{{ closer_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ closer_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ closer_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Battery #}\r\n    {% if battery_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ battery_name }}</td>\r\n      <td>{{ battery_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ battery_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ battery_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Battery Gate #}\r\n    {% if battery_gate_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ battery_gate_name }}</td>\r\n      <td>{{ battery_gate_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ battery_gate_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ battery_gate_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Door Detector #}\r\n    {% if detector_door_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ detector_door_name }}</td>\r\n      <td>{{ detector_door_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ detector_door_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ detector_door_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Controller Detector #}\r\n    {% if detector_controller_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ detector_controller_name }}</td>\r\n      <td>{{ detector_controller_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ detector_controller_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ detector_controller_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Master Controller #}\r\n    {% if master_controller_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ master_controller_name }}</td>\r\n      <td>{{ master_controller_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ master_controller_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ master_controller_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Camera #}\r\n    {% if camera_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ camera_name }}</td>\r\n      <td>{{ camera_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ camera_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ camera_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Server #}\r\n    {% if data.server_skud or camera_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ server_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ server_desc}}</p></td>\r\n      <td>{{ server_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ server_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ server_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# URM #}\r\n    {% if data.urm_skud_check %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ urm_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ urm_desc}}</p></td>\r\n      <td>{{ urm_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ urm_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ urm_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n  </tbody>\r\n</table>\r\n\r\n{# hardware subtotal #}\r\n<table width=\"100%\" style=\"font-size: 14px;line-height: 18px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>  \r\n  <tr>\r\n    <td style=\"text-align:right\">Итого (товары, услуги) без НДС: </td>\r\n    <td style=\"text-align:left\">{{ total_hard_no_nds|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n  <tr>\r\n    <td style=\"text-align:right\">Сумма НДС (20%): </td>\r\n    <td style=\"text-align:left\">{{ hard_nds|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n  <tr>\r\n    <td style=\"text-align:right\">Всего оборудование: </td>\r\n    <td style=\"text-align:left\">{{ total_hard_cost|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n</table>\r\n\r\n<table width=\"100%\" style=\"font-size:14px;line-height:18px\" cellpadding=\"10\">\r\n  <colgroup width=\"50%\"></colgroup>\r\n  <colgroup width=\"10%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <thead>\r\n    <tr style=\"background: #505050; color:#fff\">\r\n      <td>Товары (программное обеспечение)</td>\r\n      <td>Кол-во</td>\r\n      <td>Цена (с НДС)</td>\r\n      <td>Сумма (с НДС)</td>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {# User #}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ user_name }}</td>\r\n      <td>{{ user_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ user_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ user_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    \r\n    {# Time Track #}\r\n    {% if data.module_po_castle_time_track %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ time_track_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ time_track_desc}}</p></td>\r\n      <td>{{ time_track_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ time_track_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ time_track_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# pass_print #}\r\n    {% if data.module_po_castle_pass_print %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ pass_print_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ pass_print_desc}}</p></td>\r\n      <td>{{ pass_print_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ pass_print_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ pass_print_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# event_monitor #}\r\n    {% if data.module_po_castle_event_monitor %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ event_monitor_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ event_monitor_desc}}</p></td>\r\n      <td>{{ event_monitor_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ event_monitor_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ event_monitor_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# 1c_integration #}\r\n    {% if data.module_po_castle_1c_integration %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ onec_integration_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ onec_integration_desc}}</p></td>\r\n      <td>{{ onec_integration_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ onec_integration_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ onec_integration_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# pass_ext #}\r\n    {% if data.module_po_castle_pass_ext %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ pass_ext_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ pass_ext_desc}}</p></td>\r\n      <td>{{ pass_ext_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ pass_ext_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ pass_ext_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# event_response #}\r\n    {% if data.module_po_castle_event_response %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ event_response_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ event_response_desc}}</p></td>\r\n      <td>{{ event_response_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ event_response_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ event_response_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# data_sync #}\r\n    {% if data.module_po_castle_data_sync %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ data_sync_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ data_sync_desc}}</p></td>\r\n      <td>{{ data_sync_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ data_sync_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ data_sync_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# doc_ocr #}\r\n    {% if data.module_po_castle_doc_ocr %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ doc_ocr_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ doc_ocr_desc}}</p></td>\r\n      <td>{{ doc_ocr_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ doc_ocr_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ doc_ocr_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# face_ident_camera #}\r\n    {% if camera_vol > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ face_ident_camera_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ face_ident_camera_desc}}</p></td>\r\n      <td>{{ face_ident_camera_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ face_ident_camera_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ face_ident_camera_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# face_ident #}\r\n    {% if data.face_vol > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ face_ident_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ face_ident_desc}}</p></td>\r\n      <td>{{ face_ident_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ face_ident_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ face_ident_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n  </tbody>\r\n</table>\r\n\r\n{# software subtotal #}\r\n<table width=\"100%\" style=\"font-size: 14px;line-height: 18px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n    <tr>\r\n      <td style=\"text-align:right\">Итого (программное обеспечение): </td>\r\n      <td style=\"text-align:left\">{{ total_soft_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:right\">Сумма НДС (20%): </td>\r\n      <td style=\"text-align:left\">—</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:right\">Всего ПО: </td>\r\n      <td style=\"text-align:left\">{{ total_soft_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n</table>\r\n\r\n<p>НДС не облагается согласно подпункту 26 пункта 2 статьи 149 НК РФ.</p>\r\n<table width=\"100%\" style=\"font-size: 18px;line-height: 24px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <tr>\r\n    <td style=\"text-align:left\">Общая сумма КП (оборудование + программное обеспечение):</td>\r\n    <td style=\"text-align:left\">{{ total|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n</table>"
      excluded_elements:
        reader_ordinary: reader_ordinary
        reader_eywa_classics: reader_eywa_classics
        reader_eywa_art: reader_eywa_art
        processed_text: processed_text
        processed_text_01: processed_text_01
        distance_30_less: distance_30_less
        distance_30_more: distance_30_more
        mechanical_lock_img_01: mechanical_lock_img_01
        magnet_lock_img_01: magnet_lock_img_01
        mechanical_lock_img: mechanical_lock_img
        magnet_lock_img: magnet_lock_img
        turnstile_check: turnstile_check
        turnstile_tripod_img: turnstile_tripod_img
        turnstile_gate_img: turnstile_gate_img
        cena_karty_em_marine: cena_karty_em_marine
        cena_karty_hid: cena_karty_hid
        cena_karty_mifare: cena_karty_mifare
        cena_po_castle_50: cena_po_castle_50
        cena_po_castle_1000: cena_po_castle_1000
        cena_po_castle_10000: cena_po_castle_10000
        cena_po_castle_25000: cena_po_castle_25000
        cena_reader_em_marine_ordinary: cena_reader_em_marine_ordinary
        cena_reader_hid_ordinary: cena_reader_hid_ordinary
        cena_reader_mifare_ordinary: cena_reader_mifare_ordinary
        cena_bio_reader_em_marine: cena_bio_reader_em_marine
        cena_bio_reader_hid: cena_bio_reader_hid
        cena_bio_reader_mifare: cena_bio_reader_mifare
        cena_reader_em_marine_premium: cena_reader_em_marine_premium
        cena_reader_hid_premium: cena_reader_hid_premium
        cena_reader_mifare_premium: cena_reader_mifare_premium
        cena_reader_eywa_classics: cena_reader_eywa_classics
        cena_reader_eywa_art: cena_reader_eywa_art
        cena_ep: cena_ep
        cena_ep2: cena_ep2
        cena_ep4: cena_ep4
        cena_mechanical_lock: cena_mechanical_lock
        cena_magnetlock: cena_magnetlock
        cena_bbp_20: cena_bbp_20
        cena_bbp_50: cena_bbp_50
        cena_ivepr: cena_ivepr
        cena_battery_dt1207: cena_battery_dt1207
        cena_battery_dt1212: cena_battery_dt1212
        cena_button_ordinary: cena_button_ordinary
        cena_montage_corner: cena_montage_corner
        cena_closer_tantos_ts_dc085: cena_closer_tantos_ts_dc085
        cena_detector_door: cena_detector_door
        cena_detector_controller: cena_detector_controller
        cena_reader_master_em_marine: cena_reader_master_em_marine
        cena_reader_master_mifare: cena_reader_master_mifare
        cena_bio_reader_master: cena_bio_reader_master
        cena_camera: cena_camera
        cena_server_skud: cena_server_skud
        cena_server_face_10: cena_server_face_10
        cena_server_skud_50_rack: cena_server_skud_50_rack
        cena_server_skud_100_rack: cena_server_skud_100_rack
        cena_server_skud_50_mt: cena_server_skud_50_mt
        cena_urm_skud: cena_urm_skud
        cena_urm_skud_vesa: cena_urm_skud_vesa
        cena_urm_skud_rspb: cena_urm_skud_rspb
        cena_turnstile_tripod: cena_turnstile_tripod
        cena_turnstile_gate: cena_turnstile_gate
        cena_cardcapture: cena_cardcapture
        cena_module_time_track: cena_module_time_track
        cena_module_pass_print: cena_module_pass_print
        cena_module_event_monitor: cena_module_event_monitor
        cena_module_1c_integration: cena_module_1c_integration
        cena_module_pass_ext: cena_module_pass_ext
        cena_module_event_response: cena_module_event_response
        cena_module_data_sync: cena_module_data_sync
        cena_module_doc_ocr: cena_module_doc_ocr
        cena_module_face_recog: cena_module_face_recog
        cena_module_face_ident_10: cena_module_face_ident_10
        cena_module_face_ident_50: cena_module_face_ident_50
        cena_module_face_ident_100: cena_module_face_ident_100
        cena_module_face_ident_1000: cena_module_face_ident_1000
        cena_module_face_ident_camera: cena_module_face_ident_camera
        horizontal_rule: horizontal_rule
        random: random
        fake: fake
      ignore_access: false
      exclude_empty: true
      exclude_empty_checkbox: true
      exclude_attachments: true
      html: true
      attachments: true
      twig: true
      debug: false
      reply_to: ''
      return_path: ''
      sender_mail: ''
      sender_name: ''
      theme_name: ''
      parameters: {  }
  pf_test:
    id: email
    label: Тест
    notes: ''
    handler_id: pf_test
    status: false
    conditions: {  }
    weight: 2
    settings:
      states:
        - completed
      to_mail: ep@agrg.ru
      to_options: {  }
      cc_mail: ''
      cc_options: {  }
      bcc_mail: ''
      bcc_options: {  }
      from_mail: '[webform_submission:values:email:raw]'
      from_options: {  }
      from_name: '[webform_submission:values:email:raw]'
      subject: 'Расчет на калькуляторе СКУД'
      body: "{% set doors_total = (data.oneside_door_volume + data.twoside_door_volume) %}\r\n{% set r_oneside = data.oneside_door_volume %}\r\n{% set r_twoside = (data.twoside_door_volume * 2) %}\r\n{% set users_total = (data.kolichestvo_kart + data.finger_vol + data.face_vol) %}\r\n\r\n{# Card / Reader calculation #}\r\n{% if data.tip_kart == 'Em-Marine' -%}\r\n  {% set card_name = 'Карта EM-Marine, бесконтактный идентификатор (толстая), TS' %}\r\n  {% set card_price = data.cena_karty_em_marine %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-EM' %}\r\n    {% set reader_price = data.cena_bio_reader_em_marine %}\r\n  {% else %}\r\n    {% set reader_name = 'Считыватель TS-RDR-E White EM-Marine' %}\r\n    {% set reader_price = data.cena_reader_em_marine_ordinary %}\r\n  {% endif %}\r\n\r\n{% elseif data.tip_kart == 'HID' %}\r\n  {% set card_name = 'Карта HID, бесконтактный идентификатор iC2002' %}\r\n  {% set card_price = data.cena_karty_hid %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель BioSmart 4-O-HD-N-L' %}\r\n    {% set reader_price = data.cena_bio_reader_hid %}\r\n  {% else %}\r\n    {% set reader_name = 'Считыватель TS-RDR-EHV-2 Metal HID' %}\r\n    {% set reader_price = data.cena_reader_hid_ordinary %}\r\n  {% endif %}\r\n\r\n{% elseif data.tip_kart == 'Mifare' %}\r\n  {% set card_name = 'Карта Mifare, бесконтактный идентификатор Smart-карта TS толстая (13,56МГц 1K)' %}\r\n  {% set card_price = data.cena_karty_mifare %}\r\n\r\n  {% if data.finger_vol > 0 %}\r\n    {% set reader_name = 'Биометрический контроллер-считыватель Biosmart 5M-O-MF' %}\r\n    {% set reader_price = data.cena_bio_reader_mifare %}\r\n  {% else %} \r\n    {% set reader_name = 'Считыватель TS-RDR-MF Metal Mifare' %}\r\n    {% set reader_price = data.cena_reader_mifare_ordinary %}\r\n  {% endif %}\r\n{%- endif %}\r\n\r\n  {# Reader style calculation #}\r\n  {% if data.readers_style == 'ordinary' or data.readers_style is empty -%}\r\n  {% elseif data.readers_style == 'eywa_classics' %}\r\n    {% set reader_name = 'Считыватель AGRG-CLS-B-N-ALDER-B' %}\r\n    {% set reader_price = data.cena_reader_eywa_classics %}\r\n  {% elseif data.readers_style == 'eywa_art' %}\r\n    {% set reader_name = 'Считыватель AGRG-ART-C(CH)-N-MAPLE-G' %}\r\n    {% set reader_price = data.cena_reader_eywa_art %}\r\n  {%- endif %}  \r\n\r\n{% set card_vol = data.kolichestvo_kart %}\r\n{% set card_cost = (card_price * card_vol) %}\r\n\r\n{% set reader_vol = (r_oneside + r_twoside) %}\r\n{% set reader_cost = (reader_price * reader_vol) %}\r\n\r\n{# BBP / Lock calculation #}\r\n{% if data.lock_type == 'mechanical' -%}\r\n  {% set bbp_mech_vol = (doors_total / 3)|round(0, 'ceil') %}\r\n  {% set lock_mech_vol = doors_total %}\r\n\r\n{% elseif data.lock_type == 'magnet' %}\r\n  {% set bbp_mag_vol = (doors_total / 2)|round(0, 'ceil') %}\r\n  {% set lock_mag_vol = doors_total %}\r\n  {% set corner_vol = doors_total %}\r\n  \r\n{% elseif data.lock_type == 'mixed' %}\r\n  {% set bbp_mech_vol = (data.mechanical_lock_volume / 3)|round(0, 'ceil') %}\r\n  {% set bbp_mag_vol = (data.magnet_lock_volume / 2)|round(0, 'ceil') %}\r\n  {% set lock_mech_vol = data.mechanical_lock_volume %}\r\n  {% set lock_mag_vol = data.magnet_lock_volume %}\r\n  {% set corner_vol = data.magnet_lock_volume %}\r\n{%- endif %}\r\n\r\n{% set bbp_mech_name = 'Источник вторичного электропитания ББП-50 TS' %}\r\n{% set bbp_mech_price = data.cena_bbp_50 %}\r\n{% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\r\n\r\n{% set bbp_mag_name = 'Источник вторичного электропитания ББП-20 TS' %}\r\n{% set bbp_mag_price = data.cena_bbp_20 %}\r\n{% set bbp_mag_cost = (bbp_mag_price * bbp_mag_vol) %}\r\n\r\n{% set lock_mech_name = 'Защелка электромеханическая Viro 7755.70' %}\r\n{% set lock_mech_price = data.cena_mechanical_lock %}\r\n{% set lock_mech_cost = (lock_mech_price * lock_mech_vol) %}\r\n\r\n{% set lock_mag_name = 'Электромагнитный замок TS-ML300' %}\r\n{% set lock_mag_price = data.cena_magnetlock %}\r\n{% set lock_mag_cost = (lock_mag_price * lock_mag_vol) %}\r\n\r\n{% set corner_name = 'Монтажный L-образный уголок для крепления электромагнитного замка, TS-LM300' %}\r\n{% set corner_price = data.cena_montage_corner %}\r\n{% set corner_cost = (corner_price * corner_vol) %}\r\n\r\n{# Button calculation #}\r\n{% set button_name = 'Сенсорная кнопка выхода TS-MAGIC чёрный' %}\r\n{% set button_vol = data.oneside_door_volume %}\r\n{% set button_price = data.cena_button_ordinary %}\r\n{% set button_cost = (button_price * button_vol) %}\r\n\r\n{# Closer calculation #}\r\n{% set closer_name = 'TANTOS TS-DC085 Freeze серебро - доводчик дверной с усилием EN4 для дверей весом до 100 кг' %}\r\n{% set closer_vol = doors_total %}\r\n{% set closer_price = data.cena_closer_tantos_ts_dc085 %}\r\n{% set closer_cost = (closer_price * closer_vol) %}\r\n\r\n{# Battery calculation #}\r\n{% set battery_name = 'Аккумулятор 12В 7 А•ч (DT 1207)' %}\r\n{% set battery_vol = (bbp_mech_vol + bbp_mag_vol) %}\r\n{% set battery_price = data.cena_battery_dt1207 %}\r\n{% set battery_cost = (battery_price * battery_vol) %}\r\n\r\n{# Door Detector calculation #}\r\n{% set detector_door_name = 'Извещатель охранный магнитоконтактный ИО 102-26 исп.00 «Аякс»' %}\r\n{% set detector_door_vol = doors_total %}\r\n{% set detector_door_price = data.cena_detector_door %}\r\n{% set detector_door_cost = (detector_door_price * detector_door_vol) %}\r\n\r\n{# Controller Detector calculation #}\r\n{% set detector_controller_name = 'Извещатель ИОПР 513/101-3 «Аварийный выход» с крышкой' %}\r\n{% set detector_controller_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\r\n{% set detector_controller_price = data.cena_detector_controller %}\r\n{% set detector_controller_cost = (detector_controller_price * detector_controller_vol) %}\r\n\r\n{# Turnstile calculation #}\r\n{% if data.turnstile_check %}\r\n  {% set turnstile_vol = data.turnstile_volume %}\r\n  {% if data.turnstile_type == 'tripod' %}\r\n    {% set turnstile_name = 'Турникет-трипод PERCo-TTR-07.1G' %}\r\n    {% set turnstile_price = data.cena_turnstile_tripod %}\r\n    \r\n    {% set bbp_mech_vol = (bbp_mech_vol + turnstile_vol) %}\r\n    {% set bbp_mech_cost = (bbp_mech_price * bbp_mech_vol) %}\r\n    \r\n    {% set battery_vol = (battery_vol + turnstile_vol) %}\r\n    {% set battery_cost = (battery_price * battery_vol) %}\r\n    \r\n    {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\r\n    {% set reader_cost = (reader_price * reader_vol) %}\r\n  {% elseif data.turnstile_type == 'gate' %}\r\n    {% set turnstile_name = 'Турникет с раздвижными створками PERCo-ST-02.900' %}\r\n    {% set turnstile_price = data.cena_turnstile_gate %}\r\n    \r\n    {% set bbp_gate_name = 'Аккумулятор 12В 12 А∙ч (DT 1212)' %}\r\n    {% set bbp_gate_price = data.cena_battery_dt1212 %}\r\n    {% set bbp_gate_vol = (turnstile_vol * 2) %}\r\n    {% set bbp_gate_cost = (bbp_gate_price * bbp_gate_vol) %}\r\n\r\n    {% set battery_gate_name = 'Блок питания ИВЭПР 24/5 2x12-Р БР' %}\r\n    {% set battery_gate_price = data.cena_ivepr %}\r\n    {% set battery_gate_vol = turnstile_vol %}\r\n    {% set battery_gate_cost = (battery_gate_price * battery_gate_vol) %}\r\n    \r\n    {% set reader_vol = (reader_vol + turnstile_vol * 2) %}\r\n    {% set reader_cost = (reader_price * reader_vol) %}\r\n  {% endif %}\r\n  {% set turnstile_cost = (turnstile_price * turnstile_vol) %}\r\n{% endif %}\r\n\r\n{% if data.cardcapture_check %}\r\n  {% set cardcapture_name = 'Картоприемник PERCo-IC05' %}\r\n  {% set cardcapture_price = data.cena_cardcapture %}\r\n  {% set cardcapture_vol = turnstile_vol %}\r\n  {% set cardcapture_cost = (cardcapture_price * cardcapture_vol) %}\r\n{% endif %}\r\n\r\n{# Controller calculation #}\r\n{% if data.door_distance == '30less' -%}\r\n  {% if data.oneside_door_volume > 1 and data.oneside_door_volume <= 4 -%}\r\n    {% set ep_four_vol = 1 %}\r\n  {% elseif data.oneside_door_volume == 1 %}\r\n    {% set ep_two_vol = 1 %}\r\n  {% else %}\r\n    {% set ep_four_vol = (data.oneside_door_volume / 4)|round(0, 'ceil') %}\r\n  {%- endif %}\r\n\r\n  {% if data.twoside_door_volume == 1 %}\r\n    {% set ep_two_vol = 1 %}\r\n  {% else %}\r\n    {% set ep_vol = (data.twoside_door_volume / 2)|round(0, 'ceil') %}  \r\n  {% endif %}\r\n\r\n{% elseif data.door_distance == '30more' %}\r\n  {% set ep_two_vol = doors_total %}\r\n{%- endif %}\r\n\r\n{% set ep_vol = (ep_vol + turnstile_vol) %}\r\n\r\n{% set ep_name = 'Сетевой контроллер Castle EP' %}\r\n{% set ep_price = data.cena_ep %}\r\n{% set ep_cost = (ep_price * ep_vol) %}\r\n\r\n{% set ep_two_name = 'Сетевой контроллер Castle EP2' %}\r\n{% set ep_two_price = data.cena_ep2 %}\r\n{% set ep_two_cost = (ep_two_price * ep_two_vol) %}\r\n\r\n{% set ep_four_name = 'Сетевой контроллер Castle EP4' %}\r\n{% set ep_four_price = data.cena_ep4 %}\r\n{% set ep_four_cost = (ep_four_price * ep_four_vol) %}\r\n\r\n{% set controllers_vol = (ep_vol + ep_two_vol + ep_four_vol) %}\r\n\r\n{# Master Controller calculation #}\r\n{% if data.finger_vol > 0 %}\r\n  {% set master_controller_name = 'USB-считыватель настольный BioSmart FS-80' %}\r\n  {% set master_controller_price = data.cena_bio_reader_master %}\r\n{% else %}\r\n  {% if data.tip_kart == 'Em-Marine' or data.tip_kart == 'HID'%}\r\n    {% set master_controller_name = 'Контрольный считыватель карт форматов EM-Marine и HID настольный «Castle-Reader» с интерфейсом USB' %}\r\n    {% set master_controller_price = data.cena_reader_master_em_marine %}\r\n  {% elseif data.tip_kart == 'Mifare' %}\r\n    {% set master_controller_name = 'Контрольный считыватель «ACR1252U USB NFC Reader III» Mifare' %}\r\n    {% set master_controller_price = data.cena_reader_master_mifare %}\r\n  {% endif %}\r\n{% endif %}\r\n\r\n{% set master_controller_vol = 1 %}\r\n{% set master_controller_cost = (master_controller_price * master_controller_vol) %}\r\n\r\n{# Camera calculation #}\r\n{% if data.face_vol > 0 %}\r\n  {% set camera_name = 'Видеокамера сетевая (IP) TSi-Pe25VP' %}\r\n  {% set camera_price = data.cena_camera %}\r\n  {% set camera_vol = (r_oneside + r_twoside + turnstile_vol * 2) %}\r\n  {% set camera_cost = (camera_price * camera_vol) %}\r\n{% endif %}\r\n\r\n{# Server Face Ident calculation #}\r\n{% if camera_vol > 0 %}\r\n  {% if camera_vol <= 4 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\r\n    {% set server_desc %} \r\n    <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i7</li>\r\n      <li>Оперативная память: 8 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_100_rack %}\r\n    {% else %}\r\n    {% set server_name = 'Сервер \"AGRG VideoСервер vS 10 2988-134 2MPx.25fps.16TbR5\"' %}\r\n    {% set server_desc %} \r\n      <p>Сервер СКУД для организации доступа при помощи идентификации лиц, включая ПО:</p>\r\n      <ul>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Подключение видеоканала (лицензия на 10 каналов)</li>\r\n        <li>Программное обеспечение - Система защиты Guardant</li>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Ядро системы</li>\r\n        <li>Программное обеспечение &quot;Интеллект&quot; - Интеграция СКУД Castle</li>\r\n      </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_face_10 %}\r\n  {% endif %}\r\n  {% set server_vol = (camera_vol / 10)|round(0, 'ceil') %}\r\n  {% set server_cost = (server_price * server_vol) %}\r\n{% endif %}\r\n\r\n{# Server calculation #}\r\n{% if data.server_skud %}\r\n  {% if controllers_vol > 0 and controllers_vol <= 20 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер vS SKUD.Castle.1Tb.m0.R1\":' %}\r\n    {% set server_desc %} \r\n    <p>Базовая платформа сервера СКУД для установки в стойку. Устанавливается в стойку (Rackmount 19&quot;, 1U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция). Максимально доступное решение:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: HDD 1Tb NAS</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 1U</li>\r\n      <li>Размеры (ШхГхВ): 430x250x44 мм</li>\r\n      <li>Питание: 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud %}\r\n  {% elseif controllers_vol > 20 and controllers_vol <= 50 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1T2.m1.MT\"' %}\r\n    {% set server_desc %} \r\n    <p>Базовая платформа сервера СКУД в корпусе MiniTower (компактное отдельностоящее исполнение). Поставляется с расширенной системой хранения архива событий базы данных. Оптимальное решение для объектов, на которых не используются серверные стойки для сетевого и серверного оборудования:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: HDD 2Tb Enterprise</li>\r\n      <li>Тип монтажа: отдельностоящий настольный</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_50_mt %}\r\n  {% elseif controllers_vol > 50 %}\r\n    {% set server_name = 'Сервер СКУД \"AGRG VideoСервер iS SKUD.Castle.1TbR1.m0.R4\"' %}\r\n    {% set server_desc %} \r\n    <p>Отказоустойчивая платформа с резервированием системы хранения архива событий (RAID1) и системы электропитания (двоированные блоки питания). Устанавливается в стойку (Rackmount 19&quot;, 4U) с применением комплектного крепления либо на стол/полку в случае заказа дополнительного комплекта ножек (опция):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i7</li>\r\n      <li>Оперативная память: 8 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>СХД базы данных: &nbsp;2x HDD 1Tb Enterprise RAID1 HotSwap</li>\r\n      <li>Тип монтажа: Rackmount 19&quot;, 4U</li>\r\n      <li>Размеры (ШхГхВ): 430x280x67 мм</li>\r\n      <li>Питание: Redundant 1+1, 220V, &gt;300W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set server_price = data.cena_server_skud_100_rack %}\r\n  {% endif %}\r\n  \r\n  {% set server_vol = 1 %}\r\n  {% set server_cost = (server_price * server_vol) %}\r\n{% endif %}\r\n\r\n{# URM calculation #}\r\n{% if data.urm_skud_check %}\r\n  {% if data.urm_skud_type == 'mt_win' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.MT\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД в корпусе MiniTower (компактное отдельностоящее исполнение):</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>Тип монтажа: настольный</li>\r\n      <li>Размеры (ШхГхВ): 230x264x112 мм</li>\r\n      <li>Питание: 220V, &gt;160W</li>\r\n    </ul>\r\n    {% endset %}\r\n    {% set urm_price = data.cena_urm_skud %}\r\n  {% elseif data.urm_skud_type == 'vesa_win' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.NUC\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД в компактном корпусе с креплением VESA (для установки на монитор с аналогичным типом крепления). Компактная и эстетичная модель:</p>\r\n    <ul>\r\n      <li>Процессор: INTEL Core i3</li>\r\n      <li>Оперативная память: 4 Гб</li>\r\n      <li>ОС: Windows 10 IoT LTSB</li>\r\n      <li>Тип монтажа: VESA 100</li>\r\n      <li>Размеры (ШхГхВ): 115х111х48 мм</li>\r\n      <li>Питание: 220V, &gt;65W</li>\r\n    </ul>\r\n    {% endset %}    \r\n    {% set urm_price = data.cena_urm_skud_vesa %}\r\n  {% elseif data.urm_skud_type == 'mt_linux' %}\r\n    {% set urm_name = 'Рабочая станция СКУД \"AGRG VideoСервер vS URM.SCUD.Castle.m1.RSPB\"' %}\r\n    {% set urm_desc %} \r\n    <p>Базовая платформа АРМ оператора СКУД на базе ОС Линукс (ультракомпактное отдельностоящее исполнение). Минимальное энергопотребление, отказоустойчивость ОС Линукс, высокая скорость загрузки и выгодная цена для заказчика:</p>\r\n    <ul>\r\n      <li>Процессор: ARM</li>\r\n      <li>Оперативная память: 1 Гб</li>\r\n      <li>ОС: Ubuntu</li>\r\n      <li>Тип монтажа: настольный</li>\r\n      <li>Размеры (ШхГхВ): 100х70х40 мм</li>\r\n      <li>Питание: 220V</li>\r\n    </ul>\r\n    {% endset %}    \r\n    {% set urm_price = data.cena_urm_skud_rspb %}\r\n  {% endif %}\r\n\r\n{% set urm_vol = data.urm_skud %}\r\n{% set urm_cost = (urm_price * urm_vol) %}\r\n{% endif %}\r\n\r\n{# Hardware subtotal #}\r\n\r\n{% set total_hard_cost = (card_cost + reader_cost + bbp_mech_cost + bbp_mag_cost + lock_mech_cost + lock_mag_cost + corner_cost + turnstile_cost + cardcapture_cost + camera_cost + ep_cost + ep_two_cost + ep_four_cost + button_cost + closer_cost + battery_cost + detector_door_cost + detector_controller_cost + master_controller_cost + server_cost + urm_cost) %}\r\n{% set hard_nds = (total_hard_cost * 20 / 120) %}\r\n{% set total_hard_no_nds = (total_hard_cost - hard_nds) %}\r\n\r\n{# Users cost calculation #}\r\n{% if users_total <= '50' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 50 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_50 %}\r\n  {% set user_cost = (user_price * user_vol) %}\r\n  \r\n  {% elseif users_total > '50' and users_total <= '1000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 1000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_1000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n\r\n  {% elseif users_total > '1000' and users_total <= '10000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 10 000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_10000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n\r\n  {% elseif users_total > '10000' and users_total <= '25000' %}\r\n  {% set user_name = 'Базовый модуль ПО Castle, ограничение до 25 000 карт доступа' %}\r\n  {% set user_vol = 1 %}\r\n  {% set user_price = data.cena_po_castle_25000 %} \r\n  {% set user_cost = (user_price * user_vol) %}\r\n{% endif %}\r\n\r\n{# Extra Modules calculation #}\r\n{% if data.module_po_castle_time_track %}\r\n{% set time_track_name = 'Дополнительный модуль ПО Castle «Учет рабочего времени»' %}\r\n{% set time_track_desc %} \r\n<ul>\r\n  <li>Создание рабочих графиков для сотрудников</li>\r\n  <li>Получение отчетов за любой исторический период</li>\r\n  <li>Полный журнал отклонений от рабочего графика</li>\r\n  <li>Журнал неявок, опозданий и других временных нарушений рабочей дисциплины</li>\r\n</ul>\r\n{% endset %}\r\n{% set time_track_vol = 1 %}\r\n{% set time_track_price = data.cena_module_time_track %}\r\n{% set time_track_cost = (time_track_price * time_track_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_pass_print %}\r\n{% set pass_print_name = 'Дополнительный модуль ПО Castle «Создание и печать пропусков»' %}\r\n{% set pass_print_desc %} \r\n<ul>\r\n  <li>Создание и редактирование шаблонов графического оформления пропусков</li>\r\n  <li>Назначение шаблонов пропусков для сотрудников</li>\r\n  <li>Печать пропусков на основании шаблонов и персональных данных сотрудников</li>\r\n</ul>\r\n{% endset %}\r\n{% set pass_print_vol = 1 %}\r\n{% set pass_print_price = data.cena_module_pass_print %}\r\n{% set pass_print_cost = (pass_print_price * pass_print_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_event_monitor %}\r\n{% set event_monitor_name = 'Дополнительный модуль «Мониторинг событий (фотоидентификация)»' %}\r\n{% set event_monitor_desc %} \r\n<ul>\r\n  <li>Наблюдение в режиме реального времени за событиями, происходящими в системе. При запросе прохода сотрудником отображается его учетная карточка из базы, включающая фотографию.</li>\r\n</ul>\r\n{% endset %}\r\n{% set event_monitor_vol = 1 %}\r\n{% set event_monitor_price = data.cena_module_event_monitor %}\r\n{% set event_monitor_cost = (event_monitor_price * event_monitor_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_1c_integration %}\r\n{% set onec_integration_name = 'Дополнительный модуль «Интеграция с 1С»' %}\r\n{% set onec_integration_desc %} \r\n<ul>\r\n  <li>Дополняет функции модуля &laquo;Учет рабочего времени&raquo;</li>\r\n  <li>Автоматическая передача табеля (форма Т-13) в &laquo;1C: Предприятие&raquo;</li>\r\n</ul>\r\n{% endset %}\r\n{% set onec_integration_vol = 1 %}\r\n{% set onec_integration_price = data.cena_module_1c_integration %}\r\n{% set onec_integration_cost = (onec_integration_price * onec_integration_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_pass_ext or data.cardcapture_check %}\r\n{% set pass_ext_name = 'Дополнительный модуль «Расширенная поддержка пропусков посетителей»' %}\r\n{% set pass_ext_desc %} \r\n<ul>\r\n  <li>Интерфейс для выдачи/сбора карт (АРМ &laquo;Бюро пропусков&raquo;), при выдаче происходит привязка карты к паспорту или другому документу посетителя</li>\r\n  <li>Хранение истории выдачи карт</li>\r\n  <li>Задание списка карт посетителей</li>\r\n</ul>\r\n{% endset %}\r\n{% set pass_ext_vol = 1 %}\r\n{% set pass_ext_price = data.cena_module_pass_ext %}\r\n{% set pass_ext_cost = (pass_ext_price * pass_ext_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_event_response %}\r\n{% set event_response_name = 'Дополнительный модуль «Реакция на события»' %}\r\n{% set event_response_desc %} \r\n<ul>\r\n  <li>Задание списка действий, которые будут выполняться системой автоматически при наступлении каких-либо событий. Например, возможна отправка SMS-сообщения на указанный телефонный номер.</li>\r\n</ul>\r\n{% endset %}\r\n{% set event_response_vol = 1 %}\r\n{% set event_response_price = data.cena_module_event_response %}\r\n{% set event_response_cost = (event_response_price * event_response_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_data_sync %}\r\n{% set data_sync_name = 'Дополнительный модуль «Синхронизация данных»' %}\r\n{% set data_sync_desc %} \r\n<ul>\r\n  <li>Автоматическая синхронизация списка сотрудников в СКУД по внешней базе данных существующей корпоративной системы.</li>\r\n</ul>\r\n{% endset %}\r\n{% set data_sync_vol = 1 %}\r\n{% set data_sync_price = data.cena_module_data_sync %}\r\n{% set data_sync_cost = (data_sync_price * data_sync_vol) %}\r\n{% endif %}\r\n\r\n{% if data.module_po_castle_doc_ocr %}\r\n{% set doc_ocr_name = 'Дополнительный модуль «Распознавание документов»' %}\r\n{% set doc_ocr_desc %} \r\n<ul>\r\n  <li>Автоматическое сканирование и распознавание документов при выдаче временного пропуска посетителю.</li>\r\n</ul>\r\n{% endset %}\r\n{% set doc_ocr_vol = 1 %}\r\n{% set doc_ocr_price = data.cena_module_doc_ocr %}\r\n{% set doc_ocr_cost = (doc_ocr_price * doc_ocr_vol) %}\r\n{% endif %}\r\n\r\n{# Face Ident per camera calculation #}\r\n{% if camera_vol > 0 %}\r\n{% set face_ident_camera_name = 'Модуль «Идентификация лица» (лицензия на одну камеру)' %}\r\n{% set face_ident_camera_price = data.cena_module_face_ident_camera %}\r\n{% set face_ident_camera_vol = camera_vol %}\r\n{% set face_ident_camera_cost = (face_ident_camera_price * face_ident_camera_vol) %}\r\n{% endif %}\r\n\r\n{# Face ident calculation #}\r\n{% if data.face_vol > 0 and data.face_vol <= 10 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 10 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_10 %}\r\n\r\n{% elseif data.face_vol > 10 and data.face_vol <= 50 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 50 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_50 %}\r\n\r\n{% elseif data.face_vol > 50 and data.face_vol <= 100 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 100 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_100 %}\r\n\r\n{% elseif data.face_vol > 100 and data.face_vol <= 1000 %}\r\n{% set face_ident_name = 'Модуль «Идентификация лица» (лицензия на базу до 1000 лиц)' %}\r\n{% set face_ident_price = data.cena_module_face_ident_1000 %}\r\n{% endif %}\r\n\r\n{% set face_ident_desc %}\r\n<ul>\r\n  <li>Обязательный модуль, если выбрана опция идентификации лиц.</li>\r\n</ul>\r\n{% endset %}\r\n{% set face_ident_vol = 1 %}\r\n{% set face_ident_cost = (face_ident_price * face_ident_vol) %}\r\n\r\n{# Soft Subtotal #}\r\n{% set total_soft_cost = (user_cost + time_track_cost + pass_print_cost + event_monitor_cost + onec_integration_cost + pass_ext_cost + event_response_cost + data_sync_cost + doc_ocr_cost + face_ident_camera_cost + face_ident_cost) %}\r\n\r\n{# Grand Total #}\r\n{% set total = (total_hard_cost + total_soft_cost) %}\r\n\r\n{# Message Body #}\r\n\r\n<table width=\"100%\" style=\"font-size:14px;line-height:18px\" cellpadding=\"10\">\r\n  <colgroup width=\"50%\"></colgroup>\r\n  <colgroup width=\"10%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <thead>\r\n    <tr style=\"background: #505050; color:#fff\">\r\n      <td>Товары (работы, услуги)</td>\r\n      <td>Кол-во</td>\r\n      <td>Цена (с НДС)</td>\r\n      <td>Сумма (с НДС)</td>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {# Card #}\r\n    {% if card_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ card_name }}</td>  \r\n      <td>{{ card_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ card_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ card_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# Reader #}\r\n    {% if reader_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ reader_name }}</td>\r\n      <td>{{ reader_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ reader_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ reader_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# BBP #}\r\n    {% if bbp_mech_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_mech_name }}</td>\r\n      <td>{{ bbp_mech_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_mech_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_mech_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if bbp_mag_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_mag_name }}</td>\r\n      <td>{{ bbp_mag_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_mag_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_mag_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# BBP Gate #}\r\n    {% if bbp_gate_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ bbp_gate_name }}</td>\r\n      <td>{{ bbp_gate_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ bbp_gate_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ bbp_gate_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    \r\n    {# Lock #}\r\n    {% if lock_mech_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ lock_mech_name }}</td>\r\n      <td>{{ lock_mech_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ lock_mech_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ lock_mech_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if lock_mag_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ lock_mag_name }}</td>\r\n      <td>{{ lock_mag_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ lock_mag_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ lock_mag_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Corner #}\r\n    {% if corner_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ corner_name }}</td>\r\n      <td>{{ corner_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ corner_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ corner_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Turnstile #}\r\n    {% if turnstile_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ turnstile_name }}</td>\r\n      <td>{{ turnstile_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ turnstile_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ turnstile_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {% if cardcapture_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ cardcapture_name }}</td>\r\n      <td>{{ cardcapture_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ cardcapture_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ cardcapture_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Controller #}\r\n    {% if ep_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_name }}</td>\r\n      <td>{{ ep_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if ep_two_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_two_name }}</td>\r\n      <td>{{ ep_two_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_two_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_two_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n    {% if ep_four_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ ep_four_name }}</td>\r\n      <td>{{ ep_four_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ ep_four_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ ep_four_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Button #}\r\n    {% if button_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ button_name }}</td>\r\n      <td>{{ button_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ button_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ button_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Closer #}\r\n    {% if closer_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ closer_name }}</td>\r\n      <td>{{ closer_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ closer_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ closer_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Battery #}\r\n    {% if battery_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ battery_name }}</td>\r\n      <td>{{ battery_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ battery_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ battery_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Battery Gate #}\r\n    {% if battery_gate_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ battery_gate_name }}</td>\r\n      <td>{{ battery_gate_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ battery_gate_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ battery_gate_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Door Detector #}\r\n    {% if detector_door_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ detector_door_name }}</td>\r\n      <td>{{ detector_door_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ detector_door_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ detector_door_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Controller Detector #}\r\n    {% if detector_controller_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ detector_controller_name }}</td>\r\n      <td>{{ detector_controller_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ detector_controller_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ detector_controller_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Master Controller #}\r\n    {% if master_controller_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ master_controller_name }}</td>\r\n      <td>{{ master_controller_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ master_controller_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ master_controller_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Camera #}\r\n    {% if camera_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ camera_name }}</td>\r\n      <td>{{ camera_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ camera_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ camera_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# Server #}\r\n    {% if data.server_skud or camera_cost > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ server_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ server_desc}}</p></td>\r\n      <td>{{ server_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ server_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ server_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# URM #}\r\n    {% if data.urm_skud_check %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ urm_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ urm_desc}}</p></td>\r\n      <td>{{ urm_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ urm_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ urm_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n  </tbody>\r\n</table>\r\n\r\n{# hardware subtotal #}\r\n<table width=\"100%\" style=\"font-size: 14px;line-height: 18px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>  \r\n  <tr>\r\n    <td style=\"text-align:right\">Итого (товары, услуги) без НДС: </td>\r\n    <td style=\"text-align:left\">{{ total_hard_no_nds|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n  <tr>\r\n    <td style=\"text-align:right\">Сумма НДС (20%): </td>\r\n    <td style=\"text-align:left\">{{ hard_nds|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n  <tr>\r\n    <td style=\"text-align:right\">Всего оборудование: </td>\r\n    <td style=\"text-align:left\">{{ total_hard_cost|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n</table>\r\n\r\n<table width=\"100%\" style=\"font-size:14px;line-height:18px\" cellpadding=\"10\">\r\n  <colgroup width=\"50%\"></colgroup>\r\n  <colgroup width=\"10%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <thead>\r\n    <tr style=\"background: #505050; color:#fff\">\r\n      <td>Товары (программное обеспечение)</td>\r\n      <td>Кол-во</td>\r\n      <td>Цена (с НДС)</td>\r\n      <td>Сумма (с НДС)</td>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {# User #}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ user_name }}</td>\r\n      <td>{{ user_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ user_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ user_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    \r\n    {# Time Track #}\r\n    {% if data.module_po_castle_time_track %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ time_track_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ time_track_desc}}</p></td>\r\n      <td>{{ time_track_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ time_track_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ time_track_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# pass_print #}\r\n    {% if data.module_po_castle_pass_print %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ pass_print_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ pass_print_desc}}</p></td>\r\n      <td>{{ pass_print_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ pass_print_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ pass_print_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# event_monitor #}\r\n    {% if data.module_po_castle_event_monitor %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ event_monitor_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ event_monitor_desc}}</p></td>\r\n      <td>{{ event_monitor_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ event_monitor_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ event_monitor_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# 1c_integration #}\r\n    {% if data.module_po_castle_1c_integration %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ onec_integration_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ onec_integration_desc}}</p></td>\r\n      <td>{{ onec_integration_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ onec_integration_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ onec_integration_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# pass_ext #}\r\n    {% if data.module_po_castle_pass_ext %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ pass_ext_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ pass_ext_desc}}</p></td>\r\n      <td>{{ pass_ext_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ pass_ext_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ pass_ext_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# event_response #}\r\n    {% if data.module_po_castle_event_response %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ event_response_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ event_response_desc}}</p></td>\r\n      <td>{{ event_response_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ event_response_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ event_response_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# data_sync #}\r\n    {% if data.module_po_castle_data_sync %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ data_sync_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ data_sync_desc}}</p></td>\r\n      <td>{{ data_sync_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ data_sync_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ data_sync_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# doc_ocr #}\r\n    {% if data.module_po_castle_doc_ocr %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ doc_ocr_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ doc_ocr_desc}}</p></td>\r\n      <td>{{ doc_ocr_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ doc_ocr_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ doc_ocr_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# face_ident_camera #}\r\n    {% if camera_vol > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ face_ident_camera_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ face_ident_camera_desc}}</p></td>\r\n      <td>{{ face_ident_camera_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ face_ident_camera_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ face_ident_camera_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n\r\n    {# face_ident #}\r\n    {% if data.face_vol > 0 %}\r\n    <tr style=\"background: #eaeaea\">\r\n      <td>{{ face_ident_name }}<br/>\r\n        <p style=\"font-size:11px; line-height:13px;\">\r\n          {{ face_ident_desc}}</p></td>\r\n      <td>{{ face_ident_vol|number_format(0, '.', ' ') }}</td>\r\n      <td>{{ face_ident_price|number_format(0, '.', ' ') }} руб.</td>\r\n      <td>{{ face_ident_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    {% endif %}\r\n  </tbody>\r\n</table>\r\n\r\n{# software subtotal #}\r\n<table width=\"100%\" style=\"font-size: 14px;line-height: 18px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n    <tr>\r\n      <td style=\"text-align:right\">Итого (программное обеспечение): </td>\r\n      <td style=\"text-align:left\">{{ total_soft_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:right\">Сумма НДС (20%): </td>\r\n      <td style=\"text-align:left\">—</td>\r\n    </tr>\r\n    <tr>\r\n      <td style=\"text-align:right\">Всего ПО: </td>\r\n      <td style=\"text-align:left\">{{ total_soft_cost|number_format(0, '.', ' ') }} руб.</td>\r\n    </tr>\r\n</table>\r\n\r\n<p>НДС не облагается согласно подпункту 26 пункта 2 статьи 149 НК РФ.</p>\r\n<table width=\"100%\" style=\"font-size: 18px;line-height: 24px;font-weight: 600;\" cellpadding=\"10\">\r\n  <colgroup width=\"80%\"></colgroup>\r\n  <colgroup width=\"20%\"></colgroup>\r\n  <tr>\r\n    <td style=\"text-align:left\">Общая сумма КП (оборудование + программное обеспечение):</td>\r\n    <td style=\"text-align:left\">{{ total|number_format(0, '.', ' ') }} руб.</td>\r\n  </tr>\r\n</table>"
      excluded_elements:
        reader_ordinary: reader_ordinary
        reader_eywa_classics: reader_eywa_classics
        reader_eywa_art: reader_eywa_art
        processed_text: processed_text
        processed_text_01: processed_text_01
        distance_30_less: distance_30_less
        distance_30_more: distance_30_more
        mechanical_lock_img_01: mechanical_lock_img_01
        magnet_lock_img_01: magnet_lock_img_01
        mechanical_lock_img: mechanical_lock_img
        magnet_lock_img: magnet_lock_img
        turnstile_check: turnstile_check
        turnstile_tripod_img: turnstile_tripod_img
        turnstile_gate_img: turnstile_gate_img
        cena_karty_em_marine: cena_karty_em_marine
        cena_karty_hid: cena_karty_hid
        cena_karty_mifare: cena_karty_mifare
        cena_po_castle_50: cena_po_castle_50
        cena_po_castle_1000: cena_po_castle_1000
        cena_po_castle_10000: cena_po_castle_10000
        cena_po_castle_25000: cena_po_castle_25000
        cena_reader_em_marine_ordinary: cena_reader_em_marine_ordinary
        cena_reader_hid_ordinary: cena_reader_hid_ordinary
        cena_reader_mifare_ordinary: cena_reader_mifare_ordinary
        cena_bio_reader_em_marine: cena_bio_reader_em_marine
        cena_bio_reader_hid: cena_bio_reader_hid
        cena_bio_reader_mifare: cena_bio_reader_mifare
        cena_reader_em_marine_premium: cena_reader_em_marine_premium
        cena_reader_hid_premium: cena_reader_hid_premium
        cena_reader_mifare_premium: cena_reader_mifare_premium
        cena_reader_eywa_classics: cena_reader_eywa_classics
        cena_reader_eywa_art: cena_reader_eywa_art
        cena_ep: cena_ep
        cena_ep2: cena_ep2
        cena_ep4: cena_ep4
        cena_mechanical_lock: cena_mechanical_lock
        cena_magnetlock: cena_magnetlock
        cena_bbp_20: cena_bbp_20
        cena_bbp_50: cena_bbp_50
        cena_ivepr: cena_ivepr
        cena_battery_dt1207: cena_battery_dt1207
        cena_battery_dt1212: cena_battery_dt1212
        cena_button_ordinary: cena_button_ordinary
        cena_montage_corner: cena_montage_corner
        cena_closer_tantos_ts_dc085: cena_closer_tantos_ts_dc085
        cena_detector_door: cena_detector_door
        cena_detector_controller: cena_detector_controller
        cena_reader_master_em_marine: cena_reader_master_em_marine
        cena_reader_master_mifare: cena_reader_master_mifare
        cena_bio_reader_master: cena_bio_reader_master
        cena_camera: cena_camera
        cena_server_skud: cena_server_skud
        cena_server_face_10: cena_server_face_10
        cena_server_skud_50_rack: cena_server_skud_50_rack
        cena_server_skud_100_rack: cena_server_skud_100_rack
        cena_server_skud_50_mt: cena_server_skud_50_mt
        cena_urm_skud: cena_urm_skud
        cena_urm_skud_vesa: cena_urm_skud_vesa
        cena_urm_skud_rspb: cena_urm_skud_rspb
        cena_turnstile_tripod: cena_turnstile_tripod
        cena_turnstile_gate: cena_turnstile_gate
        cena_cardcapture: cena_cardcapture
        cena_module_time_track: cena_module_time_track
        cena_module_pass_print: cena_module_pass_print
        cena_module_event_monitor: cena_module_event_monitor
        cena_module_1c_integration: cena_module_1c_integration
        cena_module_pass_ext: cena_module_pass_ext
        cena_module_event_response: cena_module_event_response
        cena_module_data_sync: cena_module_data_sync
        cena_module_doc_ocr: cena_module_doc_ocr
        cena_module_face_recog: cena_module_face_recog
        cena_module_face_ident_10: cena_module_face_ident_10
        cena_module_face_ident_50: cena_module_face_ident_50
        cena_module_face_ident_100: cena_module_face_ident_100
        cena_module_face_ident_1000: cena_module_face_ident_1000
        cena_module_face_ident_camera: cena_module_face_ident_camera
        horizontal_rule: horizontal_rule
        random: random
        fake: fake
      ignore_access: false
      exclude_empty: true
      exclude_empty_checkbox: true
      exclude_attachments: true
      html: true
      attachments: true
      twig: true
      debug: false
      reply_to: ''
      return_path: ''
      sender_mail: ''
      sender_name: ''
      theme_name: ''
      parameters: {  }
variants: {  }
